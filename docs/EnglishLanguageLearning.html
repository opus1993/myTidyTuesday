<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Jim Gruman" />

<meta name="date" content="2022-10-15" />

<title>Kaggle Feedback Prize - English Language Learning</title>

<script src="site_libs/header-attrs-2.18/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/yeti.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>

<link rel="icon" href="https://github.com/workflowr/workflowr-assets/raw/main/img/reproducible.png">
<!-- Add a small amount of space between sections. -->
<style type="text/css">
div.section {
  padding-top: 12px;
}
</style>



<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>




<style type="text/css">
#rmd-source-code {
  display: none;
}
</style>





<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">myTidyTuesday</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="about.html">About</a>
</li>
<li>
  <a href="license.html">License</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/opus1993/myTidyTuesday">source</a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
<li role="separator" class="divider"></li>
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Kaggle Feedback Prize - English Language
Learning</h1>
<h4 class="author">Jim Gruman</h4>
<h4 class="date">October 15, 2022</h4>

</div>


<p>
<button type="button" class="btn btn-default btn-workflowr btn-workflowr-report" data-toggle="collapse" data-target="#workflowr-report">
<span class="glyphicon glyphicon-list" aria-hidden="true"></span>
workflowr <span class="glyphicon glyphicon-ok text-success"
aria-hidden="true"></span>
</button>
</p>
<div id="workflowr-report" class="collapse">
<ul class="nav nav-tabs">
<li class="active">
<a data-toggle="tab" href="#summary">Summary</a>
</li>
<li>
<a data-toggle="tab" href="#checks"> Checks <span
class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span>
</a>
</li>
<li>
<a data-toggle="tab" href="#versions">Past versions</a>
</li>
</ul>
<div class="tab-content">
<div id="summary" class="tab-pane fade in active">
<p>
<strong>Last updated:</strong> 2022-12-16
</p>
<p>
<strong>Checks:</strong> <span
class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span> 7
<span class="glyphicon glyphicon-exclamation-sign text-danger"
aria-hidden="true"></span> 0
</p>
<p>
<strong>Knit directory:</strong> <code>myTidyTuesday/</code> <span
class="glyphicon glyphicon-question-sign" aria-hidden="true"
title="This is the local directory in which the code in this file was executed.">
</span>
</p>
<p>
This reproducible <a href="https://rmarkdown.rstudio.com">R Markdown</a>
analysis was created with <a
  href="https://github.com/workflowr/workflowr">workflowr</a> (version
1.7.0). The <em>Checks</em> tab describes the reproducibility checks
that were applied when the results were created. The <em>Past
versions</em> tab lists the development history.
</p>
<hr>
</div>
<div id="checks" class="tab-pane fade">
<div id="workflowr-checks" class="panel-group">
<div class="panel panel-default">
<div class="panel-heading">
<p class="panel-title">
<a data-toggle="collapse" data-parent="#workflowr-checks" href="#strongRMarkdownfilestronguptodate">
<span class="glyphicon glyphicon-ok text-success"
aria-hidden="true"></span> <strong>R Markdown file:</strong> up-to-date
</a>
</p>
</div>
<div id="strongRMarkdownfilestronguptodate"
class="panel-collapse collapse">
<div class="panel-body">
<p>Great! Since the R Markdown file has been committed to the Git
repository, you know the exact version of the code that produced these
results.</p>
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
<p class="panel-title">
<a data-toggle="collapse" data-parent="#workflowr-checks" href="#strongEnvironmentstrongempty">
<span class="glyphicon glyphicon-ok text-success"
aria-hidden="true"></span> <strong>Environment:</strong> empty </a>
</p>
</div>
<div id="strongEnvironmentstrongempty" class="panel-collapse collapse">
<div class="panel-body">
<p>Great job! The global environment was empty. Objects defined in the
global environment can affect the analysis in your R Markdown file in
unknown ways. For reproduciblity it’s best to always run the code in an
empty environment.</p>
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
<p class="panel-title">
<a data-toggle="collapse" data-parent="#workflowr-checks" href="#strongSeedstrongcodesetseed20210907code">
<span class="glyphicon glyphicon-ok text-success"
aria-hidden="true"></span> <strong>Seed:</strong>
<code>set.seed(20210907)</code> </a>
</p>
</div>
<div id="strongSeedstrongcodesetseed20210907code"
class="panel-collapse collapse">
<div class="panel-body">
<p>The command <code>set.seed(20210907)</code> was run prior to running
the code in the R Markdown file. Setting a seed ensures that any results
that rely on randomness, e.g. subsampling or permutations, are
reproducible.</p>
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
<p class="panel-title">
<a data-toggle="collapse" data-parent="#workflowr-checks" href="#strongSessioninformationstrongrecorded">
<span class="glyphicon glyphicon-ok text-success"
aria-hidden="true"></span> <strong>Session information:</strong>
recorded </a>
</p>
</div>
<div id="strongSessioninformationstrongrecorded"
class="panel-collapse collapse">
<div class="panel-body">
<p>Great job! Recording the operating system, R version, and package
versions is critical for reproducibility.</p>
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
<p class="panel-title">
<a data-toggle="collapse" data-parent="#workflowr-checks" href="#strongCachestrongnone">
<span class="glyphicon glyphicon-ok text-success"
aria-hidden="true"></span> <strong>Cache:</strong> none </a>
</p>
</div>
<div id="strongCachestrongnone" class="panel-collapse collapse">
<div class="panel-body">
<p>Nice! There were no cached chunks for this analysis, so you can be
confident that you successfully produced the results during this
run.</p>
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
<p class="panel-title">
<a data-toggle="collapse" data-parent="#workflowr-checks" href="#strongFilepathsstrongrelative">
<span class="glyphicon glyphicon-ok text-success"
aria-hidden="true"></span> <strong>File paths:</strong> relative </a>
</p>
</div>
<div id="strongFilepathsstrongrelative" class="panel-collapse collapse">
<div class="panel-body">
<p>Great job! Using relative paths to the files within your workflowr
project makes it easier to run your code on other machines.</p>
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
<p class="panel-title">
<a data-toggle="collapse" data-parent="#workflowr-checks" href="#strongRepositoryversionstrongahrefhttpsgithubcomopus1993myTidyTuesdaytreef0ab5e8f90856244928c9721955da79e5773635atargetblankf0ab5e8a">
<span class="glyphicon glyphicon-ok text-success"
aria-hidden="true"></span> <strong>Repository version:</strong>
<a href="https://github.com/opus1993/myTidyTuesday/tree/f0ab5e8f90856244928c9721955da79e5773635a" target="_blank">f0ab5e8</a>
</a>
</p>
</div>
<div
id="strongRepositoryversionstrongahrefhttpsgithubcomopus1993myTidyTuesdaytreef0ab5e8f90856244928c9721955da79e5773635atargetblankf0ab5e8a"
class="panel-collapse collapse">
<div class="panel-body">
<p>
Great! You are using Git for version control. Tracking code development
and connecting the code version to the results is critical for
reproducibility.
</p>
<p>
The results in this page were generated with repository version
<a href="https://github.com/opus1993/myTidyTuesday/tree/f0ab5e8f90856244928c9721955da79e5773635a" target="_blank">f0ab5e8</a>.
See the <em>Past versions</em> tab to see a history of the changes made
to the R Markdown and HTML files.
</p>
<p>
Note that you need to be careful to ensure that all relevant files for
the analysis have been committed to Git prior to generating the results
(you can use <code>wflow_publish</code> or
<code>wflow_git_commit</code>). workflowr only checks the R Markdown
file, but you know if there are other scripts or data files that it
depends on. Below is the status of the Git repository when the results
were generated:
</p>
<pre><code>
Ignored files:
    Ignored:    .Rhistory
    Ignored:    .Rproj.user/
    Ignored:    data/.Rhistory
    Ignored:    data/2022_11_01.png
    Ignored:    data/2022_11_18.png
    Ignored:    data/CNHI_Excel_Chart.xlsx
    Ignored:    data/Chicago.rds
    Ignored:    data/CommunityTreemap.jpeg
    Ignored:    data/Community_Roles.jpeg
    Ignored:    data/ELL.zip
    Ignored:    data/FM_service_contour_current.zip
    Ignored:    data/SeriesReport-20220414171148_6c3b18.xlsx
    Ignored:    data/Weekly_Chicago_IL_Regular_Reformulated_Retail_Gasoline_Prices.csv
    Ignored:    data/YammerDigitalDataScienceMembership.xlsx
    Ignored:    data/YammerMemberPage.rds
    Ignored:    data/YammerMembers.rds
    Ignored:    data/application_id.feather
    Ignored:    data/df.rds
    Ignored:    data/fit_cohesion.rds
    Ignored:    data/fit_grammar.rds
    Ignored:    data/fit_phraseology.rds
    Ignored:    data/fit_syntax.rds
    Ignored:    data/fit_vocabulary.rds
    Ignored:    data/grainstocks.rds
    Ignored:    data/hike_data.rds
    Ignored:    data/lm_res.rds
    Ignored:    data/raw_contour.feather
    Ignored:    data/raw_weather.RData
    Ignored:    data/sample_submission.csv
    Ignored:    data/submission.csv
    Ignored:    data/test.csv
    Ignored:    data/train.csv
    Ignored:    data/us_states.rds
    Ignored:    data/us_states_hexgrid.geojson
    Ignored:    data/weatherstats_toronto_daily.csv

Untracked files:
    Untracked:  analysis/2022_09_01_kaggle_tabular_playground.qmd
    Untracked:  code/YammerReach.R
    Untracked:  code/autokeras.R
    Untracked:  code/chicago.R
    Untracked:  code/glmnet_test.R
    Untracked:  code/googleCompute.R
    Untracked:  code/work list batch targets.R
    Untracked:  environment.yml
    Untracked:  report.html

Unstaged changes:
    Modified:   analysis/2021_01_19_tidy_tuesday.Rmd
    Modified:   analysis/2021_03_24_tidy_tuesday.Rmd
    Deleted:    analysis/2021_04_20.Rmd
    Deleted:    analysis/2022_02_11_tabular_playground.Rmd
    Deleted:    analysis/2022_04_18.qmd
    Modified:   analysis/Survival.Rmd
    Modified:   analysis/_site.yml
    Modified:   code/_common.R

</code></pre>
<p>
Note that any generated files, e.g. HTML, png, CSS, etc., are not
included in this status report because it is ok for generated content to
have uncommitted changes.
</p>
</div>
</div>
</div>
</div>
<hr>
</div>
<div id="versions" class="tab-pane fade">

<p>
These are the previous versions of the repository in which changes were
made to the R Markdown
(<code>analysis/EnglishLanguageLearning.Rmd</code>) and HTML
(<code>docs/EnglishLanguageLearning.html</code>) files. If you’ve
configured a remote Git repository (see <code>?wflow_git_remote</code>),
click on the hyperlinks in the table below to view the files as they
were in that past version.
</p>
<div class="table-responsive">
<table class="table table-condensed table-hover">
<thead>
<tr>
<th>
File
</th>
<th>
Version
</th>
<th>
Author
</th>
<th>
Date
</th>
<th>
Message
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
html
</td>
<td>
<a href="https://rawcdn.githack.com/opus1993/myTidyTuesday/f0ab5e8f90856244928c9721955da79e5773635a/docs/EnglishLanguageLearning.html" target="_blank">f0ab5e8</a>
</td>
<td>
opus1993
</td>
<td>
2022-11-29
</td>
<td>
Build site.
</td>
</tr>
<tr>
<td>
Rmd
</td>
<td>
<a href="https://github.com/opus1993/myTidyTuesday/blob/c07b02a2ff35a9a0a2ab555e50197b62ddcf9853/analysis/EnglishLanguageLearning.Rmd" target="_blank">c07b02a</a>
</td>
<td>
opus1993
</td>
<td>
2022-11-29
</td>
<td>
wflow_publish("analysis/EnglishLanguageLearning.Rmd")
</td>
</tr>
<tr>
<td>
Rmd
</td>
<td>
<a href="https://github.com/opus1993/myTidyTuesday/blob/42d242179c86468579f0fd7d8fbdc57abae3fa38/analysis/EnglishLanguageLearning.Rmd" target="_blank">42d2421</a>
</td>
<td>
opus1993
</td>
<td>
2022-11-29
</td>
<td>
add likert and resamples on all metrics
</td>
</tr>
<tr>
<td>
html
</td>
<td>
<a href="https://rawcdn.githack.com/opus1993/myTidyTuesday/b5a9c2b739d197473d948a639a905a9533dff8dc/docs/EnglishLanguageLearning.html" target="_blank">b5a9c2b</a>
</td>
<td>
opus1993
</td>
<td>
2022-10-15
</td>
<td>
Build site.
</td>
</tr>
<tr>
<td>
html
</td>
<td>
<a href="https://rawcdn.githack.com/opus1993/myTidyTuesday/fad0136e7895fc6b233b8e60f875a60533eccf2c/docs/EnglishLanguageLearning.html" target="_blank">fad0136</a>
</td>
<td>
opus1993
</td>
<td>
2022-10-15
</td>
<td>
Build site.
</td>
</tr>
<tr>
<td>
Rmd
</td>
<td>
<a href="https://github.com/opus1993/myTidyTuesday/blob/73c07de53c7608efb18c1e4302a646bd4e05c6ea/analysis/EnglishLanguageLearning.Rmd" target="_blank">73c07de</a>
</td>
<td>
opus1993
</td>
<td>
2022-10-15
</td>
<td>
Kaggle English Language Learning
</td>
</tr>
<tr>
<td>
html
</td>
<td>
<a href="https://rawcdn.githack.com/opus1993/myTidyTuesday/66b10e02ce38127a3ccdaf590be8789daf1ca986/docs/EnglishLanguageLearning.html" target="_blank">66b10e0</a>
</td>
<td>
opus1993
</td>
<td>
2022-10-15
</td>
<td>
Build site.
</td>
</tr>
<tr>
<td>
Rmd
</td>
<td>
<a href="https://github.com/opus1993/myTidyTuesday/blob/bb8b75789e01d55da4bf22acc7e6d6b16bad3c4f/analysis/EnglishLanguageLearning.Rmd" target="_blank">bb8b757</a>
</td>
<td>
opus1993
</td>
<td>
2022-10-15
</td>
<td>
initial commit of Kaggle English Language Learning
</td>
</tr>
</tbody>
</table>
</div>
<hr>
</div>
</div>
</div>
<p>The Kaggle Challenge presented here works with a dataset that
comprises argumentative essays (the ELLIPSE corpus) written by 8th-12th
grade English Language Learners (ELLs). The essays have been scored on
six measures: <strong>cohesion, syntax, vocabulary, phraseology,
grammar,</strong> and <strong>conventions</strong>.</p>
<p>Each measure represents a component of writing proficiency, ranging
from 1.0 to 5.0 in increments of 0.5. Our task is to predict the score
of each measure by essay.</p>
<p><img
src="https://storage.googleapis.com/kaggle-competitions/kaggle/38321/logos/header.png" /></p>
<p><a
href="https://docs.google.com/document/d/1PBNshCCbjIF7Hw4L-dwWHKosNVAHS8P3vHYM_EkpCvA/edit">This
is the rubric</a> that was used to grade the essays. Two people did the
work independently, and then the scores were compared for alignment.</p>
<div id="preprocessing" class="section level2">
<h2>Preprocessing</h2>
<p>Natural Language Processing techniques offer a wide variety of tools
to approach this problem. The Kaggle host is requiring that the model
run as a standalone, without internet assistance. They also ask for a
parsimonous, explainable model.</p>
<p>We will start with exploring the predictive potential of the text
count features, like numbers of words, distinct words, and spaces.</p>
<p>Unsupervised topic grouping categories may be useful for measures
like conventions or grammar. In this case, we will start with <a
href="https://en.wikipedia.org/wiki/Latent_Dirichlet_allocation">Latent
Dirichlet allocation</a> (LDA).</p>
<p>Individual words may have predictive power, but they could be so
sparse as to be difficult to separate from the background noise.
Consider words like <em>ain’t</em> and phrases taken from other
languages.</p>
<p>Bringing in a sentiment dictionary may add predictive power to some
measures, along with helping to count miss-spellings. Word embeddings
like Glove or Huggingface could also better characterize meaning.</p>
</div>
<div id="modeling" class="section level2">
<h2>Modeling</h2>
<p>Many developers are tempted to jump into (CNN / LSTM) deep learning,
but the number of essays is really pretty small for a deep learning run
on their own. Another approach could leverage the pre-trained embeddings
in one of the <a
href="https://en.wikipedia.org/wiki/BERT_(language_model)">BERT</a>s.
The current Kaggle leaderboard is full of them. Even so, the standings
will shift in a huge way after the full test set calculations appear
because of overfitting and imbalance.</p>
<p>The GloVe pre-trained word vectors provide word embeddings created on
existing document corpus, and are provided as a pre-processor using
varying numbers of tokens. See <a
href="https://nlp.stanford.edu/projects/glove/">Jeffrey Pennington,
Richard Socher, and Christopher D. Manning. 2014. GloVe: Global Vectors
for Word Representation.</a> for details.</p>
<p>I spent a few evenings with the torch/<code>brulee</code> approach on
<code>tidymodels</code>, but discovered that modeling time consumed
would be significant and the results were not better than random forests
on engineered features with case weights based on inverse proportions of
the metric values.</p>
<p>I ultimately settled on the <code>xgboost</code> approach here. No
doubt it can still overfit on specific words and text attributes, like
the number of unique words.</p>
<p>One last point. I believe that the Essay Scoring is done by humans in
a way where the metrics are judged together, and not entirely
independently. In other words, low <code>grammar</code> and low
<code>cohesion</code> are related.</p>
<pre class="r"><code>suppressPackageStartupMessages({
library(tidyverse)
  
library(tidymodels)
library(text2vec) # for topic modeling

library(tidytext)
library(textrecipes)

})

tidymodels::tidymodels_prefer()

theme_set(theme_minimal())</code></pre>
<p>Let’s read the data from Kaggle’s csv’s into dataframes.</p>
<pre class="r"><code>train_essays_raw &lt;- read_csv(here::here(&quot;data&quot;,&quot;train.csv&quot;),
                         show_col_types = FALSE) 

submit_essays_raw &lt;- read_csv(here::here(&quot;data&quot;,&quot;test.csv&quot;),
                          show_col_types = FALSE) 

outcomes = names(train_essays_raw)[3:8]

dim(train_essays_raw)</code></pre>
<pre><code>[1] 3911    8</code></pre>
<p>The essay metrics score distributions resemble ordinal Likert scales.
One way to illustrate the counts at each level is this bar chart:</p>
<pre class="r"><code>stage1 &lt;- train_essays_raw |&gt;
  select(cohesion:conventions) |&gt;
  pivot_longer(cols = everything(),
               names_to = &quot;metric&quot;,
               values_to = &quot;ans&quot;) |&gt;
  group_by(ans, metric) |&gt;
  summarize(n = n(),
            .groups = &quot;drop&quot;) |&gt;
  group_by(metric) |&gt;
  mutate(per = n / sum(n)) |&gt;
  mutate(
    text = paste0(formatC(
      100 * per, format = &quot;f&quot;, digits = 0
    ), &quot;%&quot;),
    cs = cumsum(per),
    offset = sum(per[1:(floor(n() / 2))]) + (n() %% 2) * 0.5 * (per[ceiling(n() /
                                                                              2)]),
    xmax = -offset + cs,
    xmin = xmax - per
  ) |&gt;
  ungroup()

gap &lt;- 0.2

stage2 &lt;- stage1 %&gt;%
  left_join(
    stage1 %&gt;%
      group_by(metric) %&gt;%
      summarize(max.xmax = max(xmax)) %&gt;%
      mutate(r = row_number(max.xmax)),
    by = &quot;metric&quot;
  ) %&gt;%
  arrange(desc(r)) %&gt;%
  mutate(ymin = r - (1 - gap) / 2,
         ymax = r + (1 - gap) / 2)

ggplot(stage2) +
  geom_vline(xintercept = 0) +
  geom_rect(aes(
    xmin = xmin,
    xmax = xmax,
    ymin = ymin,
    ymax = ymax,
    fill = factor(ans)
  )) +
  geom_text(aes(
    x = (xmin + xmax) / 2,
    y = (ymin + ymax) / 2,
    label = text
  ),
  size = 3,
  check_overlap = TRUE) +
  scale_x_continuous(
    &quot;&quot;,
    labels = percent,
    breaks = seq(-0.6, 0.65, len = 6),
    limits = c(-0.6, 0.65)
  ) +   scale_y_continuous(
    &quot;&quot;,
    breaks = 1:n_distinct(stage2$metric),
    labels = rev(stage2 %&gt;% distinct(metric) %&gt;% .$metric)
  ) +
  scale_fill_brewer(&quot;Score&quot;, palette = &quot;BrBG&quot;) +
  labs(title = &quot;Training set Essay Ratings&quot;)</code></pre>
<p><img src="figure/EnglishLanguageLearning.Rmd/likert-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Essays with more words, or more sentences, do not necessarily score
better.</p>
<pre class="r"><code>te_long &lt;- train_essays_raw |&gt;
  pivot_longer(cols = cohesion:conventions,
               names_to = &quot;metric&quot;,
               values_to = &quot;value&quot;) |&gt;
  mutate(metric = as.factor(metric),
         value = as.factor(value))

te_long |&gt; 
  group_by(n_words = ggplot2::cut_interval(
    tokenizers::count_words(full_text), 
    length = 200),
    metric, value) |&gt; 
  summarise(`Number of essays` = n(),
            .groups = &quot;drop&quot;) |&gt; 
  ggplot(aes(n_words, `Number of essays`, fill = as.factor(value))) +
  geom_col() +
  scale_x_discrete(guide = guide_axis(n.dodge = 2)) +
  facet_wrap(vars(metric)) +
  scale_fill_brewer(&quot;Score&quot;, palette = &quot;BrBG&quot;) +
  labs(x = &quot;Number of words per essay&quot;,
       y = &quot;Number of essays&quot;,
       fill = &quot;Score&quot;)</code></pre>
<p><img src="figure/EnglishLanguageLearning.Rmd/outcome%20variable%20distributions-1.png" width="672" style="display: block; margin: auto;" /></p>
<pre class="r"><code>te_long |&gt; 
  group_by(n_words = ggplot2::cut_interval(
    tokenizers::count_sentences(full_text), length = 20),
    metric, value) |&gt; 
  summarise(`Number of essays` = n(),
            .groups = &quot;drop&quot;) |&gt; 
  ggplot(aes(n_words, `Number of essays`, fill = as.factor(value))) +
  geom_col() +
  scale_x_discrete(guide = guide_axis(n.dodge = 2)) +
  facet_wrap(vars(metric)) +
  scale_fill_brewer(&quot;Score&quot;, palette = &quot;BrBG&quot;) +
  labs(x = &quot;Number of sentences per essay&quot;,
       y = &quot;Number of essays&quot;,
       fill = &quot;Score&quot;)</code></pre>
<p><img src="figure/EnglishLanguageLearning.Rmd/outcome%20variable%20distributions-2.png" width="672" style="display: block; margin: auto;" /></p>
<p>What words from the dialogue have the highest log odds of coming from
each level of each outcome? Do the individual words have predictive
power?</p>
<pre class="r"><code>plot_log_odds &lt;- function(outcome = &quot;cohesion&quot;){

train_essays_raw |&gt;
  tidytext::unnest_tokens(word, full_text) |&gt; 
  count(level = factor(.data[[outcome]]), word, sort = TRUE) |&gt;   
  tidylo::bind_log_odds(level, word, n) |&gt; 
  filter(n &gt; 20) |&gt; 
  group_by(level) |&gt; 
  slice_max(log_odds_weighted, n = 10) |&gt; 
  mutate(word = reorder_within(word, log_odds_weighted, level)) %&gt;%
  ggplot(aes(log_odds_weighted, word, fill = level)) +
  geom_col(show.legend = FALSE) +
  facet_wrap(vars(level), scales = &quot;free&quot;) +
  scale_fill_brewer(&quot;Score&quot;, palette = &quot;BrBG&quot;) +
  scale_y_reordered() +
  labs(y = NULL, title = glue::glue(&quot;{outcome} log odds words&quot;))  
    
}

map(outcomes, plot_log_odds)</code></pre>
<pre><code>[[1]]</code></pre>
<p><img src="figure/EnglishLanguageLearning.Rmd/log%20odds-1.png" width="672" style="display: block; margin: auto;" /></p>
<pre><code>
[[2]]</code></pre>
<p><img src="figure/EnglishLanguageLearning.Rmd/log%20odds-2.png" width="672" style="display: block; margin: auto;" /></p>
<pre><code>
[[3]]</code></pre>
<p><img src="figure/EnglishLanguageLearning.Rmd/log%20odds-3.png" width="672" style="display: block; margin: auto;" /></p>
<pre><code>
[[4]]</code></pre>
<p><img src="figure/EnglishLanguageLearning.Rmd/log%20odds-4.png" width="672" style="display: block; margin: auto;" /></p>
<pre><code>
[[5]]</code></pre>
<p><img src="figure/EnglishLanguageLearning.Rmd/log%20odds-5.png" width="672" style="display: block; margin: auto;" /></p>
<pre><code>
[[6]]</code></pre>
<p><img src="figure/EnglishLanguageLearning.Rmd/log%20odds-6.png" width="672" style="display: block; margin: auto;" /></p>
<p>To some extent, the answer may be yes.</p>
<p>Let’s also take a look at outcome pairwise correlations.</p>
<pre class="r"><code>train_essays_raw |&gt; 
  corrr::correlate(
    quiet = TRUE
  ) %&gt;%
  corrr::rearrange() %&gt;%
  corrr::shave() %&gt;%
  corrr::rplot(print_cor = TRUE,
               colors = brewer_pal(palette = &quot;BrBG&quot;)(5)) +
  scale_x_discrete(guide = guide_axis(n.dodge = 3))</code></pre>
<p><img src="figure/EnglishLanguageLearning.Rmd/predictor%20and%20outcome%20pairwise%20correlations-1.png" width="672" style="display: block; margin: auto;" /></p>
<ul>
<li>Vocabulary and Phraseology (0.74) track together.</li>
<li>Phraseology and Syntax (0.73) track together.</li>
<li>Praseology and Grammar (0.72) track together.</li>
</ul>
<p>Avoiding overfitting to the training data is critical to achieving a
strong score. We are going to use resampling to have some indication
that our model generalizes to new essays. Care must be exercised to be
sure that members of the hold out folds are not also found in the
training folds.</p>
<p>Latent Dirichlet allocation (LDA) is an unsupervised generative
statistical model that explains a set of observations through unobserved
groups, and the content of each group may explain why some parts of the
data are similar.</p>
<p>I’d like to explore the use of
<code>inverse probability weights</code> because there are so few essays
with scores at the highest and lowest levels. When survey respondents
have different probabilities of selection, (inverse) probability weights
help reduce bias in the results.</p>
<p>I am making us of metaprogramming techniques to pass text vector
column names into the formula and case weights functions to re-use them
for each metric.</p>
<pre class="r"><code>tokens = text2vec::word_tokenizer(tolower(train_essays_raw$full_text))

it = text2vec::itoken(tokens, ids = train_essays_raw$text_id, progressbar = FALSE)

v = text2vec::create_vocabulary(it)

dtm = text2vec::create_dtm(it, text2vec::vocab_vectorizer(v), type = &quot;RsparseMatrix&quot;)

lda_model &lt;- text2vec::LDA$new(n_topics = 30)

case_weight_builder &lt;- function(data, outcome) {
  data %&gt;%
    inner_join(data %&gt;%
                 count(.data[[outcome]],
                       name = &quot;case_wts&quot;),
               by = glue::glue(&quot;{ outcome }&quot;)) %&gt;%
    mutate(case_wts = importance_weights(max(case_wts) / case_wts))
}

recipe_builder &lt;- function(outcome = &quot;cohesion&quot;) {
  rec &lt;- recipe(
    formula(glue::glue(&quot;{ outcome } ~ .&quot;)),
    data = train_essays_raw |&gt;
      select({
        {
          outcome
        }
      }, full_text) |&gt;
      case_weight_builder(outcome)
  ) |&gt;
    step_textfeature(full_text,
                     keep_original_cols = TRUE) |&gt;
    step_rename_at(starts_with(&quot;textfeature_&quot;),
                   fn = ~ gsub(&quot;textfeature_full_text_&quot;, &quot;&quot;, .)) %&gt;%
    step_tokenize(full_text) %&gt;%
    step_lda(full_text,
             lda_models = lda_model,
             keep_original_cols = TRUE) %&gt;%
    step_word_embeddings(
      full_text,
      aggregation = &quot;sum&quot;,
      embeddings = textdata::embedding_glove27b(dimensions = 200)
    ) |&gt;
    step_zv(all_numeric_predictors()) |&gt;
    step_normalize(all_numeric_predictors())
  
  return(rec)
  
}


multiclass_recipe_builder &lt;- function(outcome = &quot;cohesion&quot;) {
  rec &lt;- recipe(formula(glue::glue(&quot;{ outcome } ~ .&quot;)),
                data = classification_train_df) |&gt;
    step_textfeature(full_text,
                     keep_original_cols = TRUE) |&gt;
    step_rename_at(starts_with(&quot;textfeature_&quot;),
                   fn = ~ gsub(&quot;textfeature_full_text_&quot;, &quot;&quot;, .)) %&gt;%
    step_tokenize(full_text) %&gt;%
    step_lda(full_text,
             lda_models = lda_model,
             keep_original_cols = TRUE) %&gt;%
    step_word_embeddings(
      full_text,
      aggregation = &quot;sum&quot;,
      embeddings = textdata::embedding_glove27b(dimensions = 200)
    ) |&gt;
    step_zv(all_numeric_predictors()) |&gt;
    step_normalize(all_numeric_predictors())
  
  return(rec)
  
}

plot_preds &lt;- function(dat, outcome){

dat |&gt; 
  ggplot(aes(x = {{outcome}}, y = .pred)) +
  geom_point(alpha = 0.15) +
  geom_abline(color = &quot;red&quot;) +
  coord_obs_pred() 

}</code></pre>
<p>As mentioned above, the model specification is <code>xgboost</code>
for regression to predict a continuous outcome that resembles ordinal
classes.</p>
<pre class="r"><code>xgb_spec &lt;-
  boost_tree(
    mtry = 50,  # 75L
    trees = 1000L,
    tree_depth = 9, # 6L
    learn_rate = 0.01,  # originally 0.1
    min_n = 39L,  # 20L
    loss_reduction = 0
  ) |&gt; 
  set_engine(&#39;xgboost&#39;) |&gt; 
  set_mode(&#39;regression&#39;)

svm_spec &lt;- svm_linear() |&gt; 
  set_engine(&quot;LiblineaR&quot;) |&gt; 
  set_mode(&quot;classification&quot;)  </code></pre>
<p>To speed the computations let’s enable a parallel backend.</p>
<pre class="r"><code>all_cores &lt;- parallelly::availableCores(omit = 1)
all_cores</code></pre>
<pre><code>system 
    11 </code></pre>
<pre class="r"><code>#  
future::plan(&quot;multisession&quot;, workers = all_cores) # on Windows</code></pre>
</div>
<div id="modeling-1" class="section level2 tabset">
<h2 class="tabset">Modeling</h2>
<div id="cohesion" class="section level3">
<h3>Cohesion</h3>
<p>We fit for <code>cohesion</code> first using an xgboost regression,
using case weights to adjust for the frequency of occurrence of each
value of <code>cohesion</code>.</p>
<pre class="r"><code>outcome &lt;- outcomes[1]

regression_train_df &lt;- train_essays_raw  |&gt; 
                select(!!outcome, full_text) |&gt; 
                case_weight_builder(outcome)

regression_wf &lt;- workflow(recipe_builder(outcome = outcome), xgb_spec) |&gt; 
       add_case_weights(case_wts)

folds &lt;- vfold_cv(regression_train_df, strata = {{outcome}})

set.seed(42)  
rs &lt;- fit_resamples(
  regression_wf,
  folds,
  control = control_resamples(save_pred = TRUE))</code></pre>
<pre><code>as(&lt;dgTMatrix&gt;, &quot;dgCMatrix&quot;) is deprecated since Matrix 1.5-0; do as(., &quot;CsparseMatrix&quot;) instead</code></pre>
<pre class="r"><code>collect_metrics(rs) |&gt; arrange(mean)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[".metric"],"name":[1],"type":["chr"],"align":["left"]},{"label":[".estimator"],"name":[2],"type":["chr"],"align":["left"]},{"label":["mean"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["n"],"name":[4],"type":["int"],"align":["right"]},{"label":["std_err"],"name":[5],"type":["dbl"],"align":["right"]},{"label":[".config"],"name":[6],"type":["chr"],"align":["left"]}],"data":[{"1":"rsq","2":"standard","3":"0.2877895","4":"10","5":"0.014599797","6":"Preprocessor1_Model1"},{"1":"rmse","2":"standard","3":"0.5597895","4":"10","5":"0.005157338","6":"Preprocessor1_Model1"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<pre class="r"><code>collect_predictions(rs) |&gt; 
  plot_preds(.data[[outcome]]) +
  labs(y = &quot;Predicted&quot;,
       title = paste0(outcome, &quot; predictions against essays in held out folds&quot;),
       subtitle = &quot;The highest and lowest essays are not predicted well&quot;)</code></pre>
<p><img src="figure/EnglishLanguageLearning.Rmd/fit%20cohesion%20resamples%20regression-1.png" width="672" style="display: block; margin: auto;" /></p>
<pre class="r"><code>train_essays_raw[

collect_predictions(rs) |&gt; 
  mutate(residual = .data[[outcome]] - .pred) |&gt; 
  arrange(desc(abs(residual))) |&gt; 
  slice_head(n = 5) |&gt; 
  pull(.row)

, ] |&gt; 
  select(full_text)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["full_text"],"name":[1],"type":["chr"],"align":["left"]}],"data":[{"1":"One topic that is frequently debated is if people should make their own decisions or seek guidance about life's important matters. People think that they should make their own decisions. They feel that it makes them learn from their mistakes and become mentally strong. I believe that people should seek guidance from experts because they know more about life's important matters, some people don't know how to make the right decisions , and they may help them with valuable lessons.\\n\\nExperts may know more about life's important matters than most people. They might've learned from experience or studied others, a class of sociology. They know if something is wrong with the person, if they had a bad day, and if they had sleep.\\n\\nSome individuals don't really know how to make the correct choices, they often try to make the worst choices work but that will never happen. They're afraid on what the good choices bring, if it brings good or if it brings worse.\\n\\nAs you have read, it is strongly recommended that people should seek advice from experts, because we will not let others make bad decisions unless they are good ones."},{"1":"Many people are kind and do parts in helping others , what they don't know is , the act of kindness either received from or given to someone has a big impact no matter how small or big . Reasons an act of kindness can really benefit someone are , the person might have a better day just because of your kindness , the person might learn from your act of kindness and lastly , a good act of kindness can come back to you from the person who you helped .\\n\\nThe first reason of how kindness can impact a person is , the person whom you helped might have had a bad day or , you never know what someone is going through , they could have a hard life and are hiding it . The person who received the act of kindness might have bad a bad day or life , your kindness could have made that person feel so much better and worthy. Some people don't often receive kindness , you might have put a big smile on their face or , made their day much better . You can be seen as a person with good characters and manners , people can always depend on you if you are a kind person and do a lot to help make someone feel better with words or actions everyday , most people would appreciate you if you did almost anything to help them or make them smile because again , you never know what someone is going through . For example , I partnered up with a girl in our math class , she was crying for some reason and nobody wanted to be her partner , when I told her if she can be my partner , she said yes and sounded really happy when I said . I , of course told her what was wrong , she told me she was going through a lot at home and nobody wanted to be her friend in school , I was devastated to hear that . I told her she can be my friend and for the rest of the day she smiled and laughed .\\n\\nThe second reason any act of kindness , big or small , can impact a person is , the person receiving the kindness can learn from you and make themselves a better character too , you can influence a person with how you act , if you act kind and generous and , make good choices , someone is gonna learn from your words and actions . Same with if your a person who is just rude and makes bad decisions , someone else , will learn from your actions . Many people tend to learn from people in their environment , especially young people , so if a young person sees you offering a kind act of helping to either them or someone else , they can learn from your actions and see you as a big role model , people should always make good decisions for many reasons one being that young people can benefit from your choices and will always look up to you for being the person to guide them through life , many people make bad decisions around children but if you do an act of kindness , to them or someone else , young kids will automatically learn from you . For example , one day me and my little sister were in the park , playing with our friends , we saw an old lady all of a sudden drop her apples , I immediately went to the side walk and helped the lady , I picked up the apples and put them in a safe and clean bag . The old lady thanked me and told me , \"you're well mannered , thank you for your help , I appreciate it , may god bless you\" , I smiled and said \"your very welcome\" . The next day as I was going to the bus stop , to pick my little sister up from school , my little sister ran to me and said \"I sat next to this new girl in our school who was being bullied . I even shared my lunch with her because, she did not have much food at home to bring to school \" . I was delighted to hear her story , I told her why she did that , she responded \"when I saw you helping the old lady yesterday , I realized how nice you were and how happy the lady was , I decided to do something similar \" .\\n\\nThe third reason of how an act of kindness can benefit someone in many ways is , the good act of kindness can come back to you . For example , one day , a girl in our class came late to school , we were in our social studies class , she came and sat down and asked people if she could copy the notes , all of my classmates shouted \"NO\" .\\n\\nI went up to her and gave her my notes . She was happy and said thank you , when she finished copying my notes , I went to my seat . About a week later , we were having a contest in our school , whoever won would receive a prize . I sadly did not have any knowledge of the topic for the contest . The next day , I partnered up with the girl who copied my notes , I told her about how I wanted to win the contest . She looked happy and told me she knew all about the topic , she said she could help me and I replied with , \"I would appreciate it so much \" . I went to her house after school and taught me all about the animal , we needed to have certain knowledge of the animal to do the contest in our school . The next day , I did the project and the next day ,I winned .I thanked the girl .\\n\\nIn conclusion , any act of kindness can benefit a person , you might make them smile , make them learn , or , the act will come back to you."},{"1":"Yes i am agrey life's is important and people who value self-reliance define it as the need for each individual to Follow his or her own ideas, the have experinse aboute life is good way to get a bettar life, and everyday there try To be a besst person for won life thare chaling his/her self that people working hart,stady hart they wnat a good life In the futchar.\\n\\nSome people's take essy own life like relaxe there not try anyway there needit, they are not wary about own life They are not save meony thay are not wary if somting expansef just the want buy it.\\n\\nSo many people's follow a faumos perons life thare raed thare books or some of them make vidoes and people Wacting the know somting more aboute life, i like that people they be a good perosn, try to get a good life in the futchar.\\n\\nEevar life is impart to me or for others people any wnat a good life respacat anyone heple anyone for anyway the can helpe people, .\\n\\nsome people wnat a bat person, that persons life is nothiong, like thery kile person, or they are sell somting, Alot of yonge kids not going to the school they are ideas school not important that kids going to the worge way there wnat moeny just moeny, that people not wary for tommaro what happen on life one day they go to the jale for wohel life. they know we are going so wrong at this part they can't noting in the world so many ting living animal, person anythig try a good person .\\n\\nSmart people follow a faumos person life they want batter life for whole life,and that people red the books and They know somting more aboute life, some of tame resching aboute life before thare start somting taking with that Perons his expersns for that job or anything alos, they are dowing a hart work to make a more many and save many For the futchar, with hart workig the grow up his or her stady in the futchar geting what they wnat do be, and wnat Take ideas for life what thare tining what happen if a i am lost what happen if i am lost all my mony, thare thiking Everthig which is they want to lost his or her life, and they are chaling his or her self for the batter life.\\n\\nEvery life is important to me , everyone wnat do somtiong or helpe some one or be a good thing for other people in the world some of people jobs is Dctor and helpe sick people or if some one very sick helpe them to gave back his or her life anyone can helpe some needs helpe and gave backe his or her life, we are coming on this word for one times do somting in the futchar prowd of we are self rescpakt anyone and no one wants one day do it somting get your self sad, some of cuntury is war alot of people dia and in the war, but the others cunturys is not war, and meybey for one day four or morethin four kids coming a life, life for some one is Nice but others is not is very short very short."},{"1":"High school is like a preschool for young adults, where they get a chance to explore the world much earlier.\\n\\nStudents at grade nine through twelve get to learn what they want to be at a young age. It gets them more interested in the careers they choose in the nearest future. As they get through high school, they will know what path to take and what needs to get done. As soon as these young adults leave they won't have to stress of what their going to be. It's agreeable for students to start looking into their career at a young age.\\n\\nThrough out the years in High school, students will have the rights to choose their own courses, which follows up to their interest. For example: culinary arts, design multi media, masonry, and more. They can also choose any subjects such as: math, English, science, and history. These courses can also help those students with their future careers. While these students are learning they realize what they like and what they don't like. The upcoming goal for them by the time they leave high school is what they are going to become.\\n\\nAs these young adults think of what their going to be, they will think twice on some careers. Which gives them time to research options, and that research will reflect on which career is the best for them. While being young an thinking of a career students will have enough time to sort the ones the students like and the ones they dislike. The average life Span of a human is up to 75 years, which means 18 of those years can resolve of what the students are going to do when they grow up. Teen's can dream what they could be but can they put the effort in trying.\\n\\nAs in college, students will have to get credits to graduate high school, and need to pass a amount of exams.\\n\\nFrom there the students path will flow to what college they'll go, when thinking young they got to think smart, which means they got to put the effort. When thinking of a career at a young age the students will have most of everything planned. Its never too much to notice that a student has more potential young than old because they got more time.\\n\\nThe students won't stress out because their not out in the world alone finding what to do.\\n\\nTeens can commit to any career because they have had a whole lot of time to think of any career.\\n\\nIts never bad for a kid to have dreams of being a cop and going for that career. Its always good to plan ahead, to always think and do. It's great that a young adult wants to think of it's future. Agreeing something that everybody has done, is something that people can agree on."},{"1":"The Primer Minister Winston Churrchill once said that \"success consists of going from failure to failure without loss of enthusiasm.\" And the question is about angree or desag.\\n\\nMy opinion is desagree because the Primer Minister wiston not is try to motivate to onther person to do again. First,reason when something person loss manytime something and feel what if continue does again can obtain something good in the future. Because never said end. Second, reason the failure plays inthe life a paper strong in the life of every person in the world. But when any person not try more time that one is clear that is going to failure and never feel what is obtain something good in the futured. The decition every person have nothing can said what try againt. The decition is of your selft. My position is what if I whole my life said not and not continue consist in something never can obtain something.\\n\\nWhen have the oportunity of obtain something and gain something never say I failure least when have a enthusiasm of obtain. Never person have the right to says you never can't do. forever cave you personas negatives and thoght negative in the life. But every pesona have the right to attain something. For example: I have goals in my life what is gradution and have my diploma and can continue in the college. For can gain this gold and my dream i have enthusiasn and an person positive. Also if I have failure in my gold I have of up and againt.\\n\\nForm not failure has try more of one times. The reasons are clear if an have enthusiasm for something I loss the possible to go back to againt. I also think what the Prime Minister Winstor Churchill loss something for what the that try todo is what the person not continue there are and losss your enthusiasm for something what hill obtain. There are many success about failure but the failure arrive when the problem don't have solution. Becasuse also have the right to fight for obtain the solocion to the failure.\\n\\nWhen us arrive to the failure have the right of to do again but other form. Sometime the life us play's different suitation what think that not obtain solution but many pesons said what there are form all have solution lest when an dead. These is other example when one person dead and before to dead have failure many time in yours objetives an don't know say there are fight for obtain the solution.\\n\\nThe life arrow as the world an never have the solution in the hand to all problems butnot signific what noy have solution. Never there are said not can't. The final of failure forever have solution. Is as when an company is goint to bankarrot. They try to share solution form the failure. For there nevere said that no can't share solution to the every failure.\\n\\nMy conclusion is that never lost the energy for figth for the solution. Forever cave sometihing what have hopeful in your self. No lost yor hope eve search the solution to the failure."}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<pre class="r"><code>regression_fit &lt;- parsnip::fit(regression_wf, 
                     regression_train_df)</code></pre>
<p>Identifying examples with especially poor performance can help us
follow up and investigate why these specific predictions are poor.
Conceptually, its easy for a baseline know-nothing model to assign all
essays to the median score of 3. The predictive power is in the ability
to model the essays that are not 3 into buckets higher and lower than
3.</p>
<p>Because the ratings are a form of ordinal value, or even a likert
scale, we will ensemble a second classification model that includes the
output of the regression.</p>
<pre class="r"><code>classification_train_df &lt;- train_essays_raw  |&gt; 
                select({{outcome}}, full_text) |&gt; 
                bind_cols(
                  predict(
                    regression_fit,
                    regression_train_df
                  )
                ) |&gt; 
               rename(regression_pred = .pred) |&gt; 
               mutate({{outcome}} := factor(.data[[outcome]]))

classification_wf &lt;- workflow(multiclass_recipe_builder(outcome = outcome), svm_spec) 

folds &lt;- vfold_cv(classification_train_df, strata = !!outcome)

set.seed(42)  
rs &lt;- fit_resamples(
  classification_wf,
  folds,
  metrics = metric_set(kap, accuracy),
  control = control_resamples(save_pred = TRUE))

collect_metrics(rs) |&gt; arrange(mean)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[".metric"],"name":[1],"type":["chr"],"align":["left"]},{"label":[".estimator"],"name":[2],"type":["chr"],"align":["left"]},{"label":["mean"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["n"],"name":[4],"type":["int"],"align":["right"]},{"label":["std_err"],"name":[5],"type":["dbl"],"align":["right"]},{"label":[".config"],"name":[6],"type":["chr"],"align":["left"]}],"data":[{"1":"kap","2":"multiclass","3":"0.2997429","4":"10","5":"0.01059322","6":"Preprocessor1_Model1"},{"1":"accuracy","2":"multiclass","3":"0.4471794","4":"10","5":"0.00866259","6":"Preprocessor1_Model1"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<pre class="r"><code>collect_predictions(rs) |&gt; 
  ggplot(aes(x = .data[[outcome]], y = abs(as.numeric(.data[[outcome]]) - as.numeric(.pred_class))/2)) +
  geom_violin() +
  scale_y_continuous(breaks = seq(-5,5,0.5)) +
  labs(y = &quot;Residuals&quot;,
       title = &quot;{{outcome}} Residual errors for essays in held out folds&quot;,
       subtitle = &quot;The highest and lowest essays are still not predicted well&quot;)</code></pre>
<p><img src="figure/EnglishLanguageLearning.Rmd/fit%20cohesion%20resamples%20classification-1.png" width="672" style="display: block; margin: auto;" /></p>
<pre class="r"><code>train_essays_raw[

collect_predictions(rs) |&gt; 
  mutate(residual = as.numeric(.data[[outcome]]) - as.numeric(.pred_class)) |&gt; 
  arrange(desc(abs(residual))) |&gt; 
  slice_head(n = 5) |&gt; 
  pull(.row)

, ] |&gt; 
  select(full_text, {{outcome}})</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["full_text"],"name":[1],"type":["chr"],"align":["left"]},{"label":["cohesion"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"Scientist Albert Einstein once said, \"Imagination is more important than knowledge.\" I agree with what Albert Einstein said. Some people think its the other way around were knowledge is more important than imagination. imagination and knowledge could be used for a lot of things. I think that imagination is more powerful than knowledge because you can come up with many things and in order to get knowledge on something you need imagination.\\n\\nImagination is something you need to come up with things. You need to think about it first, get the things you need to create it, and then study from it. Imagination can help you a lot, You can use your imagination to your advantage, you can use it keep you busy. you can build things, draw things,and create things from your imagination. you can do many more things with your imagination. Imagination has no limits.\\n\\nIn order to get knowledge of something, you would need to use your imagination. You would need to take notes and study from it. you use your imagination to get knowledge. You can learn so much from your imagination and its very useful. we have to be careful with our imagination and our knowledge. Its ok to make mistakes while learning, you just have to learn from them.\\n\\nIn conclusion I think imagination is more important. We use out imagination every day. We learn things every day. It would be hard without imagination. Imagination can be used for a lot of things like making a cartoon show, drawing, and thinking. You can also use you imagination while you read. We wouldnt know much because we get our knowledge from our imagination.","2":"3.5"},{"1":"Although some people say that classes such of art, music, and drama should be electives because you let students think on themselves, actually some say that students must be required to take drama, art, and music classes because regarding to this classes students can earn a lot of experience in this area and in a short future they will be contributing to the culture of the nation.\\n\\nOften people comment about the classes that students are taking on school. They are agree that art, music, and drama should be electives because you let students think on themselves. As every person in this country we must let them take part of their own decisions. Let me remain you, when you were young there is a bunch of classes that you didn't like to take, you complaint a lot. It's the same with this classes. Students must decide what they want to do in order of their own benefit. Many students don't even care about those class and their grades look affected because schools required them to take those classes.\\n\\nPeople suggest that students must be required to take drama, art, and music classes because regarding to this classes students can earn a lot of experience in this area. For instance we are in at school!. we are connected to other schools we can make events and build good relations between students in order to let them gain experience. as soccer, basketball, baseball, and football also we can create competitions to motivate them. the kingdom university during 3 years asked to 100000 people \" How do they feel about competitions\"\\n\\nand the 90% of people said, competitions motivate you, is not matter what kind of competitions the human nature always wants to win. In other to this some schools are more likely to invest money on those areas.\\n\\nCulture is a good reason why students should be required to take art, music, and dramas classes. When we talk about culture we have to do mention that it does a huge contribution in the society. for example Tourism, some research showed that the 70% of people who travel to another countries just to know how their culture works. like in years before the music had been changing. The United States of America have long history in music like Jazz, Rock, Heavy Metal and so on. That's why music classes should be required for students to maintain the culture of music in our country. When we talk about art everyone has heard about the famous Leonardo da Vinci and his picture of the Mona Lisa. Outside there is good amount of artist who became famous because they impressed the world with fantastic pictures. drama, our world is a age where we use the social media for many reasons and social media need authors. Example Hollywood every year produce movies. All those authors have a really good home, cars, and many facilities to live. That's why students must be required to take drama classes because many of them can have the opportunity to enjoy a life like this.\\n\\nSome say classes as art, music and drama should be electives for students because the own decision is important but classes such art, music and drama must be required because it give the students the opportunity to gain experience in those areas and contribute to the culture of our society and nation.","2":"2.5"},{"1":"Hello Ms or Mr teacher,\\n\\nI'm writing this for convince you to don't work in groups ,and here are my cons and pros about working alone or in groups. The benefits of working with a group, or working alone are complete differents because some people feel more comfortables working alone than working in groups. In my oppinion working alone is much better than working in groups. In some cases your teammates of you group don't participates in the work or they don't want to work in groups. I feel more comfortable working alone for many reasons.\\n\\nFirst reason , I can do whatever I want to do in the work or do the work in my way, but in some cases the person who work alone doesn't know how to do the work in this case is good to work in group because maybe your teammates knows the answers of the work.\\n\\nSecond, If I work alone I have more chances to unertand the work by my self without distractions. Because in some cases your teammates of your groups are distract you or other teammates of the group.\\n\\nThird, working alone can be more benefict than working in groups because you can learn more things about the work, and do it in the way you like the work, without worry about what your group is doing. If we work alone we will have the opportunite of learn more about the work.\\n\\nI know working in groups are the easy way because maybe your teammates of you groups knows the answers of the work, and you dont have to worry about the work because you know your teammates will do the work for you . But in some cases people who don't participate in the work gets credits in the work what he or she doesn't participates it. And that isn't fair for you or your teammates who did the work.\\n\\nThat's why you should sonsiderate us to do not work in groups anymore.","2":"3.5"},{"1":"My thoughts on this are that it is good time and this should actually occur for many reasons first of all during the weekdays young people have school everyday only if it is a holiday or if sick. By implying this more young people will get out of the streets so late at night there is no need to be out so late at night in the first place. Second of all, at 10 p. m is a great time to be home during the weekdays it will keep you out of trouble and there will be less chances of young people dying to other criminals at night. Late at night is where most of all crimes occur and now the chances of this will be lower. Third of all , as their are so many people that sell drugs and if young people have to be home so early the chance of them getting into all types of drugs will be so much lower.\\n\\nIf this does become a law the times are also very appropriate Monday through Friday until 10 p. m and then Saturday through Sunday until 12 p. m no one needs to be on the streets later then this time that is being given. If they are their out so late there should be a extreme reason as to why they would be \"breaking the law\". This will most likely keep young people out of more troubles then they all ready are. This time is not unfair it is a very generous time to be home. This really should not be interfering with any ones life you can still go out but not be out for so late at night. I would understand if this law was also for people over the age of 18 because young adults like to party. But this law should actually be for people under the age of 18 that would make more sense and being a \"adult\"(over the age of 18) they know what is right from wrong,what they should be doing, and what they should not be doing.\\n\\nThis law is not to harm anyone but it would to improve the community curfews to keep teenagers out of trouble I can very much agree with that. But those young teenagers are not doing the right thing then no matter what law that is added nothing will change the fact of how they act(keep them out of trouble). Going back to the time it is not like this law will be implying that the young people do not hang out with their friends this is just so more people can stay safe from all the trouble that is the streets. A lot of innocent people die every year by being so late at night and in the streets where some of the bad people come out. They have all after school to be doing after school activities this will not keep anyone from doing what they want. It is just a way to keep young people out of trouble there should be excuses to all of this like going to a party but there as well should be a limit to all of this. The consequence if they break the law should start of as a warning and then just be adding on to that.\\n\\nMy position on this curfew law is also that I would understand why people do not want this to happen but at the same time teenagers do know what they should be doing and what they should not be doing. I have two different view points why they should be worried and why they should not be worried. I know that people like to have sleep overs and would this be included or do they have to specifically in their house on can they be sleeping at someone else . Back into my other view if they go to a party lets say over the weekend where the curfew is at 12 p. m because it is on a Saturday and they come back at 1 p. m or later .They are not keeping track of time and lose the time. They are having fun with all of their friends and then they get caught because someone calls the police. Then the police comes and now they have to face the law and all that. Now what is next that being on their record just because they stayed out longer then they had and were on the streets. This would honestly suck and then going home and getting in trouble by your parent because of a mistake you made. After all this wanting to go to a very good college and they not accepting them just because they made a mistake for staying to late at the party. This would be a down side because if anyone breaks the law that will go on there record and not come out of there permit sadly this is a consequence that can happen and would suck. A college not accepting them because they \" broke the law\" not fun at all because colleges do look at everything anyone does before getting accepted and being a very good student with a high GPA and hearing this would not be good they will be carrying that guilt for their whole life by not getting into the college that they want to get into.\\n\\nOn the other note right now there is not a curfew to what time teenagers should be home yet but there is a curfew to when who ever has their permit for driving. So that is also a big restriction no young teenager is out in their car at a late time the only time you can actually see them is when they are getting out of school. There are pros and cons to this \"law\" but I think there are mostly pros then cons everything is very much reasonable and understanding. The only down/con that I can personally thin of right now is that they get caught and that going in their record does not sound good at all. But overall there are a lot of pros to this and this law should be seriously implied to all of the United States not only to one city but to all of them. This will keep more people safe yes pf course there is always that one person who wants to break the law as a joke or something that really should not be anything to play around with or anything but something that all young people listen to it take it serious.\\n\\nIn conclusion this law or curfew will stop all of these thieves from stealing young girls or boys and then selling them as well as to stop rape from happening so much because sometime it is very hard to detected people because of how dark it is. But this will most likely lower the chance of all these negative things to happen so frequently to anyone. It will also keep young people out of lots of trouble by being so late at night less danger.","2":"3.0"},{"1":"Wonderful, amazing, and brilliant that's what imagination is. I totally agree that imagination is more important than knowledge. You can used imagination at all time, when you're reading a book, playing or watching your favorite sport, and when your thinking of a place you would like to visit for vacation. You can do a lot of things by only using your imagination.\\n\\nHow can you use imagination when you are reading a book. It depends on what kind of book you love and enjoy to read. I'll give you an example, I like to read adventure books. When I'm reading this type of books I love to imagine how happy would I be if I was that type of person doing that type of adventure. Imagination is an awesome tool to use when you are reading a book. If you love reading this type of books use your imagination, use it to enjoy what you are reading.\\n\\nDo you have a favorite sport, or a favorite player. Imagine you were a soccer player, a basketball player, or any type of player. Imagine how wonderful and amazing would that be. If I was a famous soccer player I would be Lionel Messy. When I'm watching soccer I start to imagine that I'm Messy and that I'm the one who is scoring all those goals. You can imagine a lot of things, you can imagine you being a scientist, artist, and a actor.\\n\\nThinking of a place to visit for vacation. If you have a lot of stress take a break and sit down in your couch and imagine your dream vacation.\\n\\nLet's say you want your dream vacation in Hawaii. Imagine you are surfing on those big waves, sky diving, and learning how Hawaiian people dance. Also you can learned about the culture and generation about Hawaii.\\n\\nImagination is a great thing to have in life. Imagine your adventures when you're reading a book, imagine your favorite player being you, and imagine your dream vacation in any place around the whole world. It doesn't matter how old or young you are, keep using your imagination, if imagination keeps you happy than used it. The only thing you need to worry about is your happiness and the happiness of those who you love the most. Keep imagine all the great things you love to imagine.","2":"3.0"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<pre class="r"><code>collect_predictions(rs) |&gt; 
  rmse(truth = as.numeric(.data[[outcome]])/2, estimate = as.numeric(.pred_class)/2)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[".metric"],"name":[1],"type":["chr"],"align":["left"]},{"label":[".estimator"],"name":[2],"type":["chr"],"align":["left"]},{"label":[".estimate"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"rmse","2":"standard","3":"0.4669463"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Results here aren’t great, but they are more are less competitive
with the leaderboard figures.</p>
<p>The final fitting ensembles both the regression and classification
fits, and makes a prediction on the submission essays.</p>
<pre class="r"><code>classification_fit &lt;- parsnip::fit(classification_wf,
                                   classification_train_df)

extract_fit_engine(regression_fit) |&gt; 
  vip::vip(num_features = 20)</code></pre>
<p><img src="figure/EnglishLanguageLearning.Rmd/fit%20cohesion%20final-1.png" width="672" style="display: block; margin: auto;" /></p>
<pre class="r"><code>submission &lt;- predict(
  classification_fit,
  
  submit_essays_raw |&gt;
    bind_cols(predict(regression_fit, submit_essays_raw)) |&gt;
    rename(regression_pred = .pred)
) |&gt;
  transmute({{outcome}} := .pred_class)</code></pre>
<pre><code>Warning in get_dtm(corp): dtm has 0 rows. Empty iterator?

Warning in get_dtm(corp): dtm has 0 rows. Empty iterator?</code></pre>
<pre class="r"><code>submission</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["cohesion"],"name":[1],"type":["fct"],"align":["left"]}],"data":[{"1":"3"},{"1":"3"},{"1":"3"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div id="syntax" class="section level3">
<h3>Syntax</h3>
<p>We fit for <code>syntax</code> first using an xgboost regression,
using case weights to adjust for the frequency of occurrence of each
value of <code>syntax</code>.</p>
<pre class="r"><code>outcome &lt;- outcomes[2]

regression_train_df &lt;- train_essays_raw  |&gt; 
                select(!!outcome, full_text) |&gt; 
                case_weight_builder(outcome)

regression_wf &lt;- workflow(recipe_builder(outcome = outcome), xgb_spec) |&gt; 
       add_case_weights(case_wts)

folds &lt;- vfold_cv(regression_train_df, strata = {{outcome}})

set.seed(42)  
rs &lt;- fit_resamples(
  regression_wf,
  folds,
  control = control_resamples(save_pred = TRUE))

collect_metrics(rs) |&gt; arrange(mean)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[".metric"],"name":[1],"type":["chr"],"align":["left"]},{"label":[".estimator"],"name":[2],"type":["chr"],"align":["left"]},{"label":["mean"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["n"],"name":[4],"type":["int"],"align":["right"]},{"label":["std_err"],"name":[5],"type":["dbl"],"align":["right"]},{"label":[".config"],"name":[6],"type":["chr"],"align":["left"]}],"data":[{"1":"rsq","2":"standard","3":"0.2858673","4":"10","5":"0.008866931","6":"Preprocessor1_Model1"},{"1":"rmse","2":"standard","3":"0.5450673","4":"10","5":"0.004717446","6":"Preprocessor1_Model1"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<pre class="r"><code>collect_predictions(rs) |&gt; 
  plot_preds(.data[[outcome]]) +
  labs(y = &quot;Predicted&quot;,
       title = paste0(outcome, &quot; predictions against essays in held out folds&quot;),
       subtitle = &quot;The highest and lowest essays are not predicted well&quot;)</code></pre>
<p><img src="figure/EnglishLanguageLearning.Rmd/fit%20syntax%20resamples%20regression-1.png" width="672" style="display: block; margin: auto;" /></p>
<pre class="r"><code>train_essays_raw[

collect_predictions(rs) |&gt; 
  mutate(residual = .data[[outcome]] - .pred) |&gt; 
  arrange(desc(abs(residual))) |&gt; 
  slice_head(n = 5) |&gt; 
  pull(.row)

, ] |&gt; 
  select(full_text)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["full_text"],"name":[1],"type":["chr"],"align":["left"]}],"data":[{"1":"By the time students enter high school, I believe that they should have an idea of what type of career they would like to pursue after they graduate. For some students, committing to a specific career at young age sometimes is a good idea as long as you have a backup idea for a different career in case you decide that you do not want to pursue in that career anymore, thats why committing to a career at a young age is only sometimes a good idea because you'll never come up with another career if you keep changing your mind. The courses that you study in high school should be thought about as well because maybe you need a specific degree from a course in order to pursue in that career.\\n\\nI believe that, if a student is going to commit to a career that they should be very passionate about this career, they should be at least a junior in high school so that they've had time to get a feel of the other careers and decide which one they enjoy and suits them the best, and they should keep in mind the requirements that are needed, the benefits, and the types of jobs that it offers to them. Students who commit to a career at a young age are usually athletes, or they plan on working in their family business.\\n\\nPursuing your career needs a lot of hard work in school especially in this generation because you're going to need to go to a good college so you need a good GPA because you're going to want to go to the college that has a good academic program for the career that you plan on pursuing. Therefore, you need to go to college, and work hard so you can get a good job because most jobs, don't hire anyone without a college degree.\\n\\nFinally, thats what I think about choosing the right career for yourself, and committing to a career at a young age. although some may still believe differently and disagree with my view on this issue."},{"1":"Dear principal,\\n\\nI have heard of the school cafeteria's plan to change to a new healthier school lunch. And as a junior in this school,I take the position that this new dynamic idea to change the school's lunch menu is a bad idea. So I have decided to share my thoughts for the development of this school and with our health. I believe that keeping our school's lunch menu is a good idea. I know that my opponents would argue with me regardlessly,because they would probably assume that our students have been eating the same food for too long and would definetely want to have a different versions of food,and get to explore their school lunch like other schools usually do. But when they detect my reasons,they would know for sure that the school's lunch is way better than they think it is.\\n\\nMy initial reason for not agreeing to this change is that it would eradicate some student's favorite cafeteria foods, especially me,There are a lots of food currently in the cafeteria that are so good, clean and healthy.\\n\\nthey are also enough food for everyone to eat, so changing the menu wouldn't be necessary, it would be a waste of time and money. the school has got a bunch of stuff to focuse on. American's have this quote that \" if you have lemons make lemonades\" meaning we should make the best out of what we have by embracing it not changing it.\\n\\nIn additon, the current school's lunch menu is technically healthy, I have this extraordinary thoughts in my mind because I haven't seen any student that has protested against the school's lunch, this means that the current school lunch is unique on it's own way. Also the school lunch is potentially some of the amazing healthy American foods.\\n\\nAgain,Most American foods are junky and cause students to gain weight chronically and gradually. But our current food consists of fruits,vegetables and also green salad which prevents the body from gaining too much weight and sustain the normal body weight. I have been eating our school's green salad for a while and l have seen some fantastic changes in my body and it is very impressive. So principal, dont you think that changing our school's cafeteria's lunch menu is a bad idea?\\n\\nFor instance, our school cafeteria's lunch has got protein,Vitamin D and my weight is intact, as far as our health is concerned, so take all of these reasons into consideration and figure out your final answer,I hope that you make the right choice for the school and l know that the school's improvement is your priority.\\n\\nThank you respectively,\\n\\nGeneric_Name 11th grade( junior)"},{"1":"Have you ever thought of a place in the world you would like to visit? Some people would go to France to see the popular Eiffel Tower; while others would go to Hawaii just to relax. For me however, I would like to visit Generic_City because the people there are well mannered and kind. And also because there are amazing waterfalls and parks.\\n\\nTo begin with, the people there are well mannered and kind because they treat each other like brothers and sisters instead of mortal enemies. And something I would like to do once I arrive, is to greet these grateful and thankful people because they are gentle to one another. Furthermore, most of the people in Dubai make a honest living and there is rarely any crimes caused by residents.\\n\\nAdditionally, there are amazing waterfalls and parks because the designs and structures are well made and created. For instance, when visiting the waterfalls at night, it is very colorful which makes it beautiful to watch. Also, something I would like to do when I arrive, is to go on a boat ride because it is very peaceful and it make you feel calm as the ride goes along.\\n\\nIn conclusion, a place in the world I would like to visit is Generic_City because the people there are well disciplined and nice. And Also because there are outstanding waterfalls and parks."},{"1":"If you could visit one place in the world where would it be? One place that I would like to visit is Pakistan. Here are some reasons why I would like to visit this place. First, it is known for it's parks. Secondly, the food is amazing. Lastly, Pakistan is one of the nicest culture. As you can see, Pakistan is an excellent place to visit.\\n\\nPakistan is known for some of it's best amusement parks. One place I would go to is Aladdin park. It's an amusement park with a lot of thrilling rides. I could go on the chair lifts. They are so awesome. Another place I would go to is Sea view. It's a beach. There I could go on horse and camel rides. The rides are exhilarating. About three or four people can ride the camel at the same time. They take you all the way to the water than back to where you started. Another place I would go to is Safari Park. It is an amusement park /zoo. There is a section for animals. You can go on a safari ride to see them. One of the best part about the ride is that you get to go to the elephants cage. There you can pet the elephant, you can even feed it, and you can go inside the cage if you want to go close to it. As you can see, Pakistan has variety of places to go so you won't get bored.\\n\\nFood. It's the most important thing..right? When I wake in the morning after an awesome night. I will be hungry. So I start my day first by going to the local breakfast shop. There I will order eggs with some round hot parathas, and than some hot piping chai. Then when it's lunch time I will go to a fast food restaurant. There I will order a chicken burger with yummy fires and soda. When night comes around it will be time for dinner. For dinner I will go to a local restaurant. There I will order steaming hot Chicken Korma with buttery naan and Mango lassi. For desert I will have hot gulabgamun. They are like little doughnut balls covered with sugar syrup, and are very soft. As you can see, Pakistani cuisine is very delicious.\\n\\nThe people are very nice in\\n\\nPakistan. Wherever you go you would see people helping out each other. They are very welcoming and kind. They treat each other like they all are equal. They laugh, talk, and they just have fun. They don't disrespect each other, they take care of each other, and are very grateful. They are very protective towards each other. They're like a community and support one another. As you can see, Pakistani culture/people are the best.\\n\\nIn conclusion, I would say that Pakistan is awesome. So get your plane ticket right now and come to Pakistan. It is one of the best country you could visit."},{"1":"Given students a long summer opportunities would give them the chance to take a restful break from all the ethic school year they have being having.\\n\\nMost students enjoy summer break vacation. but some educators feel that the summer is too long because students has a long summer vacation would take the time to review their school year and go to summer school for makeup class while others are planing to spend time with their families . Though others are thinking that students should have a year round school where there would be a three to four weeks in the summer and a longer winter break but meanwhile a week off in spring and fall break because during snow days the students would have no school and they would get to go to school while it really cold outside. I think it not a great idea because Most students thinks the long summer is a great opportunity for them to participate in some various positive activities and for them to sets a standard goal for themselves.\\n\\nMost students should get a long summer break because they have to take their time and review their work and go to summer school for a make up class that would help them to get credits back or graduates the coming years. Imagine have in a break during the summer, would any students have the chances of making up class work during the winter? or would they even think about the ideas of doing a class makeup?. I think no because they would be giving an excuse about the snowy weather and the real cold weather and schools would be canceling which would affects the process of curriculum on what the class are learning. for example during the winter when we sometimes gets a snowy weather we cancel schools and that one day that school get cancel it affects most teachers planing on what they should do for that day. For instance the school would have to take a week off of that summer break so that the teacher would have time to complete what he or she has to teach the students. Therefor students needs a longer summer break to succeed on their goal.\\n\\nMeanwhile other students need a long summer breaks to spend a long time with their families because they has already spend a long school learn especially the once that had honors class also the students who are in college. Most students who spends some quality time with their family might have a better chance of setting up a goal for the next school year by all means because they are getting a better advice from their family, for example I had a understanding that students who spent the most time with their family discussing their school year would get motivated and has a goal for themselves before the new school year, meanwhile in the winter break, you wont have that much time to spend with your family, because most of your family who live far across would most likely not want to come visit because of the winter. For example when during the winter most of my family who lives abroad or out of states would never come to visit us during the winter break because they said it winter and it really cold, while in the summer each and everyone of our family would come to visit because we spend some quality time together and they always give me some good advice on how to be successful on my education and what goal I should set to gain my success.\\n\\nFinally though other are thinking that students should have a year round school where there would be a three to four weeks in the summer and a longer winter break but meanwhile a week off in spring and fall break because during snow days the students would have no school and they would get to go to school while it really cold outside. With this opinion, I think am little bit agree because during the winter the snowy weather kind of disrupt everything or activities that was supposed to happened during the school year. Meanwhile another hands the students does not have to missed a week or weeks to school but a day or two. Therefor they should get a long summer break even tho they would gets a week or two off, for instance I believe if they get a a day or two there would be no chances for them to forgets everything they learned during the time school opens to the beginning of winter. for example if they miss one or two days they would have a day to revised their notes and maybe be prepare for a coming test or quiz in the future, never the ;less they wont have to study for too long for a test or quizzes again.\\n\\nIn conclusion\\n\\nMost students enjoy summer break vacation. but some educators feel that the summer is too long because students has a long summer vacation would take the time to review their school year and go to summer school for makeup class while others are planing to spend time with their families .\\n\\nbecause Most students thinks the long summer is a great opportunity for them to participate in some various positive activities and for them to sets a standard goal for themselves. Though others are thinking that students should have a year round school where there would be a three to four weeks in the summer and a longer winter break but meanwhile a week off in spring and fall break because during snow days the students would have no school and they would get to go to school while it really cold outside. And I believe that students should always have the opportunity to have a long break especially a long summer break."}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<pre class="r"><code>regression_fit &lt;- parsnip::fit(regression_wf, 
                     regression_train_df)</code></pre>
<p>Identifying examples with especially poor performance can help us
follow up and investigate why these specific predictions are poor.
Conceptually, its easy for a baseline know-nothing model to assign all
essays to the median score of 3. The predictive power is in the ability
to model the essays that are not 3 into buckets higher and lower than
3.</p>
<p>Because the ratings are a form of ordinal value, or even a likert
scale, we will ensemble a second classification model that includes the
output of the regression.</p>
<pre class="r"><code>classification_train_df &lt;- train_essays_raw  |&gt; 
                select({{outcome}}, full_text) |&gt; 
                bind_cols(
                  predict(
                    regression_fit,
                    regression_train_df
                  )
                ) |&gt; 
               rename(regression_pred = .pred) |&gt; 
               mutate({{outcome}} := factor(.data[[outcome]]))

classification_wf &lt;- workflow(multiclass_recipe_builder(outcome = outcome), svm_spec) 

folds &lt;- vfold_cv(classification_train_df, strata = !!outcome)

set.seed(42)  
rs &lt;- fit_resamples(
  classification_wf,
  folds,
  metrics = metric_set(kap, accuracy),
  control = control_resamples(save_pred = TRUE))

collect_metrics(rs) |&gt; arrange(mean)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[".metric"],"name":[1],"type":["chr"],"align":["left"]},{"label":[".estimator"],"name":[2],"type":["chr"],"align":["left"]},{"label":["mean"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["n"],"name":[4],"type":["int"],"align":["right"]},{"label":["std_err"],"name":[5],"type":["dbl"],"align":["right"]},{"label":[".config"],"name":[6],"type":["chr"],"align":["left"]}],"data":[{"1":"kap","2":"multiclass","3":"0.3013748","4":"10","5":"0.009780809","6":"Preprocessor1_Model1"},{"1":"accuracy","2":"multiclass","3":"0.4587266","4":"10","5":"0.007885640","6":"Preprocessor1_Model1"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<pre class="r"><code>collect_predictions(rs) |&gt; 
  ggplot(aes(x = .data[[outcome]], y = abs(as.numeric(.data[[outcome]]) - as.numeric(.pred_class))/2)) +
  geom_violin() +
  scale_y_continuous(breaks = seq(-5,5,0.5)) +
  labs(y = &quot;Residuals&quot;,
       title = &quot;{{outcome}} Residual errors for essays in held out folds&quot;,
       subtitle = &quot;The highest and lowest essays are still not predicted well&quot;)</code></pre>
<p><img src="figure/EnglishLanguageLearning.Rmd/fit%20syntax%20resamples%20classification-1.png" width="672" style="display: block; margin: auto;" /></p>
<pre class="r"><code>train_essays_raw[

collect_predictions(rs) |&gt; 
  mutate(residual = as.numeric(.data[[outcome]]) - as.numeric(.pred_class)) |&gt; 
  arrange(desc(abs(residual))) |&gt; 
  slice_head(n = 5) |&gt; 
  pull(.row)

, ] |&gt; 
  select(full_text, {{outcome}})</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["full_text"],"name":[1],"type":["chr"],"align":["left"]},{"label":["syntax"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"FIRST, I CHOOSE TOHAVE THE LONGER SPRING BREAKS.SECOND ,THE STUDENT CAN TRAVEL TO VISIT THEIR FAMILY.THIRD, ENJOYA THE BEACH FOR TIME THAT STUDENTS WANTS.DOESN'T HAVE WORRY ABOUT GOING BACK TO SCHOOL.\\n\\nFIRST I CHOSE THAT STUDENTS SHOULD HAVE LONGER BREAK BECAUSE THE STUDENT NEED TO FUN FOR THE BREAK . II CHOSE THAT STUDENT HAVE THE LONGER SUMMER BREAK BECAUSE THE IS MY FAVORITE BREAK IN MY ALL FAMILY STAY HOME OR SOMETIME WE ARE TRAVEL SOME ANOTHER COUNTRY .\\n\\nTHE MOST OF THE STUDENT TRAVEL FOR ANOTHER PLACE .THE SOME STUDENTS CAN TRAVEL TO VISIT THEIR FAMILY BECAUSE THERE FAMILY WAS A DIFFERNT COUNTRY OR DIFFERENT PLACE .WE ARE VISIT HOME BECAUSE WE ARE ENJOYA THEIR FAMILY.WE ARE TRAVEL THE THE FUN PLACE BECAUSE MY FAMILY WAS A LOVE THERE .\\n\\nWE ARE TRAVEL THE BEACH WE ARE ENJOY THE BEACH FOR MY FAMILY OR MY FRIENDS BECAUSE MY FRIEND AND WE ARE PLAY THE SAND WE HAVE THE FUN .MY ALL FAMILY WAS GOING THERE WE HAVE FUN. I CHOSE TONOT HAVE LONGER SPRING BREAK BECAUSE WON'T CATCH COLD .MORE DIFFICULT FOR STUDENTS OF THE CANSANTRATE .I CHOSE THE BOTH SIDE BECAUSE THERE WAS A NOT HAVE LONGER SUMMER BECAUSE WE CAN CATCH COLD MOVE DIFICULT FOR THE CONSANTRATE FOR THE STUDENTS .WE ARE TAKING THE LONG BREAKBECAUSE WE ARE FORGET THE EVERYTHINGS . I THINKS ALL STUDENT ENJOYA THE SUMMER BREAK BECAUSE THE SUMMER BREAK WAS THE FUN FOR THE STUDENTS.\\n\\nMOST OF THE STUDENTS TAKE THE LONG BREAK BECAUSE TNE STUDENTS MOVE THE DIFFERENT PLACE .SUMMER BREAK TAKE THE 1WEAK FOR STUDENTS .THERE WAS THE DIFFERENTS KINDS OF THE SEASON BECAUES MOST PEOPLE LOVE SUMMER OR WINTER AND SPRINGS.SOME PEOPLE LOVE THE SUMMER OR SOME PEOPLE LOVE THE WINTER OR PEOPLE THE SPRINGS. THE SUMMER BREAKS OR WINTER SOMST OF THE PEOPLE ENJOY WINTER .THIS SPRING BREAK I WAS A TRAVEL TO MY COUNTRY BECAUSE I'M VISIT TO MY FRIENDS .I LOVE TO VISIT MY FRENSD .I THINK I AM MOVING DIFFERENT PLACE FOR THREE DAY THIS PLACE WAS A BEAUTIFUL.THER WAS DIFFERENT KINDS OF FLOWER OR DIFFERENT KINDS OF THE COLORS OR DIFFERENT FROOT OR DIFFERENT DRESS\\n\\nDIFFERENT KINDS OF FESTIBLE.MOST STUDENTS LOVE TAKE 4,4 WEAK BREAKS THE SCHOOLS .","2":"2.0"},{"1":"I`m agree whit the individuality. I like when the people take whatever they wants for yours life is so cool. I have too much friend and they do the think another peoples do. I mean i like do what i`m said and what i like i don`t now.\\n\\nMy family is so negative when they said sometime and i don`t like because i want said sometime but they no want lisent. so i`m individuality because i want lisent to me and do the think i want.\\n\\nI know to much people dependt of other and that`s no good.\\n\\nThe history class said too much about that because in the past the people are not indiviuality.\\n\\nI think the people want more attention that why depent of other people.\\n\\nThe life now is to diferent of after because now the people yos depent the what said other person about who i`m look or what he said about me an all theese think.\\n\\nI like who i am cause i`m a nice and all good thinks so i do whathever i wnat because i ike who is the people and i dont care what they said about me.\\n\\nYo ya nose que escribir solo sigo por que pues no se me gusta y si supiera un poco mas de ingles no pararia de escribir.\\n\\nso les voy a contar sobre mi vida ya que no tengo ni la menor idea de lo que tengo que escribir ni nada.\\n\\ncomienzo llegue de Puerto Rico hace 2 anos y desde que llegue aqui mi vida cambio del todo.\\n\\ncomenze a valorar cada cosa que obtengo por que ahora se el valor y el sarificio de la vida para cualquier cosa.\\n\\nsolo se que apesar de todo sigo queriendo superarme y mejorar muchas cosas de mi.\\n\\nno se me hace tan facil pues el idioma y las costumbres no son para nada igules.\\n\\nPero aqui sigo y seguire por que creo en mi y se que cada dia que me propongo algo lo cumplo.\\n\\nNo es nada facil cuando llegas y conoces personas de otros lugares algunas muy buenas y otras no tanto.\\n\\nMe agrada demasiado aprender cosas nuevas y nuevos lugares solo hay una cosa que me enoja y es que apesar de no ser una persona indocumentada y pues nosotros los puertorriquenos somo parte de estados unidos y solo por el hecho de que nuestro primer idioma sea en espanol muchas personas nos tratan como indocumentados.\\n\\nllevo 2 anos los cuales no an sido nada facil ya que la escuela a sido uno de mis mayores obstaculos pues es bastante complicado entrar a un salon y sentir que estas completamente solo.\\n\\npues por el hecho de no poder preguntar o comunicarte con alguien no nada solo te quedas hay viendo como todos pueden y tu no.\\n\\nUnos meses despues de que llegue de Puerto Rico comenze a salirme de la escuela y hacer las cosas mal ya que no tenia apollo de nadie alli ni en mi casa.\\n\\nHoy en dia siento que no debo estar aqui por que solo siento que no es mi lugar la unica razon por la que aqui estoy es por mi mama por que quiero que se supere y poder darle todo lo que merece.\\n\\nya que cuando la necesitamos hay estuvo apesar de como era la vida en puerto rico siempre trato de darnos lo mejor.","2":"2.5"},{"1":"The greats benefits to work with a group\\n\\nTo work on groups is better for many reasons,everybody can help each others,in groups student's can do a better work,and it can help all the people on the group to learn more skills,it can help students to know each others and be friends, more communications, more ideas and sometimes it can be helpful to work in groups because some students don't know what to do,i thing teachers should let student's to work more on groups so like that they would help each other and work better,and is good to work with a group because that can help you for the rest of your life like on your job also with your family and you con do better and a great job if you work in group\\n\\nIt can be helpful for students to work in group,First, because with more people helping are more and betters ideas and more helpful for every students,and sometimes student's don't know what to do,but if somebody on the group help so he would understand and know how to do a great job and work with a group is much helpful than work alone on many ways like to understand better with communication with your group and it can be helpful so you can do a good work and pass the class and not failed,and work in group it can help you to know others people that are in the same classroom but you never have the oportunity to talk wich their so in the teacher make a group and you can joing to one there is going to be new people and you can know others people\\n\\n,Second,it is good for student's to work in groups because they can learn more skills such like the communication and they can help each others with the written,and also they can help each others how the way they talk. The communication is important and many cases because with communication you can do many things, like if you don't understand something you can tell somebody for help and all the persons on the groups can practice all days to do a great work,and also some student's need a lot of help so students that know more can join to the groups to help the others,but sometimes is not because some students don't know how to do the work sometimes it because they don't understand sometimes is because the language is a problems for some student's so there is good to make groups to help them,Third it can be an experience to work in groups because some students that don't know each others later on they can be friends and work in groups it can be helpful to students,but also to school because work on groups students can understand more and they can get betters grades also work in groups and a a good relationship it can be helpful not only at the school it can be helpful like in your home with the family and not to get in trouble with their, but also it can help you on your job to work well and not to have problems with the people that you work with,is like on soccer that why it call a soccer team because they help each others they share new or more strategies that it can help others to do a great job because work in groups students have more and betters benefits to do a great job,Finally is good to have a good communication in groups because with a great communication all the the group can understand each others and is important to have a good relationship in the group so like that they can do a better job and some students help others and that is great to be generous with others because if you help to someone that need help other people is going to help you on what you need and is a lot much better to work in group than alone sometimes when you are working alone and you got stuck in something no body is going to help you,but if you are working with more people in group they going to help you on what you need but most of the teachers want's to students work alone sometimes is good that students work alone because sometimes students got distracted for the people on the group and the teachers don't wants students to copy each others sometimes is good to work alone maybe better concentration,but sometimes is not that good to work alone because sometimes you got stuck in somethig, but if you are working with a group they are going to help you i would like to see more teachers that put more student's to work in group i don't think student's would like to work alone than with a group is better an sometimes is more easy and faster\\n\\nIn conclusion, is a great idea for me thats teachers make students to work in groups on my opinion is much helpful to they work in groups instead to work alone,because when people work in groups they have betters ideas and they can do a better work with more interesting and more opinions is better to do a great job and also have a great relationship and a great communication is so important to work in a group and some students know more than others so the students thats know more is good that they help the others on what they need and is good to work in group so like that you can know others people i hope teachers continuing making groups to students can learn more than what they know and work in group it can help you on your life because if you got a job and many people work there too but you don't like to work with others people as a group the boss is going to kick you out only because you don't know how to work as a group and if you only like to work alone it can be a problem if you don't understand work with others people is better always more ideas,opinions like that you can do a better work and it can help your future job and the rest of your life sometimes some student's don't like to work in group's sometimes it because they don't know others people,but i thing if teachers would like to student's work more in groups i thing they would like it and they can have more communication student's would like to work with a group, I like to work with a group because sometimes i don't know what to do so others students help me to do a great work and we all share other.","2":"2.5"},{"1":"When learning at school with other students who cause distractions it is always hard to focus would you be able to focus? Even though going to school makes you socialize with friends and they feed you it sometimes is hard for a student to show up to school or even learn.\\n\\nFor me I would rather work on my assignments and others things my teacher would like me to do at home reason why is that some students would not be able to focus especially when a student is causing lots of noise making it hard for you to focus on your assignment. Another reason is that some students could live far from the school making it hard to get to school everyday. Finally students could have more time to work and study making it easy for students to revise in a quite place at home.\\n\\nStudents could limit distractions in many ways at home one way is that they can put on headphones to relax and work hard and listen to some music. Some teachers hate when students have their phone out or when they are listening to music so begin at home may cause the student to focus more by listening to music because every student has a different way of studying and one student might be more focus if he or she loves listening to music when working or studying. This also makes the student more relived that he or she can listen to music. Students who are always trying to bust a joke or make a noise causes problems for a student who is trying to work to get her grade up this makes it very hard for a student to focus on what their are supposed to do. Students can benefit from listening to music because for me when I listen to music while I am working I feel great and energetic making it easy for me to knockout my work at a fast rate.\\n\\nSome students could live far away from the school and may not have a reliable ride to take them to school everyday. Some students can't catch the bus because the bus is too far away from their house this makes going to school very difficult because without a reliable ride to school everyday you may be coming to school very late making it hard for you to study or work on assignments because you are worried about how you will get home because you do not have a reliable ride to school to home. This makes a student stress a lot thats why working at home you would not be worried about who would be taking to and back from school. It also makes the student more productive because they would not have to find a ride all the time they could study and get their work done faster than other people. Also coming to school late makes it very hard to understand what was taught in the classroom making a student very stressed over it because a student grade might go down because he or she failed the test cause they came late to school so that student might not have understood what was taught.\\n\\nFinally students could have more time to study and work on their assignments sometimes teachers may go through the assignment very quickly making it hard for a student to understand the what he or she or supposed to do. Also teachers may not give as much time for students to finish assignment working at home makes it easier because you have as much time as needed for you to complete your assignment and also for a student to revise over their work before turning it in to the teacher students may not be able to turn in assignments on time depending on the assignment this makes a student very stressful because they do not want to turn in the assignment late and get a late grade for it. Sometimes students worry about things like this especially when a student grade is flunking and they need to get it up to graduate or move on to the next grade level.\\n\\nAlthough going to school could very exciting for a student or very happy to see friends your happiest place is home and if you could a student could work from home that would change the way a student studies and complete assignment because they have time on their hands and also the are relaxed they would not have to sit in a class for over 55 minutes. Working at home could be very beneficial because It could be very difficult for another student to learn at school because they might be that one student who is making it hard for a student trying to focus or a student might be stressed because they might not have a ride to and back from school and worried that they might not enough time to finish their assignment and get it turned in on time. Working at home may not stress a student because they would have enough time to complete an assignment. This is why working on assignments at home would benefit a student.","2":"3.5"},{"1":"It is true that keeping teenagers out of trouble is important for many reasons. If regulations that require teenagers to be off the streets after 10 pm are adopted then they will help teenagers academically, socially, medically and economically.\\n\\nThe first reasons that proves that these curfews will help teenagers and keep them out of trouble is that if teenagers are not allowed to be on the streets in the middle of the night , then they will get more sleep and will learn more efficiently when they are school. For example, if a teenager is not allowed to be on the street during the middle of the night, then that individual will get a good night of sleep and will be able to stay awake during classes. Also, if this regulations are are adopted, then they will require teenagers to stay at home longer, which will help them because they will have more time to work on their homework and if they do their homework then they will improve their grades. Furthermore, these curfews will help teenagers improve their learning skills and will also help them rest more and get their grades up.\\n\\nThe second reason that shows why these curfews must be adopted is the one that will allow teenagers to socialize better. For example, if teenagers are in the streets in the middle of the night, then people will not want to be close to them because they might think that they are bad people and that they are probably involved in gangs, so they will be scared of them. Many people will agree that it is better if teenagers stay at their houses during night hours because if they stay at their homes doing good things, then they will make more friend, socialize and communicate better with people because no one will be afraid of them and no one will think that they are involved in some criminal group. So, if teenagers keep themselves out of the street during the night, then they will be able to make friends, communicate better and basically socialize in a better way in which no one will try to avoid them.\\n\\nThe third reason that proves that these curfews must be adopted is the medical reason. If teenagers are in the streets during the night, then they have the possibility of getting in fight and ending up with injuries. For example if a teenager is out during late night hours, then others might think that he or she is there because he's a bad person and then they might get into a fight in which someone could get hurt and end up in the hospital. These curfews will prevent teenagers from getting into fights and from having to go to the hospital when they can just stay at home and be safe.\\n\\nThe last reason that will keep teenagers out of trouble and will help them is the economic reason. For example, if a teenager wants to be out in the middle of the night, then that individual can find himself or herself a job that will allow him or her to work during night hours, keep him or her out of the streets and help him or her economically. Economically means that the person will be working, earning money and also staying out of his or her house during late night hours. Teenagers can improve themselves economically if they spend their time working instead of spending it in the street doing things that will not help them in anyway. Finally, by working and improving their economy teenagers will be able to save some money for their own future and have money available for emergencies that can occur throughout their lives.\\n\\nFurthermore, it is better that these curfews are adopted for the security of teenagers. Also because these regulations will help teens improve themselves economically by keeping them out of the streets and motivating them to find a job if they want to be out of their house during late night hours, they will also help them socially because people will not be avoiding them if they are not seen in the street, medically because they will prevent them from getting into fights and having to go to the hospital and finally academically because teenagers will not be wasting time on the streets and they will have more time to do their homework and improve their grades at school.","2":"3.5"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<pre class="r"><code>collect_predictions(rs) |&gt; 
  rmse(truth = as.numeric(.data[[outcome]])/2, estimate = as.numeric(.pred_class)/2)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[".metric"],"name":[1],"type":["chr"],"align":["left"]},{"label":[".estimator"],"name":[2],"type":["chr"],"align":["left"]},{"label":[".estimate"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"rmse","2":"standard","3":"0.463856"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Results here aren’t great, but they are more are less competitive
with the leaderboard figures.</p>
<p>The final fitting ensembles both the regression and classification
fits, and makes a prediction on the submission essays.</p>
<pre class="r"><code>classification_fit &lt;- parsnip::fit(classification_wf,
                                   classification_train_df)

extract_fit_engine(regression_fit) |&gt; 
  vip::vip(num_features = 20)</code></pre>
<p><img src="figure/EnglishLanguageLearning.Rmd/fit%20syntax%20final-1.png" width="672" style="display: block; margin: auto;" /></p>
<pre class="r"><code>submission &lt;- predict(
  classification_fit,
  
  submit_essays_raw |&gt;
    bind_cols(predict(regression_fit, submit_essays_raw)) |&gt;
    rename(regression_pred = .pred)
) |&gt;
  transmute({{outcome}} := .pred_class) |&gt;
  bind_cols(submission)</code></pre>
<pre><code>Warning in get_dtm(corp): dtm has 0 rows. Empty iterator?

Warning in get_dtm(corp): dtm has 0 rows. Empty iterator?</code></pre>
<pre class="r"><code>submission</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["syntax"],"name":[1],"type":["fct"],"align":["left"]},{"label":["cohesion"],"name":[2],"type":["fct"],"align":["left"]}],"data":[{"1":"3.5","2":"3"},{"1":"3","2":"3"},{"1":"3","2":"3"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div id="vocabulary" class="section level3">
<h3>Vocabulary</h3>
<p>We fit for <code>vocabulary</code> first using an xgboost regression,
using case weights to adjust for the frequency of occurrence of each
value of <code>vocabulary</code>.</p>
<pre class="r"><code>outcome &lt;- outcomes[3]

regression_train_df &lt;- train_essays_raw  |&gt; 
                select(!!outcome, full_text) |&gt; 
                case_weight_builder(outcome)

regression_wf &lt;- workflow(recipe_builder(outcome = outcome), xgb_spec) |&gt; 
       add_case_weights(case_wts)

folds &lt;- vfold_cv(regression_train_df, strata = {{outcome}})

set.seed(42)  
rs &lt;- fit_resamples(
  regression_wf,
  folds,
  control = control_resamples(save_pred = TRUE))

collect_metrics(rs) |&gt; arrange(mean)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[".metric"],"name":[1],"type":["chr"],"align":["left"]},{"label":[".estimator"],"name":[2],"type":["chr"],"align":["left"]},{"label":["mean"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["n"],"name":[4],"type":["int"],"align":["right"]},{"label":["std_err"],"name":[5],"type":["dbl"],"align":["right"]},{"label":[".config"],"name":[6],"type":["chr"],"align":["left"]}],"data":[{"1":"rsq","2":"standard","3":"0.3111923","4":"10","5":"0.019802228","6":"Preprocessor1_Model1"},{"1":"rmse","2":"standard","3":"0.4852447","4":"10","5":"0.007051223","6":"Preprocessor1_Model1"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<pre class="r"><code>collect_predictions(rs) |&gt; 
  plot_preds(.data[[outcome]]) +
  labs(y = &quot;Predicted&quot;,
       title = paste0(outcome, &quot; predictions against essays in held out folds&quot;),
       subtitle = &quot;The highest and lowest essays are not predicted well&quot;)</code></pre>
<p><img src="figure/EnglishLanguageLearning.Rmd/fit%20vocabulary%20resamples%20regression-1.png" width="672" style="display: block; margin: auto;" /></p>
<pre class="r"><code>train_essays_raw[

collect_predictions(rs) |&gt; 
  mutate(residual = .data[[outcome]] - .pred) |&gt; 
  arrange(desc(abs(residual))) |&gt; 
  slice_head(n = 5) |&gt; 
  pull(.row)

, ] |&gt; 
  select(full_text)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["full_text"],"name":[1],"type":["chr"],"align":["left"]}],"data":[{"1":"Click! click! click! This is the sound of my fingers typing against the keyboard. Today I will visit the local workplace because I will make computers more durable, advance technology, and better technology.\\n\\nHave you ever used a computer that is too slow? Today I will visit the local workplace to make these changes. First to start I will better technology by having less cookies, quick access to sites, have Internet everywhere, and make the computers portable and movable. Then I will make technology more advanced. To achieve this goal I will make computers have faster browsing, longer battery life, privacy, and have software protective systems.\\n\\nLastly to improve computers I will make durable laptops by using stronger materials, stronger computers, and reliable an efficient. I would like to visit this local workplace and company because I will like to make a profession in science and technology as well better the future for all people.\\n\\nIn conclusion I will improve the technology by making more durable computers, advance technology, and better technology. So, next time you think of exploring a profession make a trip to the nearest workplace and take a brief look about the job."},{"1":"some student offer distance learning as an option for student to attend classes from homr by wat of online pr video conferencing. i think student would benefit form being able to attend classesfrom home. you are authorized take the electronic version of this you will taking this promptsome student offer distance learning as an option for student to attend classes from homr by wat of online pr video conferencing. some student offer distance learning as an option for student to attend classes from homr by wat of online pr video conferencing. some student offer distance learning as an option.\\n\\nonline pr video conferencing. the right view the prompt and teh checklist for writers vvsome student offer distance learning as an option for student to attend classes from homr by wat of online pr video conferencing. some student offer distance learning as an option for student to attend classes from homr by wat of online pr video conferencing. some student offer distance learning as an option for student to attend classes from homr by wat of online pr video conferencing. some student offer distance learning as an option for student to attend classes from homr by wat of online pr video conferencing. some student offer distance learning as an option for student to attend classes from homr by wat of online pr video conferencing. some student offer distance learning as an option for student to attend classes from homr by wat of online pr video conferencing. some student offer distance learning as an option for student."},{"1":"The statement is \"the first impression is almost impossible to change\" which is a different feeling for everybody, but for me, I disagree. In fact, the first impression is really important and sometimes true, but I think the first impression does not define a person, an object or a situation. Having a first impression is a human reflex, like having an opinion or a judgment. We are doing it unconsciously.\\n\\nThe first impression is most of the time not real, you need to search deeper to make an opinion and when you really have an opinion, then, the first impression is not important anymore. For example, when you meet someone, your first impression might be that you think she is supercilious and even a little bit mean. Therefore when you really get to know her deeper then you will find that she just had a bad day and that she is nice and sociable. Sometimes it's the contrary, a person seems really nice but in reality she is not, so your first impression was wrong. It is not good to stay on a first impression because most of the time it's wrong.\\n\\nMoreover, the physic, behaviors or attitude can change an impression. If the person do not smile and seems to be rude but in reality is the nicest person, then it will be awkward for you because you thought she was bad. Sometimes a person can have a bad reputation because of the first impression he shows and it is not his fault, some persons just don't smile every time. Sometimes you can be disappointed because you didn't get to know the person because of your first impression.\\n\\nThe first impressions is not only for people but also for a situation or an object. For example if you are in a library and you want to buy a book, the first thing you are going to do is looking at the cover of the book. If it's pretty you will more easily choose this one instead of a book with a black cover and only the title, because it is your first impression. But your first impression is wrong because you didn't take time to read the resume and you will find soon that the pretty book is actually boring instead of the black book which is really interesting. An object can look nice but have a bad quality. The first impression is the color and the shape of the object, like the physic and the attitude of a person.\\n\\nIn conclusion I would say that the first impression is sometimes right but most of the time it's not. In my opinion, you must not keep in mind your first impression of a person, it's most of the time wrong. You have to get to know the person to build your own opinion. It is normal to have a first impression, like judging, but you must not take the habit to stick with your first impression."},{"1":"Yes i am agrey life's is important and people who value self-reliance define it as the need for each individual to Follow his or her own ideas, the have experinse aboute life is good way to get a bettar life, and everyday there try To be a besst person for won life thare chaling his/her self that people working hart,stady hart they wnat a good life In the futchar.\\n\\nSome people's take essy own life like relaxe there not try anyway there needit, they are not wary about own life They are not save meony thay are not wary if somting expansef just the want buy it.\\n\\nSo many people's follow a faumos perons life thare raed thare books or some of them make vidoes and people Wacting the know somting more aboute life, i like that people they be a good perosn, try to get a good life in the futchar.\\n\\nEevar life is impart to me or for others people any wnat a good life respacat anyone heple anyone for anyway the can helpe people, .\\n\\nsome people wnat a bat person, that persons life is nothiong, like thery kile person, or they are sell somting, Alot of yonge kids not going to the school they are ideas school not important that kids going to the worge way there wnat moeny just moeny, that people not wary for tommaro what happen on life one day they go to the jale for wohel life. they know we are going so wrong at this part they can't noting in the world so many ting living animal, person anythig try a good person .\\n\\nSmart people follow a faumos person life they want batter life for whole life,and that people red the books and They know somting more aboute life, some of tame resching aboute life before thare start somting taking with that Perons his expersns for that job or anything alos, they are dowing a hart work to make a more many and save many For the futchar, with hart workig the grow up his or her stady in the futchar geting what they wnat do be, and wnat Take ideas for life what thare tining what happen if a i am lost what happen if i am lost all my mony, thare thiking Everthig which is they want to lost his or her life, and they are chaling his or her self for the batter life.\\n\\nEvery life is important to me , everyone wnat do somtiong or helpe some one or be a good thing for other people in the world some of people jobs is Dctor and helpe sick people or if some one very sick helpe them to gave back his or her life anyone can helpe some needs helpe and gave backe his or her life, we are coming on this word for one times do somting in the futchar prowd of we are self rescpakt anyone and no one wants one day do it somting get your self sad, some of cuntury is war alot of people dia and in the war, but the others cunturys is not war, and meybey for one day four or morethin four kids coming a life, life for some one is Nice but others is not is very short very short."},{"1":"Technology has been one of the most facts popular during the 21st century. It is well-known for every ages around the world. However, the use of technology had have negative effects on people's lives. There are three reasons very clear about it.\\n\\nFirst, technology has a lot of wed-sites which attracted to most people. Therefore, when you walk in the park or wherever you go, you will see most people with their eyes into their phone, ipad, computers or another device. As a result, there are many road accidents or even some parents lose their children in the mall.\\n\\nSecond, students are not productive in their classes. They do not need to read a book, to find the information what they need because everything is in the internet. In other words, technology is more intelligent than our students.\\n\\nFinally, technology has ended up with our social life. Nobody what to talk with other person without use his phone. In adittion, the comunication between parents and children, can not be possible these days because they are very busy surfing on internet. They spend a lot time in their devices, when they are in the store, in the house, in the work, even in a date.\\n\\nHowever, some people think that technology is not bad at all because it help to save people. For example, in a hospital, doctors usually use technology to do X-ray, operations and to test different body part's. This help them to do more professional their work. Also, it help to do many work outside the country. For example, if the government in our country want to send information to an allied country, it will be easier by e-mail.\\n\\nIn conclusion, technology could cause death to people who do not know how use it. Also affects to the student's learning and limited the human contact. In other hand, It can be use for positive things, as along as we use it with responsability."}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<pre class="r"><code>regression_fit &lt;- parsnip::fit(regression_wf, 
                     regression_train_df)</code></pre>
<p>Identifying examples with especially poor performance can help us
follow up and investigate why these specific predictions are poor.
Conceptually, its easy for a baseline know-nothing model to assign all
essays to the median score of 3. The predictive power is in the ability
to model the essays that are not 3 into buckets higher and lower than
3.</p>
<p>Because the ratings are a form of ordinal value, or even a likert
scale, we will ensemble a second classification model that includes the
output of the regression.</p>
<pre class="r"><code>classification_train_df &lt;- train_essays_raw  |&gt; 
                select({{outcome}}, full_text) |&gt; 
                bind_cols(
                  predict(
                    regression_fit,
                    regression_train_df
                  )
                ) |&gt; 
               rename(regression_pred = .pred) |&gt; 
               mutate({{outcome}} := factor(.data[[outcome]]))

classification_wf &lt;- workflow(multiclass_recipe_builder(outcome = outcome), svm_spec) 

folds &lt;- vfold_cv(classification_train_df, strata = !!outcome)

set.seed(42)  
rs &lt;- fit_resamples(
  classification_wf,
  folds,
  metrics = metric_set(kap, accuracy),
  control = control_resamples(save_pred = TRUE))

collect_metrics(rs) |&gt; arrange(mean)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[".metric"],"name":[1],"type":["chr"],"align":["left"]},{"label":[".estimator"],"name":[2],"type":["chr"],"align":["left"]},{"label":["mean"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["n"],"name":[4],"type":["int"],"align":["right"]},{"label":["std_err"],"name":[5],"type":["dbl"],"align":["right"]},{"label":[".config"],"name":[6],"type":["chr"],"align":["left"]}],"data":[{"1":"kap","2":"multiclass","3":"0.3037628","4":"10","5":"0.008862818","6":"Preprocessor1_Model1"},{"1":"accuracy","2":"multiclass","3":"0.4975180","4":"10","5":"0.006734027","6":"Preprocessor1_Model1"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<pre class="r"><code>collect_predictions(rs) |&gt; 
  ggplot(aes(x = .data[[outcome]], y = abs(as.numeric(.data[[outcome]]) - as.numeric(.pred_class))/2)) +
  geom_violin() +
  scale_y_continuous(breaks = seq(-5,5,0.5)) +
  labs(y = &quot;Residuals&quot;,
       title = &quot;{{outcome}} Residual errors for essays in held out folds&quot;,
       subtitle = &quot;The highest and lowest essays are still not predicted well&quot;)</code></pre>
<p><img src="figure/EnglishLanguageLearning.Rmd/fit%20vocabulary%20resamples%20classification-1.png" width="672" style="display: block; margin: auto;" /></p>
<pre class="r"><code>train_essays_raw[

collect_predictions(rs) |&gt; 
  mutate(residual = as.numeric(.data[[outcome]]) - as.numeric(.pred_class)) |&gt; 
  arrange(desc(abs(residual))) |&gt; 
  slice_head(n = 5) |&gt; 
  pull(.row)

, ] |&gt; 
  select(full_text, {{outcome}})</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["full_text"],"name":[1],"type":["chr"],"align":["left"]},{"label":["vocabulary"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"I agree with Michelangelo's statement as I have found through experience that it benefits me more to set high expectations and not reach my goal, rather than settling on a low goal and achieving it. When setting high goals, I find that I learn more and progress my abilties further than I do with a lower goal. This is because setting high goals requires confidence, challenges, and pride.\\n\\nFirstly, hard work is required to achieve high goals, and requires confidence. Confidence involves having trust and believing that you are capable of accomplishing something. I have found that when I set high goals, I feel more confident in my abilities. With lower goals however, my confidence is lower as I settle for the easier path and do not trust myself to do better. With a higher aim, my confidence motivates me to not give up. I tend to try harder, and always believe in myself. For example, at school, I had to choose whether I wanted to try out for the varsity tennis team or remain in the club team. The varsity team was a higher reach, and required confidence in my abilities for me to try out. The club team was a lower reach, as I knew that I could simply continue with it. I decided to try out for the varsity team, and was confident in my abilities. I practiced hard and did not give up. Despite not making it onto the team, I found that I actually greatly improved my abilities through the confidence I had gained, and tried harder than I had ever before. I managed to progress my skills, and was able to play more confidently on the club team and excel. Therefore, setting high aims requires confidence, which is a very beneficial characteristic to have in life.\\n\\nSecondly, setting a high goal indicates a challenge. It will be more challenging to attempt to aim high rather than aiming low, yet this will also prove more benefits. With a challenge, I tend to be more motivated as I want to prove my capabilites. I try harder, and in return get further. Even if I fall short of my high aim, I tend to get further than I would have if I had settled with a lower aim. With lower goals, there is no challenge, and so once the aim is achieved any effort stops. Learning is limited to that low expectation, and will not be able to go beyond. For example, in my high school career, I have always struggled with picking between two types of courses: honors or academic. Honors is the more challenging course, which requires more work and effort and would pose as more of a challenge. Academic however, requires the bare minimum and is easy to succeed in. In the honors course, I would be setting my aim high yet might not get the grade I want; yet, in the academic course, my aim would be low and I would most likely get the grade I want. After hard consideration, I decided to opt for the honors course. This course may be a challenge, yet would allow me to learn more. I enjoyed the challenge, and found that it motivated me to try harder to try and accomplish my goal. Even if I fell short of my ideal grade, I was proud to have tried my best and felt that I learnt so much more. The course benefited me more than the academic course would have, despite not receiving the grade I hoped for. Therefore, challenging oneself with a high aim allows for more flourishing and encourages more learning. Overall, setting a high aim will pose more benefits.\\n\\nThirdly, pride accompanies setting high goals. When setting low aims, I feel that it is easy to achieve the goal. However, with high aims, it is more challenging to achieve the goal, and so I feel proud of myself for attempting it. Pride is a very important characteristic, as it increases self esteem. With a higher self-esteem, I tend to try harder and feel more powerful with my abilities. I am more likely to learn and improve upon my abilities, which overall allows me to succeed. For example, in high school I had the opportunity to write a poem and submit it into a writing competition. This was a high aim, as the goal was to win. I felt very proud of myself for taking the time to write and challenge myself with this competition, and ended up writing my favorite piece yet. I submitted my writing, and did not win. However, I felt very proud of myself for having tried so hard and was able to learn and flourish in my writing abilities. Now, I am more likely to sign up for competitions, even if I do not win, simply because I enjoy the challenge and feel that I am able to learn. I feel proud of myself for taking on these challenges. Therefore, setting high goals emmits pride, which can prove very beneficial in life.\\n\\nIn conclusion, I agree with Michelangelo's statement. Setting high aims and falling short can bring so many more positive effects than setting low aims and accomplishing them. This is because setting high aims requires confidence, challenges, and pride. These characteristics are very important in succeeding, and can encourage learning and progression in abilities. Through setting low goals, learning becomes stagnant. In order to flourish and continue learning, setting high goals is crucial, even when not achieving the goal.","2":"5.0"},{"1":"It's a good idea to have homework club at your school. Every school should have homework club at least three times a week. Homework club is a club where teachers help you with your homework or if you need help understanding a subject. Homework club helps students get to learn a little bit more about that subject, be more active with theirs friends, and it makes them have more confidence about their work. Homework club is a big help for students. There's so many stuff you can do at homework club and that is finishing a project with a friend, studying for a test/quiz, or even finishing your homework early.\\n\\nAt homework club you get so much help from the teachers. You can finish a project with a friend and when you do that it helps you be more active with that person. If a student ever has a doubt with a question about their project, then they can go to homework club and get some help with their project. The best part about homework club is that when more students come, we get to help each other with our projects. It's like a community were we help each other with any questions we have. Projects are really hard when you do it by yourself, but if you go to homework at your school then you will get all the help you need. If your having trouble then the best place to go is homework, so you can get some help.\\n\\nAnother thing you can get do at homework club is study for a test/quiz. The teachers will help you make flashcards, help you over the study guide, or even play a game of kahoot. If you didn't know what kahoot is, kahoot is a game where it helps you a lot before a test/quiz. I can say that kahoot is like a study guide but form into a game. Many students can't really study for a test/quiz when they are at home, because they can't concentrate studying when they are alone. So if you go to homework club they will help you study for your test/quiz and you will for sure not get distracted. I recommend everyone to come to homework club at least three times a week so you can get help studying for a test/quiz or if you need help with something else. If you go to homework club then you will pass your test/quiz, cause homework clubs will help you prepare yourself for your test/quiz\\n\\nThe last thing that homework clubs helps you is get your homework done early. the teachers will explain everything perfectly and I guarantee you will learn even more then what you learn in class. Math teachers, Science teachers, History teachers, and English teachers are going to teach students so much more. You can go to homework club and do your homework early so you don't have to worry about doing it at home. In homework club teachers explain the homework to the students but with more details. What I mean is that the teachers will teach you more about that subject.\\n\\nHomework club is one of the best club their is. It helps students learn more about the subject, it also makes them have more confidence, and it makes them be more active with your classmate at homework club. Homework club is a community full of amazing students and teachers. There's so many things teachers at homework club help you with and that is Helping you get your projects done in time, helping you study for a test/quiz, and helping you finish your homework early. We can achieve this goal of establishing homework clubs in schools, but we need help from student to make this goal happen. Homework club would be boring and not helpful if we didn't have some amazing teachers at school volunteering for homework club.","2":"4.0"},{"1":"There are people who believe that true self-esteem comes from praising the student's work and others believe that true self-esteem comes from achievement. There are situations where a student should feel that his real hard work is considered good by praising his work. There are some students that feel that their work was good, because of their achievements. There are some types of students:\\n\\nStudents that make themselves feel especial when their work is appreciated\\n\\nStudents that feel that their work was hard by achievements\\n\\nStudents that even if they do not try their best, want their work to be praised in order to learn\\n\\nStudents the feel themselves in a position to learn when they do not give their best effort and it is praised\\n\\nThere are many students that deserve their work to be praised to build self-esteem, because they have really tried their best in order to get their work done, but there are many students who do not deserve their work to be praised, especially if they have not tried their best on their work. Those students who try their best on their work, they deserve their work to be praised, so that they can notice that the real hard work that they have done is appreciated. It would make them keep their hard work.\\n\\nThere are some people that truly believe that true self-esteem comes from achievements. It makes a lot of sense, because achievements come from real hard work. If any student achieved what they wanted, it meas that they had worked hard for it. If people want to build true self-esteem through achievements it is a great idea that they have that on mind, because it would make them feel especial if they achieve it through hard work.\\n\\nThere are many circumstances where it depends on the type of people and situation where you want to build self-esteem. For instance, there are certain type of people that even if you praised their work will not keep it to build self-esteem. There are certain type of people that will. There are people that learn by achievements in order to build self-esteem.\\n\\nIn conclusion I think that true self-esteem comes from both, achievements and praising. There are people who build self-esteem trough the hard work that has been praised, but also achievements. There are many type of people that build self-esteem trough achievements, but also praising.","2":"3.5"},{"1":"why should peopel make their own decisions? Each person has the right to make his/her own decisions. Each person has different ideas about what is important and what makes them feel best. Some people believe by making their own decisions. Others peopel believe to making your own decisions you have to have guidance that's means is not helpful for those peopel who want guidance because when some one help you to make your decisions for that time you can, but that person it's not help you for ever, so you have to practice to make your own decision. I believe peopel have to make their own decisions, here is some decisions peopel can make, decision of marriage, moving place to place, and choiseing a bad and good thing in your life.\\n\\nFirst, some peopel think that making your own decisions is the best way to bo what ever you want in your life. Indeed, you can make your own decisions to do what ever you want. peoples make decision to married. Marriage is the most important thing for many peopel in this world. Having marriage is help you to have a better life. Because when you have wife you know you are taking big responsibilty for your self and for your family. Having family is good, but you have to work a lot to keep your family save. Having marriage is help you to make many kind of decisions. For exampel, if you are alcoholest you gonna make decision to quit alcohol because you have family.\\n\\nAs you can see, this is not the only thing making your own decision can do.\\n\\nAlso, making your own decisions helps you to move place to place. Some peopel the don't have confidence to make his/her decisions, because they don't believe by making their own decision. Moving place to place it's not really easy, because you have to have a plan which means decision before you start moving place to place, because you don't know what to do, so make your own decision to do what ever you want. Some peopel enjoy by moving place to place because moving place to place is help you to find a new things and to see how this world look like. As a person i really enjoy by traveing place to place because it's gonna help you to enjoy ,meet a new peopel, and new place it'a a lots fun. In addition, making your own decisions help you to have a confidence. However, making your own decision is definitly a best way to do what ever you want.\\n\\nFinally, making your own decisions is helps you to separate dad and good things in your life. In this world there is many kidn of problems is going come in your way. In this condition you have to know which one is good which one is bad which means you have to make your own decision to make your life esay. Some peopel they don't know what to do when something happen in their life. Every time you have to have a decision and choices for every sengle things in your life. This is a few decisions peopel can make it, we can make more than this decisions.\\n\\nIn short, making your own decisions is very helpful and best way to have esay and better life . Some peopel make decision of marriage. making decision for marriage is one of the bigest decision you can do in your life time. Also, making your own decision is the right peopel got by constitution and naturally. The others thing peopel can do is moving palce to place and decisions of know a good and bad things. Making you own decision is helps you, your family, and other peopel around you. This three different thigs peopel can do by making his/her own decision.","2":"3.0"},{"1":"Though most people think the inactivity serve a purpose however, the people always need to doing things in their lives. All the people need to have something to do in their life. Most people in the world think an inactivity person can have in effect to other people, so the people need to always do something in their life. The people need to have more activity in their life. A activity person can have many success things can change their life and the future a new generation in their families. A person with more activity can be more successful .The inactivity is a person lazy can do not care about doing something their life so, they may be do not care about other people too.\\n\\nMany people in the world does not have a job , but they do not look for it. The people feels lazy to move around looking for work and they only waste their time doing nothing. The people pass their time without a work so, they are not doing nothing for their future for that many people in the world are very poor. They can have a good future if they do not waste their times doing nothing. In many countries there are people who are very lazy for work, so they going to streets to ask other people give money to them. The people have many opportunities in their life but , they do not think about it. An inactivity person do not care about if they can have a job or not. That kind of people just think have a free times. To be a lazy person do not have any purpose in the life. Many children in the world suffer with their parents because, they do not have a job .The children with young age have to work because, their parents are very inactivity in the their jobs. The inactivity can have a effect in the children because they have to go to streets with parents ask for money to other person.\\n\\nMost people in world are very lazy. Some students have inactivity in the schools .The students when they have to do a work in group, they want to the easy part of the work for that some students have problem when they become adults. Most the students are very lazy so, they want all the things easy. When the students become in adults they think all are going to be easy for them like student years. Sometimes the work is next to them, but they are so lazy for doing any work, so they only avoid the work. The people want to waste their time in easy ways like spend time in home. Sometimes the people want to find a job with easy ways to do it for that many people do not have a job. The students need to be more activity person. To be a inactivity person in young age can have a big a effect in the future. The students need to have a purpose do not have to be inactivity person.\\n\\nIn the world many people are unemployment, so they think that can be better for them. The people can spend more time with their families,but they not need to be lazy. They need to doing something for their country or their families. Many people says if the world have less unemployment the economic can change for a good way. The economic is very important for a future of the countries. If the world can have less inactivity person the economic can change, so the countries can have less poor people.\\n\\nIn conclusion, to be an inactivity person does not have a purpose in life. The people need to always do somethings for their life. If the people always do somethings, that people can change the ways how can be their future life. An activity person always are doing things with a purpose, so the person can be successful in anythings they done. If the people are an inactivity person that mean they can not have any purpose, so the people never has to be an inactivity person. The people never need to act lazy around. Any people need to act like more a activity person so, they can be more succesful in life.","2":"3.0"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<pre class="r"><code>collect_predictions(rs) |&gt; 
  rmse(truth = as.numeric(.data[[outcome]])/2, estimate = as.numeric(.pred_class)/2)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[".metric"],"name":[1],"type":["chr"],"align":["left"]},{"label":[".estimator"],"name":[2],"type":["chr"],"align":["left"]},{"label":[".estimate"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"rmse","2":"standard","3":"0.4337318"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Results here aren’t great, but they are more are less competitive
with the leaderboard figures.</p>
<p>The final fitting ensembles both the regression and classification
fits, and makes a prediction on the submission essays.</p>
<pre class="r"><code>classification_fit &lt;- parsnip::fit(classification_wf,
                                   classification_train_df)

extract_fit_engine(regression_fit) |&gt; 
  vip::vip(num_features = 20)</code></pre>
<p><img src="figure/EnglishLanguageLearning.Rmd/fit%20vocuabulary%20final-1.png" width="672" style="display: block; margin: auto;" /></p>
<pre class="r"><code>submission &lt;- predict(
  classification_fit,
  
  submit_essays_raw |&gt;
    bind_cols(predict(regression_fit, submit_essays_raw)) |&gt;
    rename(regression_pred = .pred)
) |&gt;
  transmute({{outcome}} := .pred_class) |&gt;
  bind_cols(submission)</code></pre>
<pre><code>Warning in get_dtm(corp): dtm has 0 rows. Empty iterator?

Warning in get_dtm(corp): dtm has 0 rows. Empty iterator?</code></pre>
<pre class="r"><code>submission</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["vocabulary"],"name":[1],"type":["fct"],"align":["left"]},{"label":["syntax"],"name":[2],"type":["fct"],"align":["left"]},{"label":["cohesion"],"name":[3],"type":["fct"],"align":["left"]}],"data":[{"1":"2.5","2":"3.5","3":"3"},{"1":"3","2":"3","3":"3"},{"1":"3","2":"3","3":"3"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div id="phraseology" class="section level3">
<h3>Phraseology</h3>
<p>We fit for <code>phraseology</code> first using an xgboost
regression, using case weights to adjust for the frequency of occurrence
of each value of <code>phraseology</code>.</p>
<pre class="r"><code>outcome &lt;- outcomes[4]

regression_train_df &lt;- train_essays_raw  |&gt; 
                select(!!outcome, full_text) |&gt; 
                case_weight_builder(outcome)

regression_wf &lt;- workflow(recipe_builder(outcome = outcome), xgb_spec) |&gt; 
       add_case_weights(case_wts)

folds &lt;- vfold_cv(regression_train_df, strata = {{outcome}})

set.seed(42)  
rs &lt;- fit_resamples(
  regression_wf,
  folds,
  control = control_resamples(save_pred = TRUE))

collect_metrics(rs) |&gt; arrange(mean)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[".metric"],"name":[1],"type":["chr"],"align":["left"]},{"label":[".estimator"],"name":[2],"type":["chr"],"align":["left"]},{"label":["mean"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["n"],"name":[4],"type":["int"],"align":["right"]},{"label":["std_err"],"name":[5],"type":["dbl"],"align":["right"]},{"label":[".config"],"name":[6],"type":["chr"],"align":["left"]}],"data":[{"1":"rsq","2":"standard","3":"0.2740009","4":"10","5":"0.019305798","6":"Preprocessor1_Model1"},{"1":"rmse","2":"standard","3":"0.5594993","4":"10","5":"0.005682237","6":"Preprocessor1_Model1"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<pre class="r"><code>collect_predictions(rs) |&gt; 
  plot_preds(.data[[outcome]]) +
  labs(y = &quot;Predicted&quot;,
       title = paste0(outcome, &quot; predictions against essays in held out folds&quot;),
       subtitle = &quot;The highest and lowest essays are not predicted well&quot;)</code></pre>
<p><img src="figure/EnglishLanguageLearning.Rmd/fit%20phraseology%20resamples%20regression-1.png" width="672" style="display: block; margin: auto;" /></p>
<pre class="r"><code>train_essays_raw[

collect_predictions(rs) |&gt; 
  mutate(residual = .data[[outcome]] - .pred) |&gt; 
  arrange(desc(abs(residual))) |&gt; 
  slice_head(n = 5) |&gt; 
  pull(.row)

, ] |&gt; 
  select(full_text)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["full_text"],"name":[1],"type":["chr"],"align":["left"]}],"data":[{"1":"By the time students enter high school, I believe that they should have an idea of what type of career they would like to pursue after they graduate. For some students, committing to a specific career at young age sometimes is a good idea as long as you have a backup idea for a different career in case you decide that you do not want to pursue in that career anymore, thats why committing to a career at a young age is only sometimes a good idea because you'll never come up with another career if you keep changing your mind. The courses that you study in high school should be thought about as well because maybe you need a specific degree from a course in order to pursue in that career.\\n\\nI believe that, if a student is going to commit to a career that they should be very passionate about this career, they should be at least a junior in high school so that they've had time to get a feel of the other careers and decide which one they enjoy and suits them the best, and they should keep in mind the requirements that are needed, the benefits, and the types of jobs that it offers to them. Students who commit to a career at a young age are usually athletes, or they plan on working in their family business.\\n\\nPursuing your career needs a lot of hard work in school especially in this generation because you're going to need to go to a good college so you need a good GPA because you're going to want to go to the college that has a good academic program for the career that you plan on pursuing. Therefore, you need to go to college, and work hard so you can get a good job because most jobs, don't hire anyone without a college degree.\\n\\nFinally, thats what I think about choosing the right career for yourself, and committing to a career at a young age. although some may still believe differently and disagree with my view on this issue."},{"1":"I agree with Emerson's statement because people should be themselves no matter what. You want to always show the real you. That is the beuty of life,connecting with different types of people with different types of personalitys. People in this world now a days are cruel and mean that have no heart. People bully others because of theres clothes,shoes, and how they look. You can get bullied for anything now a days, its very sad. That's why people who get bullied hate themselves and want to become something they are not.\\n\\nI remember one point in my life, i was deppressed. I kept getting bullied because of how big my head was or how skinny i was. I know it sounds funny, i laugh all the time when i talk about it dont worry. I stopped wanting to come to school because of that. I never wanted to leave my house or talk to anyone. It was very sad. But one day one of my close friends asked me why i wasn't coming to school, and i told him everything. He told me straight up to ignore all the negative stuff that people call me and live your life to the fullest. Since that day, we have been bros for life. He always had my back and i always had his. A few weeks passed and i told my mother. We talked for a few hours about how i should ignore all the negative stuff because life is so short that you can't let anything stop you. That really changed me and how i see life.\\n\\nTrying to be yourself in this world is very difficult now a days. Just by telling someone that there shoes are ugly can really change the whole person. They start buying stuff that they don't really like. Also doing stuff they don't want to do. Suddenly they start doing bad stuff. Just to fit in with other people that have all the nice clothes and shoes etc. People really can't be themselves because of judgment.\\n\\nThere should be more help in this world so people that are going through this can get help. People should be motivated to be themselves and also love themselves. Some people can really say somethig mean and the victim could commite suicide, just because of someones judgment. People should start treating other people with respect. Parents should start teaching there kids early on how to show respect. People shouldn't care about someone elses opinion. People should live there lifes to the fullest.\\n\\nPeople should feel very accomplished to be themselves in this world. People really make you feel like trash when they say something negative about you. There is always going to be negative stuff coming at you, that's normal. That is what makes you stronger and turns you into a great human being. That is what should motivate you to do great things in life. That is what should make yourslef and everybody close to you proud. To be yourslef in this world should be the greatest accomplishment."},{"1":"As a student myself, I think students would benefit from attending classes from home, because attending classes can help students manage their own time and learn how to self control, and can follow their own pace of learning.\\n\\nAs day by day passes, I believe that lots of students are sick of repeating the same dull sketchual, and wish they could stay at home for school, on the other hand, they will not have to wake up so early everyday when they worked on their homework till so late. When students attend classes from home, they will be able to manage their own sketchual, learn how to control their time efficiently, be more self-reliance, and prepare for the future.\\n\\nIn conclusion, it is a benefit for students to attend classes from home, because they can learn how to make their own plan, and learn how to manage time, which I believe that it will help the students a lot in their jobs, future life goals or even their entire life."},{"1":"If you could visit one place in the world where would it be? One place that I would like to visit is Pakistan. Here are some reasons why I would like to visit this place. First, it is known for it's parks. Secondly, the food is amazing. Lastly, Pakistan is one of the nicest culture. As you can see, Pakistan is an excellent place to visit.\\n\\nPakistan is known for some of it's best amusement parks. One place I would go to is Aladdin park. It's an amusement park with a lot of thrilling rides. I could go on the chair lifts. They are so awesome. Another place I would go to is Sea view. It's a beach. There I could go on horse and camel rides. The rides are exhilarating. About three or four people can ride the camel at the same time. They take you all the way to the water than back to where you started. Another place I would go to is Safari Park. It is an amusement park /zoo. There is a section for animals. You can go on a safari ride to see them. One of the best part about the ride is that you get to go to the elephants cage. There you can pet the elephant, you can even feed it, and you can go inside the cage if you want to go close to it. As you can see, Pakistan has variety of places to go so you won't get bored.\\n\\nFood. It's the most important thing..right? When I wake in the morning after an awesome night. I will be hungry. So I start my day first by going to the local breakfast shop. There I will order eggs with some round hot parathas, and than some hot piping chai. Then when it's lunch time I will go to a fast food restaurant. There I will order a chicken burger with yummy fires and soda. When night comes around it will be time for dinner. For dinner I will go to a local restaurant. There I will order steaming hot Chicken Korma with buttery naan and Mango lassi. For desert I will have hot gulabgamun. They are like little doughnut balls covered with sugar syrup, and are very soft. As you can see, Pakistani cuisine is very delicious.\\n\\nThe people are very nice in\\n\\nPakistan. Wherever you go you would see people helping out each other. They are very welcoming and kind. They treat each other like they all are equal. They laugh, talk, and they just have fun. They don't disrespect each other, they take care of each other, and are very grateful. They are very protective towards each other. They're like a community and support one another. As you can see, Pakistani culture/people are the best.\\n\\nIn conclusion, I would say that Pakistan is awesome. So get your plane ticket right now and come to Pakistan. It is one of the best country you could visit."},{"1":"Schools were made for people who wants to learn and be a successful person in life even though , there are some people who don't have the opportunity to be in school. Right now in some countries be on school until you are 18 is a law but it other countries government those not care about children future. Here in the United States they have the option for students to attend classes from home by online or video conferencing. They have that option specially on universities because some universities are out of the city and a percentage of students with a bad economy may not be viable to get transportation everyday. So In my opinion that is a great idea to have that option on universities. They should have the same option in high school but not to all the students because that may cause students to fail the classes. High school 's should give that option to students with excellent notes and for students who live out of town. Attend classes from home by online or videos has benefits, oneis you become more responsible,\\n\\nsecond it helps you to earned money, and gives you more opportunities to success.\\n\\nIn one hand,Attend classes from home it may be a big responsibility because you are doing it by your own no one is going to help you or push you to learn. For example when you attend to class in a school or colleague there is always a teacher ,who is there to help you,supports you ,and make sure you don't fail your semester, they also make sure that you are learning and getting better everyday. Instead when you have to attend classes by yourself you must be confident and responsible to make sure that you are going to take classes everyday and don't waste the opportunity,because no one is going to be telling you more than 3threet times to do you work .There are some students that don't know what be a responsible person means, does students may not be viable to get good greats by taking classes from home. This kind of students need help from someone to push them and teach them to be a responsible person. Be a responsible person is important because it helps you to success in life gives more opportunities and you don't depend from nobody you learn how to do things by your own.\\n\\nIn the other hand one more benefit to attend classes by home in online it helps you to earn money specially if you live in large distance from school. A few houses are located miles away from the city that means schools are located miles a way from home. In that case attend classes from school it would be very helpful and a big opportunity. Because take transportation everyday Monday to Friday it may be expense because you may pay at mornings to get to school and pay back in the afternoon to go back home. One more benefit is that it help you to success,you may be a viable to find a job. For example you can do your online classes in the mornings and find a part-time in the afternoon. Many students do this they go to school on mornings and work for a couples of hours at night. But if you could attend classes from home it would be so much easier to work and study at the same time you would made your own schedule withou a problem. Also make sure to give enough of time to do your online classes and get good greats.\\n\\nIn conclusion\\n\\nI do believe this potion to attend classes from home in online or videos is a great opportunity. Specially for students who live out of the city and for everyone who was to success in life no matter what. School and universities should let students know about this option. I am agree and I believe that I may not be the only one who support this idea. Therefore this opportunity should give to students who really needs it and no to those who would waste it .This kind of option should be in all over the world to help people with bad economy and help those who want to success and have a passion to learn. Students who have the opportunity to attend school everyday without a problem should know that there is people that live far from the city that they would love to be seated in a classroom and attend school everyday."}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<pre class="r"><code>regression_fit &lt;- parsnip::fit(regression_wf, 
                     regression_train_df)</code></pre>
<p>Identifying examples with especially poor performance can help us
follow up and investigate why these specific predictions are poor.
Conceptually, its easy for a baseline know-nothing model to assign all
essays to the median score of 3. The predictive power is in the ability
to model the essays that are not 3 into buckets higher and lower than
3.</p>
<p>Because the ratings are a form of ordinal value, or even a likert
scale, we will ensemble a second classification model that includes the
output of the regression.</p>
<pre class="r"><code>classification_train_df &lt;- train_essays_raw  |&gt; 
                select({{outcome}}, full_text) |&gt; 
                bind_cols(
                  predict(
                    regression_fit,
                    regression_train_df
                  )
                ) |&gt; 
               rename(regression_pred = .pred) |&gt; 
               mutate({{outcome}} := factor(.data[[outcome]]))

classification_wf &lt;- workflow(multiclass_recipe_builder(outcome = outcome), svm_spec) 

folds &lt;- vfold_cv(classification_train_df, strata = !!outcome)

set.seed(42)  
rs &lt;- fit_resamples(
  classification_wf,
  folds,
  metrics = metric_set(kap, accuracy),
  control = control_resamples(save_pred = TRUE))

collect_metrics(rs) |&gt; arrange(mean)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[".metric"],"name":[1],"type":["chr"],"align":["left"]},{"label":[".estimator"],"name":[2],"type":["chr"],"align":["left"]},{"label":["mean"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["n"],"name":[4],"type":["int"],"align":["right"]},{"label":["std_err"],"name":[5],"type":["dbl"],"align":["right"]},{"label":[".config"],"name":[6],"type":["chr"],"align":["left"]}],"data":[{"1":"kap","2":"multiclass","3":"0.3298592","4":"10","5":"0.009486327","6":"Preprocessor1_Model1"},{"1":"accuracy","2":"multiclass","3":"0.4737980","4":"10","5":"0.007256077","6":"Preprocessor1_Model1"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<pre class="r"><code>collect_predictions(rs) |&gt; 
  ggplot(aes(x = .data[[outcome]], y = abs(as.numeric(.data[[outcome]]) - as.numeric(.pred_class))/2)) +
  geom_violin() +
  scale_y_continuous(breaks = seq(-5,5,0.5)) +
  labs(y = &quot;Residuals&quot;,
       title = &quot;{{outcome}} Residual errors for essays in held out folds&quot;,
       subtitle = &quot;The highest and lowest essays are still not predicted well&quot;)</code></pre>
<p><img src="figure/EnglishLanguageLearning.Rmd/fit%20phraseology%20resamples%20classification-1.png" width="672" style="display: block; margin: auto;" /></p>
<pre class="r"><code>train_essays_raw[

collect_predictions(rs) |&gt; 
  mutate(residual = as.numeric(.data[[outcome]]) - as.numeric(.pred_class)) |&gt; 
  arrange(desc(abs(residual))) |&gt; 
  slice_head(n = 5) |&gt; 
  pull(.row)

, ] |&gt; 
  select(full_text, {{outcome}})</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["full_text"],"name":[1],"type":["chr"],"align":["left"]},{"label":["phraseology"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"The Curfews Keep Teenagers Out Of Trouble\\n\\nOnce, I walked down the empty street during midnight. Then, I heard a rising sound of a strange footstep behind me. Suddenly, I felt anxious and scared that someone might come up to me and murder me for money. Lucikly, there was nothing happened to me. After I got home, I had a thinking that what if a city council adopts a 10 P.M. weekday curfew and a midnight curfew for teenagers. If the curfew is published, any teenager who is wandering on the street after those hours would be violating the law. On the other hand, some might believe that the curfews unfairly interfere in young people's lives because it does not let the teenagers have their freedom and accomplish something that is very important to them, which they cannot do it another time. I still agree with the idea that curfews keep teenagers out of trouble because it stops teenagers from doing something that is illegal during the late hours, it moderates them to be a better humans being with molarity without having any criminal records, and it prevents young people from being kidnapped or killed at night.\\n\\nSome people argue that curfews should not be publish because it limits the freedom of most teenagers. Still, I believe that curfews should be establish to put an end on any illegal act that is commited by teenagers because the young people should be controlled by laws when most of them are not mature enough. They should be strictly managed instead of being free and are allowed to do whatever they want. For example, teenagers who hangout with their friends at night and get drunk are more likely to do something that is breaking the law when they are not sober enough. These young people tend to pull out their weapons to threat others who walk outside at night for money in order to buy illegal drugs. This is an important issue to pay attention on because these teenagers already become the worst humans being when they are not strictly managed by anyone or any law. However, they will keep threatenting others when the curfews aren't carried out to prevent them from doing their vicious things. In fact, there are several criminal cases that are committed by teenagers in America, which proves that the U.S. government is weak at controling their citizens and managing the society within the nation. This fact shows that the U.S. government does not care about the moral of young citizens and the safety of all citizens in general. The U.S. government should carry out curfews that keep all teenagers in control in order to limit any illegal acts. The estalishment of curfews is important because it shapes all teenagers to become the better people who has morality instead of threatening others to get what makes them feel pleasure.\\n\\nThe curfews should be carrried out to moderate all teenagers into better people who treats others in the right way because it helps them stay out of any trouble that might be an unfortunate consequense in their future. It shapes their morals and erases all their bad behaviors that makes others feel unpleasure. For example, teenagers who turn out to be good people when they have parents who do not let them go out when the sky turns dark. Also, their parents strictly manage them and prevent them from going outside at night to do illegal things. However, some might believe that the curfews do a little improvement on teenagers because they still sneak out of their houses without their parents' awakeness to do what they like at night. This is an important issue to focus on because these teenagers will turn into adults who have several criminal records that might bother them from getting their jobs in the future. Moreover, teenagers should be more mature to realize that any violation acts that they had done will stay with them for the rest of their lives. Therefore, if the curfews is adopted then they should be obey to this law in order to avoid any unfortunate results that can occur in their lives. In fact, many companies prefer to choose employees with a good moral because they did not commit any crime in the past, which proves that they will not cause any danger while working in the companies. Unfortuantely, people who had done any crime or violated any law in the past will more likely to stay unemployed because they are considered to be dangerous. The curfews is brought out to protect all teenagers's future from being damaged by any of their wrongful commitment.\\n\\nThe curfews keep teenagers out of trouble because most of them would not want to be kidnapped or murdered while walking on the street at night. To prevent any harmful cause that can happen to young people, the U.S. government should set up curfews for teenagers. In fact, there are many unfortunate cases of missing teenagers in America. This fact proves that numerous teenagers had been kidnapped while they wander around empty public places at night. In this case, the U.S. government should adopt curfews law because it can decrease the act of kidnapping teenagers. However, some teenagers are killed while they are going out at night because there are a lot of robbers appear during this time. To solve this problem, the U.S government should let the city council bring out the curfews law, which can restricts all teenagers from going out at night and protect them from being murdered.\\n\\nIn conclusion, curfews law is significant because it can reduce the criminal acts within a society. It shapes the society to be more organized and less dangerous to the citizens. The curfews can keep teenagers out of trouble because it restricts teenagers from committing any unfortunate crime. It helps teenagers to become better individuals in society who treat others in a correct way. Specially, teenagers can avoid death and being kidnapped when they obey to the curfews and stay home at night. Lastly, we should set up curfews and believe that it can protect all teenagers from getting trouble because they are going to be the one who runs the planet one day.","2":"4.5"},{"1":"One thing I would like to accomplish in the future is to be a marine biologist and visit the ocean.\\n\\nThere is so much about the ocean that we don't know about. About 5% of the ocean is discovered and our earth is made of 75% water and 25% land.\\n\\nMarine biology is a job were you work with animals. there is so much you could do as a marine biologist. for example, you could swim with animals and collect data, you would work in a lab to find cures with animals, you could even not directly with animals but research about them.\\n\\nThe ocean is an amazing place and is full of magnificent creatures. i would love to swim with sea life and help them in any way i can. if i see an animals caught in a net. I would try and save it. If there were animals in a bad situation such as injured, harmed, caught. I would help it. so many animals are killed every year. either for clothes, food, wild fire, pollution, loss of habitat, etc. over 700,000 thousand animals are killed every year. that includes sea life and land life. So many animals that are endangered like the black rhino. the great white shark, etc just from poaching. sharks are hunted for their fins and then just tossed back into the ocean to die. same goes for the black rhino. they are hunted for there horns and then just left to die. i want to accomplish saving some animals when i grow up.\\n\\nIn the ocean coral reefs are dyeing because of people and habitat distraction. some people think that coral reefs are just rocks growing out of other rocks but they are actually animals and they are living and breathing just like us. maybe they dont have noses like us they are animals and they should be treated like animals. in ten years we would have lost 100% of our coral reefs. That doesnt mean that all the coral reefs are gone it means that there wouldnt be enough coral reefs are a good habitat. Animals need coral reefs to live in and hide from predators like bigger fish.\\n\\nSo many animals died from plastic just drifting in the ocean. there are more than 1 million plastic being dumped into the ocean each year. Sea life dies from plastic by getting stuck in it or eating since its not biodegradable. In the future i want to help sea life with all the plastic and at least help out with it. a lot of animals even get stuff and grow up with plastic stuck on them or in them. there is this turtle when it got caught in a tip tie. the tip tie was stuck around its shell and it couldnt get out so it just grew around it and deformed the shell. when helpers saw the turtle they took the zip tie off of the turtle and the the turtle was free but its shell was still deformed from the zip tie. when people are recycling they should at least up the bottle holders so if it does get in the sea and a animal finds it. it is less likely to get stuck in it. turtles eat jellyfish so when there is a plastic bag floating in the ocean. the turtle thinks its a jellyfish and eats it. after some time the turtle might die because it cant digest the plastic.\\n\\ni want to accomplish visiting the ocean and go diving, snorkeling, touch wild life and help out with injured animals.","2":"4.0"},{"1":"The Forme British Prime Minister\\n\\nChurchil,\\n\\nOnce he said \"The success consists of going from failure to failure right but without loss of enthusiasm\",\\n\\nMy oponion about the all this success is basic on Prime Minister Winston Churchill that he once said the success consists if you loss your enthusiasm i think he was exactly what he said about in persuit of success because the enthusiasm consist and how you going to be when you do something that you need to do right so you need to ge a great enthusiam for do it as well rifht if you do not do well its mean that your enthusiasm is what is success is passed from you was a one's of statement about the important role consist.\\n\\nSome succes too is basic how you are if are good person sometime its mean that you controle a paper that if something is passed on you right that's mean that you need to get attention taht what you going to do in this time so this is one other effects that cause on you so i am agree with churchill's statement, but in the same time we can said its normal right because it how you feel tha's mean is represent your enthusiasm every time that you feel,as great or we said a mad perosn so the success i be comig in this point too becasue your accition is represent you feeling.\\n\\nAbout the success that is consist if you going to failure to failure that the Forme British Prime Minister Churchill once said that that's meam if you main is great a or lower you need keep in your main that you going to do well and you need to be strong like one example,that if you think that you not do well you need stay attention that what thing is going to happen in the moment that success is be great or you can faiure too right but ist no mean that you stay with you head dowm right so, basic the Forme British Minister Winston Churchiil said about you think is that you success is not be right o can we said like bed so its mean that you going to failure, if without loss all your enthusiasm so i will said that all success is coming from all that you think and its basic too accion that you well do. Success is basic in what is going to happen bewteen that person accion so its mean that the person and their success it play one paper that you don't or i going to explain as never give up to other thing that just come to all your succes that was some reason you think that your enthusiams is going dowm so its one of importat point that need to show.\\n\\nThe statement about how is such importnat to role that failure plays in pursuit or success is the is that some activity are like pursuit is a important role because failure plays with success its basic that depents some activities that you can do is coming from pursuit right then usually you can see how success is work is basic a important role in this stament because success are principal thinks that each person show when they act then after they actuation so the consists is coming that which its mean that you can failure to failure without loss of enthusiasm i well said thay i am gree with Former British Minister winston Churchill Because the succes is part the us right as i said you need stay as much attetion because enthusiams is be coming that what should that you success is going to be great or youn can lost too in the moment is coming the accion for something that you well do like to said you acction represents off thing that wiil you doing right so is a important role that we can see and each person how pursuit work bewteen the consists like as person can be result, for each statement.\\n\\nOnce he said \"The success consists of going from failure to failure right but without loss of enthusiasm\",\\n\\nMy oponion about the all this success is basic on Prime Minister Winston Churchill that he once said the success consists if you loss your enthusiasm i think he was exactly what he said about in persuit of success because the enthusiasm consist and how you going to be when you do something that you need to do right so you need to ge a great enthusiam for do it as well rifht if you do not do well its mean that your enthusiasm is what is success is passed from you was a one's of statement about the important role consist. well its important because this i well happen for each person so about the definition the this argument is basic is that success can be big statement as depents for us if we are ready to use or breain and about it consists is basic if you let the is will going from failure and you will loss the enthusiasm so, some time the the person is feel well so its meam how the person can reaction so is the enthusiasm is work then the person show as then can feeling.","2":"2.5"},{"1":"This program helps students to learn new things,helps older students to mature of teaching and taking it seriously,and helps younger students to socialize with new people and to communicate,and prepares the older students to prepare lessons and teach and be more organized,it can also help older and younger students to learn new different skills and learn different ways.\\n\\nThe first best thing about having programs for younger and older students is for the younger students can learn new things. I think it's best to teach young people to learn new things because it can prepare them in the future. I think that the program can help the younger students for they can learn interesting new things and for they can decide what they want to be in the future. If the younger students get help from the older students to learn new things it's good because for they can use that information and teach other kids what they have learn from the older students. I think this program can help many other young students to learn new things from the older students because it's a better way for the students for can use what they have learn and use it for something for their future life like for example math they can use that for paying taxes and bills I think that this program can help students learn new things.\\n\\nThe second, thing that is good about this program,is the older kids can mature from teaching younger students and learn how to be more thinkable about what to teach and how to teach something. I think that this program is good because the older student learn how to focus more on what they are able to teach the younger students. The reason why I think the program is a good learning resource is because when the older students know more things than the younger students they can decide what do they need help on learning what should I teach them and how do I teach the subject to them so it makes the older students more focus to how to know how teach a younger students and the best way to help them. It helps older students because they can think in a better way and to make them feel more grown up teaching someone that is younger than them. This program helps older students because it makes them think more harder and it also teaches the older students how to think more ideas and thin what happens if they teach that, or well this lesson help them, and makes them ask questions to themselves.\\n\\nThe third reason, how this program can help younger students, is because the younger students can communicate more to new people they don't know. I think that this program helps younger students to communicate more is because if they talk to more new people that are helping them they well be less shy and it well make it less difficult for them to be shy to talking to someone new. I think that this program helps younger student to learn better to communicate is because they can get more confidence, and not be scared to talk in front of someone new and different. I think that this program dose help younger students with communication because when they talk to someone new they can feel more comfortable talking to more people and be more social. This program helps younger people to communicate because when they talk to someone it can help them to be less scared to like present projects and talk to a crowd.\\n\\nThe fourth reason, why this program helps older students to prepare for lessons and be like a more organized,thinkable person. I think that this program dose help older students be more organized is because they think what they are gonna teach them and what the younger students are struggling on. I think that this program dose help a lot of certain older students be organized because they think what time,and day,where they are gonna teach the lessons to the younger students. I think that this program dose really help the older students to be organized cause it makes them more prepare what they are gonna teach and how they are gonna teach it so basically, the older students think were to put what. Why I think that this program dose help older students to be more organized because they plan everything in order.\\n\\nThe last,reason why I think this program is great is because it helps both younger and older students to help each other and to improve there learning skills. I think this program dose help both young and older students because if they all work together and help each other it can make a difference on helping and making people learn in a way certain way an easier way. I think that this program dose help younger and older students cause they can both share their learning skills how they learn things and shares ideas. I think this program helps because all the younger students and older students teach each other things and help them get better at something they are having trouble at doing. I think this program dose help cause it helps every students to learn a easy way to learn in different ways like flashcards,reading something over and over again,watching turturiols videos on how to do a equation or math so this program helps to find the best skill for you. It helps for all the students for they can learn faster and easier and help others find their best learning skill to focus on what they are learning.\\n\\nIt helps both older students and younger students to improve there learning skills and it's a good program to learn new interesting things to help students for the future.","2":"2.5"},{"1":"People who value self-reliance defined as the need of each individual to follow his or her own instincts and ideas.\\n\\nShould people make their own decisions about life important matters,or should they ask someone else for their opinion.\\n\\nPeople should ask for guidance from experts about life important matters.\\n\\nThere are times when depression comes and stress appears because,of bad decisions made by one-self.\\n\\nIf people do not ask for experts guidance, there is a possibility that in the future the decision they have made, might affect them in the future and cause a fatality like, depression which can lead to deadly thoughts and mental problems like bipolarity.\\n\\nDepression is one of the most know in all over the world which is caused by,bad decisions,over working by mental and physical jobs, family problems, and an unhealthy life style which all of this can lead to suicide thoughts.\\n\\nFor example, one of the most famous singers from United States Sia known for her most popular song \"chandelier\", she committed many bad decisions which had lead her to drug addiction.\\n\\nHer fame was getting higher; and many contracts for more shows where she had it to attend to, were exploding her head which lead it to an over working stage.\\n\\nShe has an amazing soprano voice, with more than five different tones, and because of that, different music productions wanted to sign a contract with Sia, but she instead of taking a rest she decided to continue, knowing in which stage her body was passing through, she decided to take drugs to cover her stress but, instead of taking away her stress she became a drug addict which lead her to suicide, but thanks to the doctors she is alive; now she keeps being one of the most popular singers but, because of her pass, she covers her face with long hair bangs to the top of her upper lip; and no own has seen her face since that incident.\\n\\nAlso, bad decisions might lead to mental problems like bipolarity, and sadly most of the cases are seen in schools where parents and teachers do not notice until is late for that youth to recover, because of his or her bad decisions that this students had made.\\n\\nFor example, a student from a school in Virginia known for his great intellectual was passing through a rough time, he had to go to work every single day after school from Monday to Monday his hours to school were from 7:30 Am to 2:15 Pm, and his work hours were from 2:30 PM to 10:30 PM every single day.\\n\\nHe never gave up he always was the top student of his class, but there were times where his parents were putting more pressure, and Test were near to come and work was getting more and more exhausted until one day he exploded.\\n\\nThe day of hes graduation arrive and his most treasure sister wasn't able to accompany him because she was getting into the same stage that he already pass through.\\n\\nAfter his graduation he wanted to have a life and do what he always wanted to do since he was a child which was being in the Marine, he was already in a bad state because of all the pressure he gent through but, he wanted to fallow his dream.\\n\\nOne Saturday in the morning he decided to apply for the Marine but, sadly he was not accepted because of his migratory circumstances and because of that, hes brain collapsed in a stage of dementia, but his mother instead of giving an affection, she got mad and told him \"Stop, you are a man already, act like one\", the only one who tried to calm him down was his little sister who did not know what to do but to say \"He needs some experts help, he needs to go to see a doctor in that way, we can make a good decision and know what to do\".\\n\\nAfter all of this happened he went to a mental hospital where he was hospitalized for three long months and now he is living a life with medications from an expert who helped him to go through all of this where he was diagnosed with bipolarity.\\n\\nIn conclusion, if someone wants to make a decision which is about their life importance is better to ask an expert and prevent all this things to happen in that way there can be a reduction in mental problems and suicide attempts.","2":"3.5"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<pre class="r"><code>collect_predictions(rs) |&gt; 
  rmse(truth = as.numeric(.data[[outcome]])/2, estimate = as.numeric(.pred_class)/2)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[".metric"],"name":[1],"type":["chr"],"align":["left"]},{"label":[".estimator"],"name":[2],"type":["chr"],"align":["left"]},{"label":[".estimate"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"rmse","2":"standard","3":"0.4546698"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Results here aren’t great, but they are more are less competitive
with the leaderboard figures.</p>
<p>The final fitting ensembles both the regression and classification
fits, and makes a prediction on the submission essays.</p>
<pre class="r"><code>classification_fit &lt;- parsnip::fit(classification_wf,
                                   classification_train_df)

extract_fit_engine(regression_fit) |&gt; 
  vip::vip(num_features = 20)</code></pre>
<p><img src="figure/EnglishLanguageLearning.Rmd/fit%20phraseology%20final-1.png" width="672" style="display: block; margin: auto;" /></p>
<pre class="r"><code>submission &lt;- predict(
  classification_fit,
  
  submit_essays_raw |&gt;
    bind_cols(predict(regression_fit, submit_essays_raw)) |&gt;
    rename(regression_pred = .pred)
) |&gt;
  transmute({{outcome}} := .pred_class) |&gt;
  bind_cols(submission)</code></pre>
<pre><code>Warning in get_dtm(corp): dtm has 0 rows. Empty iterator?

Warning in get_dtm(corp): dtm has 0 rows. Empty iterator?</code></pre>
<pre class="r"><code>submission</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["phraseology"],"name":[1],"type":["fct"],"align":["left"]},{"label":["vocabulary"],"name":[2],"type":["fct"],"align":["left"]},{"label":["syntax"],"name":[3],"type":["fct"],"align":["left"]},{"label":["cohesion"],"name":[4],"type":["fct"],"align":["left"]}],"data":[{"1":"2","2":"2.5","3":"3.5","4":"3"},{"1":"3","2":"3","3":"3","4":"3"},{"1":"3.5","2":"3","3":"3","4":"3"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div id="grammar" class="section level3">
<h3>Grammar</h3>
<p>We fit for <code>grammar</code> first using an xgboost regression,
using case weights to adjust for the frequency of occurrence of each
value of <code>grammar</code>.</p>
<pre class="r"><code>outcome &lt;- outcomes[5]

regression_train_df &lt;- train_essays_raw  |&gt; 
                select(!!outcome, full_text) |&gt; 
                case_weight_builder(outcome)

regression_wf &lt;- workflow(recipe_builder(outcome = outcome), xgb_spec) |&gt; 
       add_case_weights(case_wts)

folds &lt;- vfold_cv(regression_train_df, strata = {{outcome}})

set.seed(42)  
rs &lt;- fit_resamples(
  regression_wf,
  folds,
  control = control_resamples(save_pred = TRUE))

collect_metrics(rs) |&gt; arrange(mean)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[".metric"],"name":[1],"type":["chr"],"align":["left"]},{"label":[".estimator"],"name":[2],"type":["chr"],"align":["left"]},{"label":["mean"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["n"],"name":[4],"type":["int"],"align":["right"]},{"label":["std_err"],"name":[5],"type":["dbl"],"align":["right"]},{"label":[".config"],"name":[6],"type":["chr"],"align":["left"]}],"data":[{"1":"rsq","2":"standard","3":"0.2208091","4":"10","5":"0.008648367","6":"Preprocessor1_Model1"},{"1":"rmse","2":"standard","3":"0.6190143","4":"10","5":"0.003397109","6":"Preprocessor1_Model1"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<pre class="r"><code>collect_predictions(rs) |&gt; 
  plot_preds(.data[[outcome]]) +
  labs(y = &quot;Predicted&quot;,
       title = paste0(outcome, &quot; predictions against essays in held out folds&quot;),
       subtitle = &quot;The highest and lowest essays are not predicted well&quot;)</code></pre>
<p><img src="figure/EnglishLanguageLearning.Rmd/fit%20grammar%20resamples%20regression-1.png" width="672" style="display: block; margin: auto;" /></p>
<pre class="r"><code>train_essays_raw[

collect_predictions(rs) |&gt; 
  mutate(residual = .data[[outcome]] - .pred) |&gt; 
  arrange(desc(abs(residual))) |&gt; 
  slice_head(n = 5) |&gt; 
  pull(.row)

, ] |&gt; 
  select(full_text)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["full_text"],"name":[1],"type":["chr"],"align":["left"]}],"data":[{"1":"To who it may concern,\\n\\nHello my name is STUDENT_NAME and I think doing community service is a good idea, but I think others will disagree with it. So I think we should do an assembly on how important it is to keep our planet and city clean and educated. We should have guess speakers, reward assemblies and more disappline assemblies for the students that won't do the community service. So the students can help with the community instead of destroying it with graffiti, rival gangs, and destroying public property.\\n\\nSincerely,\\n\\nSTUDENT_NAME"},{"1":"Dear principal,\\n\\nI have heard of the school cafeteria's plan to change to a new healthier school lunch. And as a junior in this school,I take the position that this new dynamic idea to change the school's lunch menu is a bad idea. So I have decided to share my thoughts for the development of this school and with our health. I believe that keeping our school's lunch menu is a good idea. I know that my opponents would argue with me regardlessly,because they would probably assume that our students have been eating the same food for too long and would definetely want to have a different versions of food,and get to explore their school lunch like other schools usually do. But when they detect my reasons,they would know for sure that the school's lunch is way better than they think it is.\\n\\nMy initial reason for not agreeing to this change is that it would eradicate some student's favorite cafeteria foods, especially me,There are a lots of food currently in the cafeteria that are so good, clean and healthy.\\n\\nthey are also enough food for everyone to eat, so changing the menu wouldn't be necessary, it would be a waste of time and money. the school has got a bunch of stuff to focuse on. American's have this quote that \" if you have lemons make lemonades\" meaning we should make the best out of what we have by embracing it not changing it.\\n\\nIn additon, the current school's lunch menu is technically healthy, I have this extraordinary thoughts in my mind because I haven't seen any student that has protested against the school's lunch, this means that the current school lunch is unique on it's own way. Also the school lunch is potentially some of the amazing healthy American foods.\\n\\nAgain,Most American foods are junky and cause students to gain weight chronically and gradually. But our current food consists of fruits,vegetables and also green salad which prevents the body from gaining too much weight and sustain the normal body weight. I have been eating our school's green salad for a while and l have seen some fantastic changes in my body and it is very impressive. So principal, dont you think that changing our school's cafeteria's lunch menu is a bad idea?\\n\\nFor instance, our school cafeteria's lunch has got protein,Vitamin D and my weight is intact, as far as our health is concerned, so take all of these reasons into consideration and figure out your final answer,I hope that you make the right choice for the school and l know that the school's improvement is your priority.\\n\\nThank you respectively,\\n\\nGeneric_Name 11th grade( junior)"},{"1":"My dad once said\" that one day I'll save a life just by calling 911\". The reason he said that is that the technology today is better than the one he grew up with. Technology today can do more things than the technology a few years ago. Technology today does have a positive effect on people because it can help people communicate with people around the world, and people can call 911 for an emergency.\\n\\nIt helps people communicate with people around the world. For example my Uncle can't leave the country to go visit his mom but if he does he can't return to the states. So the technology now allows him to Skype or Facetime his mom when he wants. In fact 70%\\n\\nof the people around the world can communicate. All the people can now connect with anyone with just a simple button.\\n\\nPeople can call 911 for an emergency. For example my dad had witness a car crash when he was driving to work. When he saw the car flipped over he quickly got his phone and called 911. The cops came in like 3 minutes. When the cops arrived they quickly got the guy out of his car where he was flipped. So thankfully my dad was there to call 911 for him and saved his life. In fact 55% of people that call 911 save a life. So if you ever witness an accident call 911 because you might save a life.\\n\\nTechnology does have a positive effect on people. It can help people talk to people all over the world. People can also call 911 for emergency. Other people believe that technology is the root of evil, however technology helps everybody no matter what. So technology is the best thing humans ever created because it can help anybody do anything."},{"1":"By the time students enter high school, I believe that they should have an idea of what type of career they would like to pursue after they graduate. For some students, committing to a specific career at young age sometimes is a good idea as long as you have a backup idea for a different career in case you decide that you do not want to pursue in that career anymore, thats why committing to a career at a young age is only sometimes a good idea because you'll never come up with another career if you keep changing your mind. The courses that you study in high school should be thought about as well because maybe you need a specific degree from a course in order to pursue in that career.\\n\\nI believe that, if a student is going to commit to a career that they should be very passionate about this career, they should be at least a junior in high school so that they've had time to get a feel of the other careers and decide which one they enjoy and suits them the best, and they should keep in mind the requirements that are needed, the benefits, and the types of jobs that it offers to them. Students who commit to a career at a young age are usually athletes, or they plan on working in their family business.\\n\\nPursuing your career needs a lot of hard work in school especially in this generation because you're going to need to go to a good college so you need a good GPA because you're going to want to go to the college that has a good academic program for the career that you plan on pursuing. Therefore, you need to go to college, and work hard so you can get a good job because most jobs, don't hire anyone without a college degree.\\n\\nFinally, thats what I think about choosing the right career for yourself, and committing to a career at a young age. although some may still believe differently and disagree with my view on this issue."},{"1":"Dear TEACHER_NAME\\n\\nI think that we don't need community service hours because, some students do well in school and they don't get to go to all the 8th grade fun activities that they have by the end of the school year. Like a lot of students do very well in school but they cant go to the fun activities or graduate from 8th grade because they don't have community service hours. If students have bad grades and they have a green sheet that you are failing 8th grade and they have to get 5 and up grades and they are showing progress then i think that its fair to let the students graduate from middle school even do they didn't do service hours. That's why i say that its fair too let the students graduate from middle school even do they didn't do service hours. i know that theirs a lot of students that haven't done the service hours and they are really worried that their parents may get mad at them for not graduating 8th grade. So that's why i' m saying that that's why we don't really need service hours."}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<pre class="r"><code>regression_fit &lt;- parsnip::fit(regression_wf, 
                     regression_train_df)</code></pre>
<p>Identifying examples with especially poor performance can help us
follow up and investigate why these specific predictions are poor.
Conceptually, its easy for a baseline know-nothing model to assign all
essays to the median score of 3. The predictive power is in the ability
to model the essays that are not 3 into buckets higher and lower than
3.</p>
<p>Because the ratings are a form of ordinal value, or even a likert
scale, we will ensemble a second classification model that includes the
output of the regression.</p>
<pre class="r"><code>classification_train_df &lt;- train_essays_raw  |&gt; 
                select({{outcome}}, full_text) |&gt; 
                bind_cols(
                  predict(
                    regression_fit,
                    regression_train_df
                  )
                ) |&gt; 
               rename(regression_pred = .pred) |&gt; 
               mutate({{outcome}} := factor(.data[[outcome]]))

classification_wf &lt;- workflow(multiclass_recipe_builder(outcome = outcome), svm_spec) 

folds &lt;- vfold_cv(classification_train_df, strata = !!outcome)

set.seed(42)  
rs &lt;- fit_resamples(
  classification_wf,
  folds,
  metrics = metric_set(kap, accuracy),
  control = control_resamples(save_pred = TRUE))

collect_metrics(rs) |&gt; arrange(mean)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[".metric"],"name":[1],"type":["chr"],"align":["left"]},{"label":[".estimator"],"name":[2],"type":["chr"],"align":["left"]},{"label":["mean"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["n"],"name":[4],"type":["int"],"align":["right"]},{"label":["std_err"],"name":[5],"type":["dbl"],"align":["right"]},{"label":[".config"],"name":[6],"type":["chr"],"align":["left"]}],"data":[{"1":"kap","2":"multiclass","3":"0.3431242","4":"10","5":"0.008788945","6":"Preprocessor1_Model1"},{"1":"accuracy","2":"multiclass","3":"0.4725196","4":"10","5":"0.007233842","6":"Preprocessor1_Model1"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<pre class="r"><code>collect_predictions(rs) |&gt; 
  ggplot(aes(x = .data[[outcome]], y = abs(as.numeric(.data[[outcome]]) - as.numeric(.pred_class))/2)) +
  geom_violin() +
  scale_y_continuous(breaks = seq(-5,5,0.5)) +
  labs(y = &quot;Residuals&quot;,
       title = &quot;{{outcome}} Residual errors for essays in held out folds&quot;,
       subtitle = &quot;The highest and lowest essays are still not predicted well&quot;)</code></pre>
<p><img src="figure/EnglishLanguageLearning.Rmd/fit%20grammar%20resamples%20classification-1.png" width="672" style="display: block; margin: auto;" /></p>
<pre class="r"><code>train_essays_raw[

collect_predictions(rs) |&gt; 
  mutate(residual = as.numeric(.data[[outcome]]) - as.numeric(.pred_class)) |&gt; 
  arrange(desc(abs(residual))) |&gt; 
  slice_head(n = 5) |&gt; 
  pull(.row)

, ] |&gt; 
  select(full_text, {{outcome}})</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["full_text"],"name":[1],"type":["chr"],"align":["left"]},{"label":["grammar"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"I belief in this issue about the students are responsible with their class is favorable for them, take a class at home . Also Some schools offer distance learning as an option for students to attend class from home by way online or video conferencing. I think is good idea, students would benefits from being able to attend class from home.\\n\\nSome students take class in home because they do not have time to go to the school. For example, this e students need to take class from online because they work at night or at day . Clearly, they do not have time to go the school because they time is short and they need to organize their day for take a class so, some students take a class from online because their have many reason . In summary, some students need time for study , and they need this position from online for study and they can finish their class.\\n\\nTo day in the world exist many disease, and we need to get precautions with this dangerous disease. So for this problem some students can't go to the school for this big problem. Relating, this problem with school because the students health is so important. For example, the corona virus is so dangerous, students need a protection, because this illness inflict many death. Is so easy to get sick. For this reason, \\nis important to students to get class from online or video conferencing,\\n\\nis better study at home and also a good place, is the best way for students not get sick from this dangerous disease. However, this disease not have medication, but students we cant to prevent get to sick also, studying at home. In summary, is important to caring students they are the future for the world. For this reason some school need to get dis option, learning from online or video conferencing.\\n\\nIn another hand , i think is good idea, students would benefits from being able to attend class from home, and other people belief, this not a good idea , students would benefits from being able to attend class from home for this issue, students not leaning in one video conference but, some students don't want to go to the school because they have more than 17 years old or they can't enter to school for their age. Because, for you can enter to school minimal you need to have 15 to 17. Also, you have 18 you can't not to enter at school and is a problem because you can't find a good work if you dont have a graduation certificate from school. For example, some students want to study , but they can't because they can't enter to school for their age, I think is so important to exist a program when the people older the age can study line or video conferencing. However, many people need to get a certification but they can't for this problem, also the best solution is studying online is more accessible for them. They can have more opportunities in their life , they can get a better job. For instance students can learning online , is a big benefit for this students was can't enter at school. In definition everybody need a opportunity for study, for get a certificate from school. obviously the students are responsible with their class at home.\\n\\nThe benefit was school online or video conference represent is the student get more concentration at home , they do not have distraction for any other students, they do not suffer by bulling and they can get a good grade studying a lone in home. For example, sometime students get bad grade for this reason , distraction , they can't sleep at night also, they need to wake up to early for this reason they sleep in class,and they not put attention because they are tired. Also, the students have the opportunity to studying online they can organize their time and pass their class easy because they are focus with their class online also they not have distraction and its for that reason they get a good grades, students need class online or video conferencing , this program help many studying or many young girl are pregnant. Some young girl want to finish her high school but she can't because her are pregnant. However, some school get a program studying online is to much better for this students are pregnant is more easy, to studying at home because she can eating when she hungry and carrying her health for her baby. The program studying online is important to exist help to many students with different problems situations or health problems. In summary learning as action for students who wants to study online or video conferencing. I think is a good program for many students who want to study. Clearly,\\n\\neverybody has the opportunity to study obviously the students who get study online has a responsible to attend every day their class and get their certification high school.\\n\\nIn conclusion, class online or video conferencing have many option to study, just is question of time for the students , they need to organize time for study online and can graduate , this program no have many different then the school just, the student need to stay alone and the benefit of that is you can concentrate better alone by your self. Also is better studying at home for this many disease dangerous is more comfortable state at home. However students no need age for study, what they need is inspiration and intelligent for study not need age. In summary distance learning as an option for students to attend classes from home by way online or video conferencing.","2":"2.5"},{"1":"Do you agree with Churchill statement about the important role that failure plays in the pursuit of success? Yes because in order for you to be successful you have to fail a couple of times. For an example when\\n\\nI was 10 years old I lived in Miami Florida and I played football. Every kid I went up against they were faster than me and better and I got mad because I was not good enough. One day the coach pulled me after practice and told me what's up this is not the kid I saw play football in Miami Beach. He then matched me up with the best receiver he had and I still didn't surprise him with that kid he saw on the beach.\\n\\nAfter a while of training and training back to back coach then matched us up again now I was faster and better it got to the point where I was his star receiver that season we finished 10-0. We went to playoffs and finished 5-0 coach was really happy in 10 years of coaching he had never achieved something like that with his football team. But it was the final game everything changed the team we went up against had stronger and bigger players they first took out are running back with a neck injury so that left me playing two positions. We were up 21-7 its second half 2 minutes before half and next thing you know I had both tight ends and safety hit me at the same time both tight ends hit me in my knee and I was done. What hurt the most was seeing my coach not being able to concentrate he had then even left the special team coach run the plays all because coach went to check on me.\\n\\nHe asked the doctors was I okay and they said he is done he cant play neither can he walk. After that coach went outside mad he was really mad and he then saw the score board it said 28-7. We were still up than theres the halftime coach talks to the players even I did so and they go back on the field we are on the 40 yard line and next thing you know boom are star quarter back is hit. He is not getting up his spine was broken and he could not even move after that coach knew we lost the game but coach did not know that i was feeling better without coach knowing i wen't back on the field the score is 28-28 theres 30 second left and the ball is on the 50 yard line. Coach starts to see the formation he than knew I was on the field and he tried calling timeout but there was no time out left coach knew I could throw but the team did not know my friend Ricky is running he cuts back and runs back up the field as fast as he can I throw the ball he catches it on the 10 yard line and he gets the touchdown coach than ran on the field and picked me up.\\n\\nCoach then said how did u manage to hold in all the pain after being hit like that I told him the same way my brother managed to cover me when there was a drive by and he was shot 9 times. Coach knows I came from a rough spot in Miami especially the projects. Now i am 17 and i learned from my passed i learned from being a failure for you to be able to be great you gotta fail no matter what nobody is perfect. My brothers always told me if you eat okay now you will eat better tomorrow it is a saying just about being able to actually grind and stay humble. sometimes in life things will not always be easy because that is just the way things are and i personally will be better from yesterday.\\n\\nHow do you think all the star people from now and days have so much money they were not good from the jump they failed a lot in life nothing will never come easy to be great you gotta beat the great. Football players dont just get to be star just like that they gotta earn it. Rappers dont get to get platinum just like that they gotta make good songs. Everything in life is a sacrifice you gotta humble yourself and be able to go out and get it because nothing will be bought to you. you can feed a horse but you cant force them to eat it.","2":"3.5"},{"1":"I believe that my skill is I can speak another language,Korean, fluently. Speaking another language is not effortless but the effort give pleasure that I can help other people. It is tired and hard to help other people, but assist make people glad. My ability is I can speak Korean, acquired Korean by reading the books, can use my skill usefully by teaching Korean to Korean - American and communicate and help Korean.\\n\\nI developed my Korean skill by reading books often. I read a Korean book at least in a week. Mostly, it was hard to understand and I had to find the words meaning in every single time. However, I could improve my writing skills,\\n\\nvocabulary skill and I could speak Korean and write logically. For example, I took World Language Exam last year, I could use the words that I saw when I was reading a book. Also, I could make my writing clearly, organize and I understood prompt very well. In addition, my parents read Korean books to me and my brother. That made me to understand and speak in Korean fluently.\\n\\nI can use Korean skill very usefully by teaching Korean to Korean- American. Usually, people who were born in America but their families are Korean, and they don't know how to write, speak and write in Korean. For example, I go to the church every Saturday and help to teach Korean to the teenagers or children. It is hard but they can learn Korean from Korean school and communicate with families. For example, they become teenagers, and they can speak only English and their parents can speak only Korean. They will not able to communicate each other. They will become farther. Nevertheless, teenagers can ignore their parents that they cannot speak English.\\n\\nCommunicate with Korean can be useful because some Korean are immigrated to America with not enough English skills. They need help with bills, housing and information of America. If you go any stores or community center, they are having difficult because they can't speak English so they cannot understand what the owner is trying to say. If you can speak Korean, you can help them. For example, I was student ambassador which is help new students to touring the school and help them with the schedule. The new student came to our school and she was Korean and she cannot speak English. I introduce the school, and class schedule in Korean to her so she can understand about school system.\\n\\nThere are lots of advantages if you speak another languages. You can acquire Korean by reading books that help to improve your writing, reading, vocabulary skills. Also,teaching Korean to children or teenagers and can communicate with Korean can help people.","2":"2.5"},{"1":"Today, at school, most people are required by teachers to work with a group in order to prepare them to work in society and be able to communicate with their future colleague. I believe that there is more benefits for students to work with others rather than working by their own because they can share their ideas together and don't work alone allow them to be faster.\\n\\nFirst, by working with a group students can share their ideas and discuss on the work they have to do. By sharing their ideas, their work will be stronger and longer because every person of the group bring his own point of view, his own examples or experiences and their own way to work, to proceed. While working alone can be difficult when the student have no ideas or is lost and don't know how to do his work, so in a group they can help each others to understand and push them to work For example, if in a group a person have more facilities on the topic than others, she can help others who have more difficulties to work. Working by groups allow students to grow and enrich their skills to be better because they learn from each others. Working with a group help them to be prepared for working by their own.\\n\\nSecondly, working with other students can be more efficient. Students, by sharing ideas, are working faster because they don't have to find all by them self and do all the work. They can share tasks so one person have one job rather than do everything alone so it's more efficient and beneficent for all the group but also for the teacher because the work will be done faster, so the class can move on and do more things during the year and if they help each other they probably don't need help from teachers, so teachers can be focus on students with real difficulties. Working with a group can prepare them for their future jobs so they can be able to communicate to other people and learn how to work not only for them self but also for everyone and they learn to help each other so they will be more productive in the future. For example, if in the future, they will work in a society where they need to work together on a project with many people and their boss don't want them to work by their own, they already learn how to be efficient in a community so it won't be a problem for them. They will be already used to work with a group and they will know how to proceed.\\n\\nSome people can think that working by groups can do the opposite and prevent students to work by talking, laughing, having fun with their friends, which can be distracting them or if a person in the group don't want to work it can impact other's work so it's unfair for people who really want to work and are motivated to have a good grades. However, students can keep working at home if they are late on their work, they can communicate by phone or they can meet during the weekend or after school so the work can be done in time or teachers can make the groups in order to prevent distractions. Also, if a person don't want to work and impact other's work, the person will be graded lower which can motive her to work or if it's not the case, students from the group can help her and to be motivated and push her to work by giving her little tasks to do or easy tasks.\\n\\nIn conclusion, I think that working with a group bring more benefits for students rather than working alone because they can share their ideas, their way to proceed and work faster by helping each others. If teachers want their students to be more efficient and enrich them self for their future, it's important that they do more activities and work in groups.","2":"3.0"},{"1":"Do you think student would benefit from being able to attend classes from home?.First attend classes at home they can benefit for student they can have fun and do thing's what they like on the free time,and doing. thing to have fun and be happy that is one benefit for students to be at home.\\n\\nthe most thing to have fun with the family and something they can do like homework during at home or study for the test that is one thing that they can benefit for the student. the next they can't benefit attend at home because they must has to go every day at school and if student don't go to school they will have bad grade on class and all classes attend is the most important in the school. attend classes from home they can't benefit at school and they can't benefit for student because tha is one of the most important rule the all school has and they must has to go to school.\\n\\nFinally student would benefit from being able to attend classes from home that they can benefit like doing working on internet and also they can' benefit for student because they must has to go every day at school that is one of the rule of school studen must being on the school,and them if the student don't go to the school they will get travel for be missin the school and they will have bad grade and\\n\\n,something they can benefit for student to be at home they can have fun with they family and play voideo games and they can do what they like more to be at home.\\n\\nand they can benefit stay at home and do the homework and prepared for the test. that is they can benefit for students to be attend classes being at home....","2":"3.0"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<pre class="r"><code>collect_predictions(rs) |&gt; 
  rmse(truth = as.numeric(.data[[outcome]])/2, estimate = as.numeric(.pred_class)/2)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[".metric"],"name":[1],"type":["chr"],"align":["left"]},{"label":[".estimator"],"name":[2],"type":["chr"],"align":["left"]},{"label":[".estimate"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"rmse","2":"standard","3":"0.4757612"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Results here aren’t great, but they are more are less competitive
with the leaderboard figures.</p>
<p>The final fitting ensembles both the regression and classification
fits, and makes a prediction on the submission essays.</p>
<pre class="r"><code>classification_fit &lt;- parsnip::fit(classification_wf,
                                   classification_train_df)

extract_fit_engine(regression_fit) |&gt; 
  vip::vip(num_features = 20)</code></pre>
<p><img src="figure/EnglishLanguageLearning.Rmd/fit%20grammar%20final-1.png" width="672" style="display: block; margin: auto;" /></p>
<pre class="r"><code>submission &lt;- predict(
  classification_fit,
  
  submit_essays_raw |&gt;
    bind_cols(predict(regression_fit, submit_essays_raw)) |&gt;
    rename(regression_pred = .pred)
) |&gt;
  transmute({{outcome}} := .pred_class) |&gt;
  bind_cols(submission)</code></pre>
<pre><code>Warning in get_dtm(corp): dtm has 0 rows. Empty iterator?

Warning in get_dtm(corp): dtm has 0 rows. Empty iterator?</code></pre>
<pre class="r"><code>submission</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["grammar"],"name":[1],"type":["fct"],"align":["left"]},{"label":["phraseology"],"name":[2],"type":["fct"],"align":["left"]},{"label":["vocabulary"],"name":[3],"type":["fct"],"align":["left"]},{"label":["syntax"],"name":[4],"type":["fct"],"align":["left"]},{"label":["cohesion"],"name":[5],"type":["fct"],"align":["left"]}],"data":[{"1":"2","2":"2","3":"2.5","4":"3.5","5":"3"},{"1":"3","2":"3","3":"3","4":"3","5":"3"},{"1":"3.5","2":"3.5","3":"3","4":"3","5":"3"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div id="conventions" class="section level3">
<h3>Conventions</h3>
<p>We fit for <code>conventions</code> first using an xgboost
regression, using case weights to adjust for the frequency of occurrence
of each value of <code>conventions</code>.</p>
<pre class="r"><code>outcome &lt;- outcomes[6]

regression_train_df &lt;- train_essays_raw  |&gt; 
                select(!!outcome, full_text) |&gt; 
                case_weight_builder(outcome)

regression_wf &lt;- workflow(recipe_builder(outcome = outcome), xgb_spec) |&gt; 
       add_case_weights(case_wts)

folds &lt;- vfold_cv(regression_train_df, strata = {{outcome}})

set.seed(42)  
rs &lt;- fit_resamples(
  regression_wf,
  folds,
  control = control_resamples(save_pred = TRUE))

collect_metrics(rs) |&gt; arrange(mean)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[".metric"],"name":[1],"type":["chr"],"align":["left"]},{"label":[".estimator"],"name":[2],"type":["chr"],"align":["left"]},{"label":["mean"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["n"],"name":[4],"type":["int"],"align":["right"]},{"label":["std_err"],"name":[5],"type":["dbl"],"align":["right"]},{"label":[".config"],"name":[6],"type":["chr"],"align":["left"]}],"data":[{"1":"rsq","2":"standard","3":"0.2829922","4":"10","5":"0.012548539","6":"Preprocessor1_Model1"},{"1":"rmse","2":"standard","3":"0.5688537","4":"10","5":"0.003443614","6":"Preprocessor1_Model1"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<pre class="r"><code>collect_predictions(rs) |&gt; 
  plot_preds(.data[[outcome]]) +
  labs(y = &quot;Predicted&quot;,
       title = paste0(outcome, &quot; predictions against essays in held out folds&quot;),
       subtitle = &quot;The highest and lowest essays are not predicted well&quot;)</code></pre>
<p><img src="figure/EnglishLanguageLearning.Rmd/fit%20conventions%20resamples%20regression-1.png" width="672" style="display: block; margin: auto;" /></p>
<pre class="r"><code>train_essays_raw[

collect_predictions(rs) |&gt; 
  mutate(residual = .data[[outcome]] - .pred) |&gt; 
  arrange(desc(abs(residual))) |&gt; 
  slice_head(n = 5) |&gt; 
  pull(.row)

, ] |&gt; 
  select(full_text)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["full_text"],"name":[1],"type":["chr"],"align":["left"]}],"data":[{"1":"some student offer distance learning as an option for student to attend classes from homr by wat of online pr video conferencing. i think student would benefit form being able to attend classesfrom home. you are authorized take the electronic version of this you will taking this promptsome student offer distance learning as an option for student to attend classes from homr by wat of online pr video conferencing. some student offer distance learning as an option for student to attend classes from homr by wat of online pr video conferencing. some student offer distance learning as an option.\\n\\nonline pr video conferencing. the right view the prompt and teh checklist for writers vvsome student offer distance learning as an option for student to attend classes from homr by wat of online pr video conferencing. some student offer distance learning as an option for student to attend classes from homr by wat of online pr video conferencing. some student offer distance learning as an option for student to attend classes from homr by wat of online pr video conferencing. some student offer distance learning as an option for student to attend classes from homr by wat of online pr video conferencing. some student offer distance learning as an option for student to attend classes from homr by wat of online pr video conferencing. some student offer distance learning as an option for student to attend classes from homr by wat of online pr video conferencing. some student offer distance learning as an option for student."},{"1":"Do you agree or disagree with extending the school day. I disagree with extending the school day. The 3 reasons why i disagree with extending the school day is that the students will get home late,the school will need to spend more money on students,and the students will get more tired.\\n\\nFirst of all,the students will get home late. The students won't have have time to do after school sports nor activities. The kids will not have time to do homework nor study. The students won't have time to do fun things on their own time.\\n\\nAdditionally,the school will need to spend more money on students. The state will need to raise taxes for the schools. The school will need to spend more money on bills for utility. The schools will need to spend more money on supplies and food for kids.\\n\\nFinally,the students will be more exhausted. The students will be exhausted because they will need to do work for extra hours. Students who do after school sports or activities will not get enough sleep because they will be getting home late. The students will get home past there bed time and they have to eat dinner.\\n\\nIn conclusion,the three reasons why is disagree with extending the school day is that students will get home late,the school will need to spend more money on students,and students will be more tired."},{"1":"When you have a problem do you think to yourself, how can I do my best to fix this problem? American jazz legend Duke Ellington said,\"A problem is a chance for you to do your best.\" In my opinion, I agree with Duke Ellington's quote. One reason, is if you don't try to do your best in a situation you could end up regretting your decision. Another reason, is if you try do your best in a situation you could end up learning something new. Lastly, if you don't put any effort try to resolve a problem you could end up back in that hole.\\n\\nI agree with this quote because if you don't try to do your best in a situation you could end up regretting your decision. One reason, is the amount effort you put in to a problem could affect your future. Also, a chance to do your best to fix a problem could be a one time opportunity. One example, of this is about my cousin he could have been playing professional soccer but he didn't try his best on the tryout which made him not make the team. Lastly, if you don't do your best in a situation it could affect your life.\\n\\nI also agree with this quote because if you try your best in a situation you could end up learning something new. First, if you try your best in a situation you can learn on what to improve on. One example, is about my brother he did his best on a test and got a 82 percent now he knows he has to improve in that subject. Another example, is when one of my friend's brother did his best in a race and lost which made him train more and harder to improve his speed. Overall, If you don't do your best you will not learn and improve from a situation.\\n\\nAnother reason, I agree with this statement is because if you don't try your best in a situation then you will end up back in the same hole. First, if you don't try to solve a problem then it will come back in to your life and you will have to deal with it again. First example, is about my younger brother who didn't try on a test and got a bad grade which made him retake the test. Also, if you try to solve a problem then you will learn from your mistakes and wouldn't commit the same mistake twice. Finally, it is important to do your best in a situation because it would make you improve yourself from your mistakes.\\n\\nIn conclusion, I agree with this quote because you should always try to do your best in a problem. First, you wouldn't regret at least trying to solve a problem. Then, you could learn ways to improve on, to help you solve the problem. Also, if you try your best in a problem then, when you have the same problem you will know how to solve it. Finally, if there is a problem it's also chance for you to show others what you can do."},{"1":"Student and teachers are have opposing views on working together for various reasons. However, according to new Stanford research, when people are treated as partners working together their motivation, student are able to communicate with each other, therefore creating a better final product. Working in team also prepares students for future careers and job. Whoever they will be required to learn to cope with other people and personalities, it is valued by employers. Even though students are not agree with each other all the time, working together is ore beneficial than working alone.\\n\\nEvery body ha heard someone in their life say \" two minds are better than one\" before right, this quote has never range more, and all of the idea it promotes reflect crystal clear off of group work. Working in a group can be drastically reduce the amount of work you need to do as well as make thing of more efferent, whether it be a group project paperer presentation. Because it cuts down on how much work one person has to do. It allows for group to achieve more as alone. Things are also finished much quicker because of the way many people can split up different jobs in a group an people with different skill sets can do what they are best at and do not have to worry about what they are bad at, this broader range of skill can also be used to help other people members develop their own by learning from their team members. The diversity found within a group of people is one of most powerful resources a person can have when it comes to finishing a task.\\n\\nit lends a group of people to have many more ideas to come up with and bounce off of because many people are working\\n\\n\"The best way to have good idea is to have a lot of the a quote from Linus Pauting dealing with dilemma new idea's. When dealing with abdicating an idea from thin air, it be best to have multiple people instant of one because it brings multiple ideas all have fair and different point rather than multiple ideas no opposition or diversity.\\n\\nAnother benefit of having multiple people working in one group is that this can cause an evolutionary like phenomenon with multiple, stronger idea that complete and mulute, creating one in tribute and exceptional idea. This also comes with the help of a group, as a group can decide which idea would be main idea and smoothe out the edyes.\\n\\nAnother problem that can come up is well problem. Having a group of people can become extremely helpful for solving a problem that may come up in situations where a problem can arise, having a group of people can allow for quick and easy way to get out of a situation. Now working in a group does not have its advantage but some things are best done alone\\n\\nThough working in a group can seem to be good working alone can be better depending on the situation. Being in group full of adult and unfocused group members is infuriating and may seem like torture. Although, some people prefer working alone because they can focus better and make decision faster, in the end, it is a better to working in a group.\\n\\nif one does not do work the only they fail. Also being in a group fell safe. While being alone means you are much more impotent so working in group\\n\\nThough working alone can be better for one reason such as anxiety. paranoia worry about other preference, or simply because they would prefer to work alone. Working in a team is advantage over some others who are unaccustomed to doing so , it helps develop people skill decision making skills and general expertise for putting up with others.\\n\\nworking in a group is also good for getting other people's opinion on group member work, as long as they do their part, oftentimes students will learn and experience more in a group of their peers than working alone which is definitely better for their future an possibly what lies ahead. Developing these skill will most likely help in the coming times of college, careers their future family and even retirement.\\n\\nOverall, working together is beneficial because it creates less work and allow work to be completed faster. Working together promotes constructive criticism from other member of the group , which produces a better final product, working together create different points of view with different points of view new ideas are generated. New idea create diversity is the way to success."},{"1":"Welll its going to be ah good beefit but in the same time it's a bad benefit to doing class in the house .\\n\\n(03/10/2020).\\n\\nThe oportunity the not miss one class and be in you house is the best thing the can happen to one school students, this benefist the school and the students beacuse they never going to miss one day of school and the homeworks and tests to. In the actually some kids miss the school for be sicks, some familiar pass away ,they in vacation and they not return in time to the country , they miss the bus school and they can't go to the school beacuse they not have car ,oh they wake up late. This is a benefit because they can learn about the class oh activity and not miss homework oh test and be prepare for the next class in the school, and be in his house relaxing and be in a safe place and always have ready you homework oh test to next class and its ah good benefits to the people ho its in the hospital and can go to the school for ah broken legh oh medical condition .\\n\\nBut not everething it's good about this idea some kids maybe oh actually they gonna stop going to the school and stay in his house and skiping the school. this its going to affect them beacuse they can't sociable with other people ,they can have ah computer oh in his house, they not have wife oh cellfone and other guys oh kids will skip the online class to and go play video games,and they parents are not gonna have idea about what his kid did oh do, and during the test they can copy using this class peapers oh using his fone to find out the answers. ( In my case i will always if they give me the opportunity to online classes i will always stay in my house relaxing in my bed when i listening the class ) but in the end this option of learn in his house have his good and bad bennefits (some school in the united states are not using this becuse they not have personal wedsites and can garanteed if the student are going to use this ) .\\n\\n( I have one idea in how they can do this in ah good way. The students ho miss the school need to call the school and inform why they not going to the school and need the have a parent in his house, then they send them the link of the online class and notify the parent if they are doing work, oh they are skiping the online classes, and they can have ah limet time of online classes so they can be focus to his work and doit on time and when they are doing ah test they doing the test in a video coferincing with one teacher if they and not chating oh copy during the test. ).\\n\\nMy personal opinion:\\n\\nIn my opinion its ah good offer becouse sometimes i miss the school bus and i can't go to the school becuse i not have ah car and i always miss the class,homework and tests, and this can be help me a lot to have all the work in time and be prepare for the next day of school and be ready take the class oh to take one test .\\n\\none sad fact:\\n\\nIn the intere world some kids can have this oportunity to have online classes in some countries around the world they not have the tecnology to do that so if they miss the school one its like they are missing one day of his life and fact even they are kids ho not are going to the school bacuse the parents not have money to send them to the school ( yep in some countries the education cost money and they not have free schools like united states ) and they have to work in one short age to help his family in my country was like this thaks to good i was alow to go to the school thanks to my mother and come her to the united states so when i come to the school her in united states and i hear students said i hate the school and i wanna be in home i remember my country and i said thanks to this country for give me free education (even in her they do video school conferencing to the people ho not coming to the school and i said wow , Even they do that for the students, and the students are doing protest to have more off days so what i try to said is always thanks to you parents for the education they are give to you and thaks always to you country to give you free education to you can be some one in you future and have a nice work and never ask why i not have this. and always think some in around the world not have the stuff the you have and always thanks to GOD for the stuff you have ( I always do that wen i wake up).\\n\\nExtra fact:\\n\\nIn some countries i the world like China,South Korea,Russia... etc, the education in vidio its ilegaly in all school this is bacuse they think the education its have to be like the oll days paepar pencil and uniform (some schools in united states more in the private schools) and they not use laptops to do classes the have to read every single book and the attendence its obligatory what i read if you miss the school in that countries they punch you in the hands with one metal stinck ( like in some countries in south america) and the leave detention in the school and you have to writte in 10 oh 20 pages the i have to come to the school every day . sometimes they stay in the school all day bacuese they need study for ah test. I some countries ( South Korea ) its elegal have computers and cellphones in the school . in south america yeah they can cellphones and laptops in the schools but the problem its the internet so many people have to steall the wife to his neighbord."}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<pre class="r"><code>regression_fit &lt;- parsnip::fit(regression_wf, 
                     regression_train_df)</code></pre>
<p>Identifying examples with especially poor performance can help us
follow up and investigate why these specific predictions are poor.
Conceptually, its easy for a baseline know-nothing model to assign all
essays to the median score of 3. The predictive power is in the ability
to model the essays that are not 3 into buckets higher and lower than
3.</p>
<p>Because the ratings are a form of ordinal value, or even a likert
scale, we will ensemble a second classification model that includes the
output of the regression.</p>
<pre class="r"><code>classification_train_df &lt;- train_essays_raw  |&gt; 
                select({{outcome}}, full_text) |&gt; 
                bind_cols(
                  predict(
                    regression_fit,
                    regression_train_df
                  )
                ) |&gt; 
               rename(regression_pred = .pred) |&gt; 
               mutate({{outcome}} := factor(.data[[outcome]]))

classification_wf &lt;- workflow(multiclass_recipe_builder(outcome = outcome), svm_spec) 

folds &lt;- vfold_cv(classification_train_df, strata = !!outcome)

set.seed(42)  
rs &lt;- fit_resamples(
  classification_wf,
  folds,
  metrics = metric_set(kap, accuracy),
  control = control_resamples(save_pred = TRUE))

collect_metrics(rs) |&gt; arrange(mean)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[".metric"],"name":[1],"type":["chr"],"align":["left"]},{"label":[".estimator"],"name":[2],"type":["chr"],"align":["left"]},{"label":["mean"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["n"],"name":[4],"type":["int"],"align":["right"]},{"label":["std_err"],"name":[5],"type":["dbl"],"align":["right"]},{"label":[".config"],"name":[6],"type":["chr"],"align":["left"]}],"data":[{"1":"kap","2":"multiclass","3":"0.3153262","4":"10","5":"0.01366941","6":"Preprocessor1_Model1"},{"1":"accuracy","2":"multiclass","3":"0.4602919","4":"10","5":"0.01042731","6":"Preprocessor1_Model1"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<pre class="r"><code>collect_predictions(rs) |&gt; 
  ggplot(aes(x = .data[[outcome]], y = abs(as.numeric(.data[[outcome]]) - as.numeric(.pred_class))/2)) +
  geom_violin() +
  scale_y_continuous(breaks = seq(-5,5,0.5)) +
  labs(y = &quot;Residuals&quot;,
       title = &quot;{{outcome}} Residual errors for essays in held out folds&quot;,
       subtitle = &quot;The highest and lowest essays are still not predicted well&quot;)</code></pre>
<p><img src="figure/EnglishLanguageLearning.Rmd/fit%20conventions%20resamples%20classification-1.png" width="672" style="display: block; margin: auto;" /></p>
<pre class="r"><code>train_essays_raw[

collect_predictions(rs) |&gt; 
  mutate(residual = as.numeric(.data[[outcome]]) - as.numeric(.pred_class)) |&gt; 
  arrange(desc(abs(residual))) |&gt; 
  slice_head(n = 5) |&gt; 
  pull(.row)

, ] |&gt; 
  select(full_text, {{outcome}})</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["full_text"],"name":[1],"type":["chr"],"align":["left"]},{"label":["conventions"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"Since the early societies with important philosophers such as Aristotle and Confucius, the world have been in a complex debate arguing about the best way to influence other people. As result, several ideas about how to influence people emerged, such as an internal agreement through the creation of the early constitution in Athens by Aristotle. Early constitution which tried to combat the earliest authoritarian ways to influence people through force. However, those ways to influence people were not effective because those factors dictate the people's actions and created a hostile environment. Therefore, the best way to influence others is by our own behavior setting a good example because this generates stability, creates higher standards, and effectiveness.\\n\\nHenceforth, setting a good example generates stability because this do not create a patron of dictatorship that generate differences and hostilities between the relationship follower-influencer. As result, this factor create an ideal and healthier relationship, which is reflected in the quality of the relationship environment. As a consequence, the stability created it by our own behavior and example make our message easier to be transmit it and receive it. For example, the relationship parent-son. This particular and common relationship completely reflected the influence of a good example and how the parent behavior dictate the stability in the family, especially in his relationship with the son. As result, if the parent set a good example and behavior the son would be more open to receive the parent's influence. Therefore, a high grade of empathy would be developed. As result, there would not be any differences and hostilities that can damage the stability of the relationship.\\n\\nHowever, many people still argue that there are different ways to influence others rather than setting a good example, such as internal agreements (e. i., constitution and other behavior codes). However, those ways still fall into the dictatorship and authoritarian scheme that make people disagree and create conflict. In addition, those rudimentary and forcing methods do not help the persons and the influencer-follower environment. In contrast, deteriorate and break any possibility of improvement because this authoritarian limit you, instead develop you. Therefore, by showing a good behavior and setting a good example the influencing process change drastically because this process became more active, inclusive, and dynamic. As result, this influencing way create higher standards because this method of influencing people promote values such as integration and solidarity that reach improvement and cooperation. As result, the higher standards break the authoritarian barrier and open the path for cooperation, participation, and admiration in the follower-influencer relationship.\\n\\nTherefore, a great example led by a good behavior becomes more effective because there is a dynamic cooperation between followers and influencers that boosted their performance and empathy in the relationship. Hence this dynamic cooperation becomes stronger, as result the relationship reach incredible stages of solidarity, which is translated into a better and healthier way to influence people. In contrast, the old \"fashioned\" authoritarian ways to influence people just deteriorate the follower-influencer relationship by dictating and forcing the followers' actions. As result, the net influence, effectiveness, and impact by the authoritarian ways become lower than setting a good example and behavior. For example, the actions by the Mohammad Gandhi in India with his pacific civilian disobedience movement; where he led an incredible number of people just by example and a good behavior through the diverse hostilities. This show the huge impact of setting a good example and the effectiveness that this way have on influencing people. Therefore, setting a good example is the best way to influence others because this way is the less damaging and authoritarian, and more inclusive and beneficial method to achieve a greater result. In addition, because this method promotes solidarity and unity, instead of division and competition. Lastly, because this method highlight humanity instead of cruelty.","2":"4.5"},{"1":"Some schools are offering distance learning as an option for students to attend classes from home. For those who can pay a fee for it would be perfect because they have the material to do that, like enternet, computer, or any other device to joing by online or video conferencing classes. Some students woul benefit from being able to attend classes from home, but just those who really need it, like students with disability or health problems. It would not benefit students whom have a hundred percent of their ability to develop anything, it would make them more lazy than what they normally are.\\n\\nGeneric_Name is a student who has a hundred percent of his ability but he does not like go to school. He is always skiping classes and never make homework. Generic_Name is a student with health problems who can not assist to school like a normal teenager because he has to be connect to a oxygen tank twenty four, seven. Generic_Name does not want to go to school and Generic_Name can not do that. The school which both of them used to attend is offering a distance learning program for students and the first two students who joing are Generic_Name and Generic_Name. If schools decide to create this program for students, them most priorize at the moment to acept students.\\n\\nDistance learning program as an option for students to attend classes from home. It would benefit thousands of students whom really want to learn and be successful in their life. If schools which have this program available for students allow students like Generic_Name and Generic_Name to be part of it. The one who is going to be benefit more would be Generic_Name because he is the one who really need this program, he is the one who want to learn new stuff, he is the one who want be someone in the future. Generic_Name would be just one more of those students who are trying to take the easy way for everything, acting like if the world goes around him. But there is also an amount of students who can not have access to enternet or any electronic device to access to the online classes. So it turns a problem for those who does not have acces to any of those things and has health problems like Generic_Name or who does not have enough money to have what they need to participate. The online classes would be hard to them no matter what. If schools created a plan for those students it would be more easy to them to develop themself.\\n\\nIn conclusion some schools are offering distance learning as an option for students to attend classes from home, for students who does not have a hundred percent of their ability, student with health problems, students who really need it. Them also may create a program that help students without enough economy to take those classes. If schools are creating new ways or programs for those whom really need it, them most think about all the needs that them have and try to supply it, not with a hundred percent but helping with what they can. So students can learn and be successful n the future. Remembering that the one that are students right now, are the future of the world.","2":"3.5"},{"1":"Some people might have heard this before, \"The greater danger for most of us lies not in setting our aim too high and falling short; but in setting our aim too low, and achieving our mark.\" This is what the great artist Michelangelo said. People might not agree with this, yet setting aims higher is better. This is because by setting our aim high, people will be able to achieve bigger goals. Setting aims high might conceive more unique thoughts than people with rivet thoughts that set their aims too low. There can be significant possibilities towards many directions too.\\n\\nFirstly, by setting your aim high, there can be significant possibilities towards many directions. Many people set their aims before they do or think about something. For example, which do you think will have more possibilities for job. Just applying for cleaning dishes because that's easy, or applying for every work field you can work for. This is the same for schools. For an other example, a student that does not know what he wants to do for his future choosing to go to the military, or going to collage with many opportunities. Going to the collage can increase the job opportunities and he might find a better job than going to military.\\n\\nFurthermore, setting our aim high will help people to conceive more unique or their real thoughts than people with rivet thoughts that set their aim too low. For example, people that aim low are most likely conceal or are not aware of their thoughts. This is because people that aim low will not try to achieve something too hard for them. On the other hand, people that aim high will try to achieve more harder tasks, and think about more things. This will help the human brains to develop and can help people to think in a unique way than other people. Famous artists that have created significant art works could have not created anything great if they have set a limit for their self. They all did not make any limit for their self and their abilities to create great works. All the unique ideas and arts exist because the famous artists aimed high.\\n\\nIn addition, by setting our aim high we can achieve bigger goals than setting a lower aim for a higher possibility. For example, Just working for the minimum requirement for an assignment than working for the maximum of that assignment, which will give you a better grade? The answer will most likely be working for the maximum of the assignment. If you have your aim low you might give up before you achieve a task even if that was an important task. If your aim is high you won't give up and achieve the task. Therefore, having your aim higher is better than just trying to do the easiest thing you can.\\n\\nSome people might say that by setting the aim too high that can make them suffer. This can be true, but that does not mean you should aim too low. what is important is to keep everything balanced to the best. Everyone has been said to eat a balanced meal when they were a small child. This is the same for everything. Understanding your own abilities and setting the aim to what you can possibly achieve rather than setting the goal for something easy. Some might say that if people don't aim high they won't have to work hard, so they will have less stress. They might have less stress but not every stress is bad for people. Stress can even help people sometimes. For example, I was a student in Japan that hated school and was too lazy to do any work. I had a lot of stress and that made me stay at home all the time. Staying at home did not relieve my stress at all, and I did not feel good about my self. Therefore, I chose to go to school again. Stress will mostly affect bad for you, but there are good affects too.\\n\\nFinally, The hole point about this is that running away and choosing the easy way is not the best decision. Aiming low might look like it's the simple and easy way thats safer but whats really the danger is for people to forget to aim high and believe they can achieve great things. The best is to make a decision that wont make you regret and making the best aim you can make. No one has to be excellent or perfect, but everyone should try their best in their short life so they can die with no regret.","2":"3.5"},{"1":"Generic_Name\\n\\nMarch 18 2019\\n\\nWritting SOL Grade 8\\n\\nBefore, I would always like to try and play the guitar. My brother would always try and teach me, Everytime I hear the guitar, it makes me feel calmed. Also when I was in Elementary School, I used to live in Generic_City, VA. The school I used to go to was named Generic_School. In Generic_School I used to be in band, so I would play the flute. I always tried to play the flute. I would never give up in something that I like or something the was my passion. Though, later on in middle school, when I went to 6th grade, I got in chorus. Once I got in chorus I thought I would hate that class of chorus, but later on I noticed I cannot stop singing. I always like to sing along with music or people. I am glad that I got in chorus in 6th cause I found out myself what I like to do, and what I like to do is sing. Even though, what I still would like to do is learn how to play the guitar and the flute. Doubt I can learn, but I can always try to play hem or one of them.\\n\\nAnother, thing I like to do is workout/exercise. Doing workout/exercise relaxes me a lot and makes me forget about a lot of family problems. I used to be in boot camp. I was in bootcamp when i was in 7th grade then I in 8th but I had to quit for a very obvious and hurtful reason. That reason is that my keee cap is out of place. I was suppost to get surgery, but my mom dosen't have that type of money to pay the surgery. Now, all i do is take pills that my doctor is recommending me but i think they are making me worst but I take them cause I have too. Sometimes, they make my pain go away or they make my pain feel worst to the point where i fall in the floor. I don't really know what they are doing to me. Although I hope I get better by 9th grade cause I want to join the junior army that is at Generic_School. I always wished to a nurse or going to the army, thought sometimes I feel like if I go to the army I would get hurt real bad in there. Even if I worked as a nurse in a hospital, I don't think I would fit right in. I feel like i can disgusted easily but I still want to help people, but I doubt 'll fit right in. I don't think i'll have a great future. I can always try to get what i want all i gotta do is work hard, and ill be able to accomplish the future I want and i've been thinking of, i just gotta do the right thingand also at the right moment.\\n\\nHopefully one day everything I want to accomplish now that I can't do i hope I accomplish it in the future and i hope it turns out good too. The wishes i have of playing the guitar,flute, my knee cap getting better, joining the junior army, get in the actual army or just being a nurse I hope I can do all those in the future. I want a great big beautiful and wonderful future. I want to make my family be proud of me for once in forever. When all those have I accomplish by the future im going to look at the ones who would bully me or say things about me and just say what happened to you? I know for a fact if to accomplish those goals in the future they will become true. Some day ill be looking down at people who put me down even when I in a good place.\\n\\nIn the future i also want to play soccer or basketball in 6th and in 7th i sould love to play basketball. I woukld always go outside and go to a basketball court and takemy basket ball sometimes with some friends to play with or sometimes it used to be with my step dad. I have never tried playing soccer cause playing soccer looks hard to do but some say playing soccer isvery easy, thought it dosen't look like it. I have played with my brother before but i'm always scared that my brother is going to kick the ball too hard and accidentaly hit me. Hoping this summer i go to the store andbuy meself a soccer ball and a basket ball for the summer to go out and play. Maybe with my brother to play soccer or even to play basketball but i doubt so i don't even know. I'm not very good atr basket ball, but i sure can throw good in the hoops.\\n\\nAlso always wanted to be a professional coach in basketball but for that I need a lot of practice and me trying hard but I also want to focus in school. Though what i really suck in school is Math, Civics and Science and I don't know how to get better in those three claases i try too but I always fail and always get and F or a D. I don't know really how to bring my grades up in those three classes. Yet i still look fordward a amazing future that i probably cannot have. Even thought what I said, I always got to try on something that i want or else i cannot get it. That's why I always got to try on it. Hopefully bringing my grade up can help me on something cause i really need to bring up my grades i've been getting close too in other classes lately but in those three I can't. In the future I will just not now cause I can't jus try i can't say yes i can knowing i cannot at all. I wish i can ask for help but I am always scared to ask teachers in frony of everyone else so I leave teachers notes witch is ver y emberrassing but at least im trying to bring up my grade. I'm just trying to make my family proud for once in a while. I will not only make them proud cause i'll also make myself proud, and look up and thank god for helping and thank my dad that is in heaven that is right now watching me hopefully.\\n\\nI have so many wishes and dreams in the future that I am looking fordward too, but i don't even know if i'll be abke to accomplish it and make it.\\n\\nAll im looking fordward too is to accomplish everything and make people happy and proud of me and im trying to be proud of myself and feel like myself for once in a while. All i gotta say is that, no one should give up on their dreams or on what they want to do cause i know everyone can do it and they accomplish there dreams, you can always make everythinmg right you just need the riht moment and need for us to be strong and do it. Never give up on big dreams like these. Everyone should try to make the best out of you.","2":"3.0"},{"1":"The school cafeteria plans to change to a new healthier school lunch menu. One reason that I think that is best to change the school lunch menu is that it could eliminate bad eating habits. Students can learn to eat without being tempted to eat junk food at school. Another reason on how you can switch the food is by substituting the schools junk food by exchanging it with something much more tasty and nutritious food that could lead into healthy eating routine to all the students.\\n\\nSome students say that they disagree on changing the school lunch menu.\\n\\nIf were to eliminate students favorite school lunch meals; it could lead to them not to eat or buying junk food outside of school.\\n\\nHowever school lunch teachers are preparing tasty, and nutritious lunch ideas to serve to their students. Eating a nutritional diet could increase focus in class, increase lifespan, and minimize harmful toxins and bacteria to the body. Changing the school cafeteria lunch for healthier menu.","2":"3.5"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<pre class="r"><code>collect_predictions(rs) |&gt; 
  rmse(truth = as.numeric(.data[[outcome]])/2, estimate = as.numeric(.pred_class)/2)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[".metric"],"name":[1],"type":["chr"],"align":["left"]},{"label":[".estimator"],"name":[2],"type":["chr"],"align":["left"]},{"label":[".estimate"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"rmse","2":"standard","3":"0.4603285"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Results here aren’t great, but they are more are less competitive
with the leaderboard figures.</p>
<p>The final fitting ensembles both the regression and classification
fits, and makes a prediction on the submission essays.</p>
<pre class="r"><code>classification_fit &lt;- parsnip::fit(classification_wf,
                                   classification_train_df)

extract_fit_engine(regression_fit) |&gt; 
  vip::vip(num_features = 20)</code></pre>
<p><img src="figure/EnglishLanguageLearning.Rmd/fit%20conventions%20final-1.png" width="672" style="display: block; margin: auto;" /></p>
<pre class="r"><code>submission &lt;- predict(
  classification_fit,
  
  submit_essays_raw |&gt;
    bind_cols(predict(regression_fit, submit_essays_raw)) |&gt;
    rename(regression_pred = .pred)
) |&gt;
  transmute({{outcome}} := .pred_class) |&gt;
  bind_cols(submission)</code></pre>
<pre><code>Warning in get_dtm(corp): dtm has 0 rows. Empty iterator?

Warning in get_dtm(corp): dtm has 0 rows. Empty iterator?</code></pre>
<pre class="r"><code>submission</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["conventions"],"name":[1],"type":["fct"],"align":["left"]},{"label":["grammar"],"name":[2],"type":["fct"],"align":["left"]},{"label":["phraseology"],"name":[3],"type":["fct"],"align":["left"]},{"label":["vocabulary"],"name":[4],"type":["fct"],"align":["left"]},{"label":["syntax"],"name":[5],"type":["fct"],"align":["left"]},{"label":["cohesion"],"name":[6],"type":["fct"],"align":["left"]}],"data":[{"1":"2.5","2":"2","3":"2","4":"2.5","5":"3.5","6":"3"},{"1":"3.5","2":"3","3":"3","4":"3","5":"3","6":"3"},{"1":"3","2":"3.5","3":"3.5","4":"3","5":"3","6":"3"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<div id="section" class="section level2 unnumbered">
<h2 class="unnumbered"></h2>
</div>
<div id="the-submission" class="section level1">
<h1>The Submission</h1>
<p>Kaggle’s system runs the workbook twice. The first time is on the
tiny three line public test dataset here. The second time is on a much
much larger hidden test dataset. As a check to simulate how the hidden
datset might fit, we could re-fit on the train dataset text across all
of the fits.</p>
<pre class="r"><code>submission</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["conventions"],"name":[1],"type":["fct"],"align":["left"]},{"label":["grammar"],"name":[2],"type":["fct"],"align":["left"]},{"label":["phraseology"],"name":[3],"type":["fct"],"align":["left"]},{"label":["vocabulary"],"name":[4],"type":["fct"],"align":["left"]},{"label":["syntax"],"name":[5],"type":["fct"],"align":["left"]},{"label":["cohesion"],"name":[6],"type":["fct"],"align":["left"]}],"data":[{"1":"2.5","2":"2","3":"2","4":"2.5","5":"3.5","6":"3"},{"1":"3.5","2":"3","3":"3","4":"3","5":"3","6":"3"},{"1":"3","2":"3.5","3":"3.5","4":"3","5":"3","6":"3"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<pre class="r"><code># write_csv(submission, here::here(&quot;data&quot;, &quot;submission.csv&quot;))</code></pre>
</div>
<div id="outcome" class="section level1">
<h1>Outcome</h1>
<p>Not only was this exercise a good study of Likert evaluation data,
but also of NLP techniques and of statistical resampling to assure that
the model performs on unseen data. The resulting models here lack the
predictive power needed for production use.</p>
<br>
<p>
<button type="button" class="btn btn-default btn-workflowr btn-workflowr-sessioninfo" data-toggle="collapse" data-target="#workflowr-sessioninfo" style="display: block;">
<span class="glyphicon glyphicon-wrench" aria-hidden="true"></span>
Session information
</button>
</p>
<div id="workflowr-sessioninfo" class="collapse">
<pre class="r"><code>sessionInfo()</code></pre>
<pre><code>R version 4.2.2 (2022-10-31 ucrt)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 10 x64 (build 22621)

Matrix products: default

locale:
[1] LC_COLLATE=English_United States.utf8 
[2] LC_CTYPE=English_United States.utf8   
[3] LC_MONETARY=English_United States.utf8
[4] LC_NUMERIC=C                          
[5] LC_TIME=English_United States.utf8    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
 [1] LiblineaR_2.10-22  xgboost_1.6.0.1    textfeatures_0.3.3 textrecipes_1.0.1 
 [5] tidytext_0.3.4     text2vec_0.6.3     yardstick_1.1.0    workflowsets_1.0.0
 [9] workflows_1.1.2    tune_1.0.1         rsample_1.1.0      recipes_1.0.3     
[13] parsnip_1.0.3      modeldata_1.0.1    infer_1.0.4        dials_1.1.0       
[17] scales_1.2.1       broom_1.0.1        tidymodels_1.0.0   forcats_0.5.2     
[21] stringr_1.5.0      dplyr_1.0.10       purrr_0.3.5        readr_2.1.3       
[25] tidyr_1.2.1        tibble_3.1.8       ggplot2_3.4.0      tidyverse_1.3.2   
[29] workflowr_1.7.0   

loaded via a namespace (and not attached):
  [1] readxl_1.4.1           backports_1.4.1        splines_4.2.2         
  [4] listenv_0.8.0          SnowballC_0.7.0        tidylo_0.2.0          
  [7] digest_0.6.30          ca_0.71.1              foreach_1.5.2         
 [10] htmltools_0.5.3        float_0.3-0            fansi_1.0.3           
 [13] magrittr_2.0.3         memoise_2.0.1          googlesheets4_1.0.1   
 [16] tzdb_0.3.0             globals_0.16.2         modelr_0.1.10         
 [19] gower_1.0.0            vroom_1.6.0            hardhat_1.2.0         
 [22] timechange_0.1.1       colorspace_2.0-3       vip_0.3.2             
 [25] rappdirs_0.3.3         rvest_1.0.3            haven_2.5.1           
 [28] xfun_0.35              callr_3.7.3            crayon_1.5.2          
 [31] jsonlite_1.8.4         survival_3.4-0         iterators_1.0.14      
 [34] glue_1.6.2             registry_0.5-1         gtable_0.3.1          
 [37] gargle_1.2.1           ipred_0.9-13           future.apply_1.10.0   
 [40] mlapi_0.1.1            DBI_1.1.3              Rcpp_1.0.9            
 [43] GPfit_1.0-8            bit_4.0.5              lava_1.7.0            
 [46] prodlim_2019.11.13     httr_1.4.4             RColorBrewer_1.1-3    
 [49] ellipsis_0.3.2         farver_2.1.1           pkgconfig_2.0.3       
 [52] nnet_7.3-18            sass_0.4.4             dbplyr_2.2.1          
 [55] utf8_1.2.2             here_1.0.1             labeling_0.4.2        
 [58] tidyselect_1.2.0       rlang_1.0.6            DiceDesign_1.9        
 [61] later_1.3.0            munsell_0.5.0          cellranger_1.1.0      
 [64] tools_4.2.2            cachem_1.0.6           cli_3.4.1             
 [67] corrr_0.4.4            generics_0.1.3         rsparse_0.5.1         
 [70] evaluate_0.18          fastmap_1.1.0          yaml_2.3.6            
 [73] textdata_0.4.4         processx_3.8.0         RhpcBLASctl_0.21-247.1
 [76] knitr_1.41             bit64_4.0.5            fs_1.5.2              
 [79] lgr_0.4.4              future_1.29.0          whisker_0.4.1         
 [82] xml2_1.3.3             tokenizers_0.2.3       compiler_4.2.2        
 [85] rstudioapi_0.14        reprex_2.0.2           lhs_1.1.5             
 [88] bslib_0.4.1            stringi_1.7.8          highr_0.9             
 [91] ps_1.7.2               lattice_0.20-45        Matrix_1.5-3          
 [94] conflicted_1.1.0       vctrs_0.5.1            pillar_1.8.1          
 [97] lifecycle_1.0.3        furrr_0.3.1            jquerylib_0.1.4       
[100] data.table_1.14.6      seriation_1.4.0        httpuv_1.6.6          
[103] R6_2.5.1               TSP_1.2-1              promises_1.2.0.1      
[106] gridExtra_2.3          janeaustenr_1.0.0      parallelly_1.32.1     
[109] codetools_0.2-18       MASS_7.3-58.1          assertthat_0.2.1      
[112] rprojroot_2.0.3        withr_2.5.0            parallel_4.2.2        
[115] hms_1.1.2              grid_4.2.2             rpart_4.1.19          
[118] timeDate_4021.106      class_7.3-20           rmarkdown_2.18        
[121] googledrive_2.0.0      git2r_0.30.1           getPass_0.2-2         
[124] lubridate_1.9.0       </code></pre>
</div>
</div>

<div id="rmd-source-code">LS0tDQp0aXRsZTogIkthZ2dsZSBGZWVkYmFjayBQcml6ZSAtIEVuZ2xpc2ggTGFuZ3VhZ2UgTGVhcm5pbmciDQphdXRob3I6ICJKaW0gR3J1bWFuIg0KZGF0ZTogIk9jdG9iZXIgMTUsIDIwMjIiDQpvdXRwdXQ6DQogIHdvcmtmbG93cjo6d2Zsb3dfaHRtbDoNCiAgICB0b2M6IG5vDQogICAgY29kZV9mb2xkaW5nOiBoaWRlDQogICAgY29kZV9kb3dubG9hZDogdHJ1ZQ0KICAgIGRmX3ByaW50OiBwYWdlZA0KZWRpdG9yX29wdGlvbnM6DQogIGNodW5rX291dHB1dF90eXBlOiBjb25zb2xlDQotLS0NCg0KVGhlIEthZ2dsZSBDaGFsbGVuZ2UgcHJlc2VudGVkIGhlcmUgd29ya3Mgd2l0aCBhIGRhdGFzZXQgdGhhdCBjb21wcmlzZXMgYXJndW1lbnRhdGl2ZSBlc3NheXMgKHRoZSBFTExJUFNFIGNvcnB1cykgd3JpdHRlbiBieSA4dGgtMTJ0aCBncmFkZSBFbmdsaXNoIExhbmd1YWdlIExlYXJuZXJzIChFTExzKS4gVGhlIGVzc2F5cyBoYXZlIGJlZW4gc2NvcmVkIG9uIHNpeCBtZWFzdXJlczogKipjb2hlc2lvbiwgc3ludGF4LCB2b2NhYnVsYXJ5LCBwaHJhc2VvbG9neSwgZ3JhbW1hciwqKiBhbmQgKipjb252ZW50aW9ucyoqLg0KDQpFYWNoIG1lYXN1cmUgcmVwcmVzZW50cyBhIGNvbXBvbmVudCBvZiB3cml0aW5nIHByb2ZpY2llbmN5LCByYW5naW5nIGZyb20gMS4wIHRvIDUuMCBpbiBpbmNyZW1lbnRzIG9mIDAuNS4gT3VyIHRhc2sgaXMgdG8gcHJlZGljdCB0aGUgc2NvcmUgb2YgZWFjaCBtZWFzdXJlIGJ5IGVzc2F5Lg0KDQohW10oaHR0cHM6Ly9zdG9yYWdlLmdvb2dsZWFwaXMuY29tL2thZ2dsZS1jb21wZXRpdGlvbnMva2FnZ2xlLzM4MzIxL2xvZ29zL2hlYWRlci5wbmcpDQoNCg0KW1RoaXMgaXMgdGhlIHJ1YnJpY10oaHR0cHM6Ly9kb2NzLmdvb2dsZS5jb20vZG9jdW1lbnQvZC8xUEJOc2hDQ2JqSUY3SHc0TC1kd1dIS29zTlZBSFM4UDN2SFlNX0VrcEN2QS9lZGl0KSB0aGF0IHdhcyB1c2VkIHRvIGdyYWRlIHRoZSBlc3NheXMuIFR3byBwZW9wbGUgZGlkIHRoZSB3b3JrIGluZGVwZW5kZW50bHksIGFuZCB0aGVuIHRoZSBzY29yZXMgd2VyZSBjb21wYXJlZCBmb3IgYWxpZ25tZW50Lg0KDQojIyBQcmVwcm9jZXNzaW5nIA0KDQpOYXR1cmFsIExhbmd1YWdlIFByb2Nlc3NpbmcgdGVjaG5pcXVlcyBvZmZlciBhIHdpZGUgdmFyaWV0eSBvZiB0b29scyB0byBhcHByb2FjaCB0aGlzIHByb2JsZW0uIFRoZSBLYWdnbGUgaG9zdCBpcyByZXF1aXJpbmcgdGhhdCB0aGUgbW9kZWwgcnVuIGFzIGEgc3RhbmRhbG9uZSwgd2l0aG91dCBpbnRlcm5ldCBhc3Npc3RhbmNlLiBUaGV5IGFsc28gYXNrIGZvciBhIHBhcnNpbW9ub3VzLCBleHBsYWluYWJsZSBtb2RlbC4NCg0KV2Ugd2lsbCBzdGFydCB3aXRoIGV4cGxvcmluZyB0aGUgcHJlZGljdGl2ZSBwb3RlbnRpYWwgb2YgdGhlIHRleHQgY291bnQgZmVhdHVyZXMsIGxpa2UgbnVtYmVycyBvZiB3b3JkcywgZGlzdGluY3Qgd29yZHMsIGFuZCBzcGFjZXMuDQoNClVuc3VwZXJ2aXNlZCB0b3BpYyBncm91cGluZyBjYXRlZ29yaWVzIG1heSBiZSB1c2VmdWwgZm9yIG1lYXN1cmVzIGxpa2UgY29udmVudGlvbnMgb3IgZ3JhbW1hci4gIEluIHRoaXMgY2FzZSwgd2Ugd2lsbCBzdGFydCB3aXRoIFtMYXRlbnQgRGlyaWNobGV0IGFsbG9jYXRpb25dKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0xhdGVudF9EaXJpY2hsZXRfYWxsb2NhdGlvbikgKExEQSkuDQoNCkluZGl2aWR1YWwgd29yZHMgbWF5IGhhdmUgcHJlZGljdGl2ZSBwb3dlciwgYnV0IHRoZXkgY291bGQgYmUgc28gc3BhcnNlIGFzIHRvIGJlIGRpZmZpY3VsdCB0byBzZXBhcmF0ZSBmcm9tIHRoZSBiYWNrZ3JvdW5kIG5vaXNlLiBDb25zaWRlciB3b3JkcyBsaWtlICphaW4ndCogYW5kIHBocmFzZXMgdGFrZW4gZnJvbSBvdGhlciBsYW5ndWFnZXMuDQoNCkJyaW5naW5nIGluIGEgc2VudGltZW50IGRpY3Rpb25hcnkgbWF5IGFkZCBwcmVkaWN0aXZlIHBvd2VyIHRvIHNvbWUgbWVhc3VyZXMsIGFsb25nIHdpdGggaGVscGluZyB0byBjb3VudCBtaXNzLXNwZWxsaW5ncy4gV29yZCBlbWJlZGRpbmdzIGxpa2UgR2xvdmUgb3IgSHVnZ2luZ2ZhY2UgY291bGQgYWxzbyBiZXR0ZXIgY2hhcmFjdGVyaXplIG1lYW5pbmcuIA0KDQojIyBNb2RlbGluZyANCg0KTWFueSBkZXZlbG9wZXJzIGFyZSB0ZW1wdGVkIHRvIGp1bXAgaW50byAoQ05OIC8gTFNUTSkgZGVlcCBsZWFybmluZywgYnV0IHRoZSBudW1iZXIgb2YgZXNzYXlzIGlzIHJlYWxseSBwcmV0dHkgc21hbGwgZm9yIGEgZGVlcCBsZWFybmluZyBydW4gb24gdGhlaXIgb3duLiBBbm90aGVyIGFwcHJvYWNoIGNvdWxkIGxldmVyYWdlIHRoZSBwcmUtdHJhaW5lZCBlbWJlZGRpbmdzIGluIG9uZSBvZiB0aGUgW0JFUlRdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0JFUlRfKGxhbmd1YWdlX21vZGVsKSlzLiBUaGUgY3VycmVudCBLYWdnbGUgbGVhZGVyYm9hcmQgaXMgZnVsbCBvZiB0aGVtLiBFdmVuIHNvLCB0aGUgc3RhbmRpbmdzIHdpbGwgc2hpZnQgaW4gYSBodWdlIHdheSBhZnRlciB0aGUgZnVsbCB0ZXN0IHNldCBjYWxjdWxhdGlvbnMgYXBwZWFyIGJlY2F1c2Ugb2Ygb3ZlcmZpdHRpbmcgYW5kIGltYmFsYW5jZS4NCg0KVGhlIEdsb1ZlIHByZS10cmFpbmVkIHdvcmQgdmVjdG9ycyBwcm92aWRlIHdvcmQgZW1iZWRkaW5ncyBjcmVhdGVkIG9uIGV4aXN0aW5nIGRvY3VtZW50IGNvcnB1cywgYW5kIGFyZSBwcm92aWRlZCBhcyBhIHByZS1wcm9jZXNzb3IgdXNpbmcgdmFyeWluZyBudW1iZXJzIG9mIHRva2Vucy4gU2VlIFtKZWZmcmV5IFBlbm5pbmd0b24sIFJpY2hhcmQgU29jaGVyLCBhbmQgQ2hyaXN0b3BoZXIgRC4gTWFubmluZy4gMjAxNC4gR2xvVmU6IEdsb2JhbCBWZWN0b3JzIGZvciBXb3JkIFJlcHJlc2VudGF0aW9uLl0oaHR0cHM6Ly9ubHAuc3RhbmZvcmQuZWR1L3Byb2plY3RzL2dsb3ZlLykgZm9yIGRldGFpbHMuDQoNCkkgc3BlbnQgYSBmZXcgZXZlbmluZ3Mgd2l0aCB0aGUgdG9yY2gvYGJydWxlZWAgYXBwcm9hY2ggb24gYHRpZHltb2RlbHNgLCBidXQgZGlzY292ZXJlZCB0aGF0IG1vZGVsaW5nIHRpbWUgY29uc3VtZWQgd291bGQgYmUgc2lnbmlmaWNhbnQgYW5kIHRoZSByZXN1bHRzIHdlcmUgbm90IGJldHRlciB0aGFuIHJhbmRvbSBmb3Jlc3RzIG9uIGVuZ2luZWVyZWQgZmVhdHVyZXMgd2l0aCBjYXNlIHdlaWdodHMgYmFzZWQgb24gaW52ZXJzZSBwcm9wb3J0aW9ucyBvZiB0aGUgbWV0cmljIHZhbHVlcy4NCg0KSSB1bHRpbWF0ZWx5IHNldHRsZWQgb24gdGhlIGB4Z2Jvb3N0YCBhcHByb2FjaCBoZXJlLiBObyBkb3VidCBpdCBjYW4gc3RpbGwgb3ZlcmZpdCBvbiBzcGVjaWZpYyB3b3JkcyBhbmQgdGV4dCBhdHRyaWJ1dGVzLCBsaWtlIHRoZSBudW1iZXIgb2YgdW5pcXVlIHdvcmRzLiANCg0KT25lIGxhc3QgcG9pbnQuIEkgYmVsaWV2ZSB0aGF0IHRoZSBFc3NheSBTY29yaW5nIGlzIGRvbmUgYnkgaHVtYW5zIGluIGEgd2F5IHdoZXJlIHRoZSBtZXRyaWNzIGFyZSBqdWRnZWQgdG9nZXRoZXIsIGFuZCBub3QgZW50aXJlbHkgaW5kZXBlbmRlbnRseS4gSW4gb3RoZXIgd29yZHMsIGxvdyBgZ3JhbW1hcmAgYW5kIGxvdyBgY29oZXNpb25gIGFyZSByZWxhdGVkLg0KDQpgYGB7cn0NCiN8IGxhYmVsOiBwdWxsIHBhY2thZ2VzIGludG8gbWVtb3J5DQoNCnN1cHByZXNzUGFja2FnZVN0YXJ0dXBNZXNzYWdlcyh7DQpsaWJyYXJ5KHRpZHl2ZXJzZSkNCiAgDQpsaWJyYXJ5KHRpZHltb2RlbHMpDQpsaWJyYXJ5KHRleHQydmVjKSAjIGZvciB0b3BpYyBtb2RlbGluZw0KDQpsaWJyYXJ5KHRpZHl0ZXh0KQ0KbGlicmFyeSh0ZXh0cmVjaXBlcykNCg0KfSkNCg0KdGlkeW1vZGVsczo6dGlkeW1vZGVsc19wcmVmZXIoKQ0KDQp0aGVtZV9zZXQodGhlbWVfbWluaW1hbCgpKQ0KDQpgYGANCg0KTGV0J3MgcmVhZCB0aGUgZGF0YSBmcm9tIEthZ2dsZSdzIGNzdidzIGludG8gZGF0YWZyYW1lcy4gDQoNCmBgYHtyfQ0KI3wgbGFiZWw6IHJlYWQgZGF0YSBmaWxlcywgYWRkIHByZQ0KDQp0cmFpbl9lc3NheXNfcmF3IDwtIHJlYWRfY3N2KGhlcmU6OmhlcmUoImRhdGEiLCJ0cmFpbi5jc3YiKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICBzaG93X2NvbF90eXBlcyA9IEZBTFNFKSANCg0Kc3VibWl0X2Vzc2F5c19yYXcgPC0gcmVhZF9jc3YoaGVyZTo6aGVyZSgiZGF0YSIsInRlc3QuY3N2IiksDQogICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dfY29sX3R5cGVzID0gRkFMU0UpIA0KDQpvdXRjb21lcyA9IG5hbWVzKHRyYWluX2Vzc2F5c19yYXcpWzM6OF0NCg0KZGltKHRyYWluX2Vzc2F5c19yYXcpDQoNCmBgYA0KDQpUaGUgZXNzYXkgbWV0cmljcyBzY29yZSBkaXN0cmlidXRpb25zIHJlc2VtYmxlIG9yZGluYWwgTGlrZXJ0IHNjYWxlcy4gT25lIHdheSB0byBpbGx1c3RyYXRlIHRoZSBjb3VudHMgYXQgZWFjaCBsZXZlbCBpcyB0aGlzIGJhciBjaGFydDoNCg0KYGBge3J9DQojfCBsYWJlbDogbGlrZXJ0DQoNCnN0YWdlMSA8LSB0cmFpbl9lc3NheXNfcmF3IHw+DQogIHNlbGVjdChjb2hlc2lvbjpjb252ZW50aW9ucykgfD4NCiAgcGl2b3RfbG9uZ2VyKGNvbHMgPSBldmVyeXRoaW5nKCksDQogICAgICAgICAgICAgICBuYW1lc190byA9ICJtZXRyaWMiLA0KICAgICAgICAgICAgICAgdmFsdWVzX3RvID0gImFucyIpIHw+DQogIGdyb3VwX2J5KGFucywgbWV0cmljKSB8Pg0KICBzdW1tYXJpemUobiA9IG4oKSwNCiAgICAgICAgICAgIC5ncm91cHMgPSAiZHJvcCIpIHw+DQogIGdyb3VwX2J5KG1ldHJpYykgfD4NCiAgbXV0YXRlKHBlciA9IG4gLyBzdW0obikpIHw+DQogIG11dGF0ZSgNCiAgICB0ZXh0ID0gcGFzdGUwKGZvcm1hdEMoDQogICAgICAxMDAgKiBwZXIsIGZvcm1hdCA9ICJmIiwgZGlnaXRzID0gMA0KICAgICksICIlIiksDQogICAgY3MgPSBjdW1zdW0ocGVyKSwNCiAgICBvZmZzZXQgPSBzdW0ocGVyWzE6KGZsb29yKG4oKSAvIDIpKV0pICsgKG4oKSAlJSAyKSAqIDAuNSAqIChwZXJbY2VpbGluZyhuKCkgLw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMildKSwNCiAgICB4bWF4ID0gLW9mZnNldCArIGNzLA0KICAgIHhtaW4gPSB4bWF4IC0gcGVyDQogICkgfD4NCiAgdW5ncm91cCgpDQoNCmdhcCA8LSAwLjINCg0Kc3RhZ2UyIDwtIHN0YWdlMSAlPiUNCiAgbGVmdF9qb2luKA0KICAgIHN0YWdlMSAlPiUNCiAgICAgIGdyb3VwX2J5KG1ldHJpYykgJT4lDQogICAgICBzdW1tYXJpemUobWF4LnhtYXggPSBtYXgoeG1heCkpICU+JQ0KICAgICAgbXV0YXRlKHIgPSByb3dfbnVtYmVyKG1heC54bWF4KSksDQogICAgYnkgPSAibWV0cmljIg0KICApICU+JQ0KICBhcnJhbmdlKGRlc2MocikpICU+JQ0KICBtdXRhdGUoeW1pbiA9IHIgLSAoMSAtIGdhcCkgLyAyLA0KICAgICAgICAgeW1heCA9IHIgKyAoMSAtIGdhcCkgLyAyKQ0KDQpnZ3Bsb3Qoc3RhZ2UyKSArDQogIGdlb21fdmxpbmUoeGludGVyY2VwdCA9IDApICsNCiAgZ2VvbV9yZWN0KGFlcygNCiAgICB4bWluID0geG1pbiwNCiAgICB4bWF4ID0geG1heCwNCiAgICB5bWluID0geW1pbiwNCiAgICB5bWF4ID0geW1heCwNCiAgICBmaWxsID0gZmFjdG9yKGFucykNCiAgKSkgKw0KICBnZW9tX3RleHQoYWVzKA0KICAgIHggPSAoeG1pbiArIHhtYXgpIC8gMiwNCiAgICB5ID0gKHltaW4gKyB5bWF4KSAvIDIsDQogICAgbGFiZWwgPSB0ZXh0DQogICksDQogIHNpemUgPSAzLA0KICBjaGVja19vdmVybGFwID0gVFJVRSkgKw0KICBzY2FsZV94X2NvbnRpbnVvdXMoDQogICAgIiIsDQogICAgbGFiZWxzID0gcGVyY2VudCwNCiAgICBicmVha3MgPSBzZXEoLTAuNiwgMC42NSwgbGVuID0gNiksDQogICAgbGltaXRzID0gYygtMC42LCAwLjY1KQ0KICApICsgICBzY2FsZV95X2NvbnRpbnVvdXMoDQogICAgIiIsDQogICAgYnJlYWtzID0gMTpuX2Rpc3RpbmN0KHN0YWdlMiRtZXRyaWMpLA0KICAgIGxhYmVscyA9IHJldihzdGFnZTIgJT4lIGRpc3RpbmN0KG1ldHJpYykgJT4lIC4kbWV0cmljKQ0KICApICsNCiAgc2NhbGVfZmlsbF9icmV3ZXIoIlNjb3JlIiwgcGFsZXR0ZSA9ICJCckJHIikgKw0KICBsYWJzKHRpdGxlID0gIlRyYWluaW5nIHNldCBFc3NheSBSYXRpbmdzIikNCg0KYGBgDQoNCkVzc2F5cyB3aXRoIG1vcmUgd29yZHMsIG9yIG1vcmUgc2VudGVuY2VzLCBkbyBub3QgbmVjZXNzYXJpbHkgc2NvcmUgYmV0dGVyLiANCg0KYGBge3J9DQojfCBsYWJlbDogb3V0Y29tZSB2YXJpYWJsZSBkaXN0cmlidXRpb25zDQoNCnRlX2xvbmcgPC0gdHJhaW5fZXNzYXlzX3JhdyB8Pg0KICBwaXZvdF9sb25nZXIoY29scyA9IGNvaGVzaW9uOmNvbnZlbnRpb25zLA0KICAgICAgICAgICAgICAgbmFtZXNfdG8gPSAibWV0cmljIiwNCiAgICAgICAgICAgICAgIHZhbHVlc190byA9ICJ2YWx1ZSIpIHw+DQogIG11dGF0ZShtZXRyaWMgPSBhcy5mYWN0b3IobWV0cmljKSwNCiAgICAgICAgIHZhbHVlID0gYXMuZmFjdG9yKHZhbHVlKSkNCg0KdGVfbG9uZyB8PiANCiAgZ3JvdXBfYnkobl93b3JkcyA9IGdncGxvdDI6OmN1dF9pbnRlcnZhbCgNCiAgICB0b2tlbml6ZXJzOjpjb3VudF93b3JkcyhmdWxsX3RleHQpLCANCiAgICBsZW5ndGggPSAyMDApLA0KICAgIG1ldHJpYywgdmFsdWUpIHw+IA0KICBzdW1tYXJpc2UoYE51bWJlciBvZiBlc3NheXNgID0gbigpLA0KICAgICAgICAgICAgLmdyb3VwcyA9ICJkcm9wIikgfD4gDQogIGdncGxvdChhZXMobl93b3JkcywgYE51bWJlciBvZiBlc3NheXNgLCBmaWxsID0gYXMuZmFjdG9yKHZhbHVlKSkpICsNCiAgZ2VvbV9jb2woKSArDQogIHNjYWxlX3hfZGlzY3JldGUoZ3VpZGUgPSBndWlkZV9heGlzKG4uZG9kZ2UgPSAyKSkgKw0KICBmYWNldF93cmFwKHZhcnMobWV0cmljKSkgKw0KICBzY2FsZV9maWxsX2JyZXdlcigiU2NvcmUiLCBwYWxldHRlID0gIkJyQkciKSArDQogIGxhYnMoeCA9ICJOdW1iZXIgb2Ygd29yZHMgcGVyIGVzc2F5IiwNCiAgICAgICB5ID0gIk51bWJlciBvZiBlc3NheXMiLA0KICAgICAgIGZpbGwgPSAiU2NvcmUiKQ0KDQp0ZV9sb25nIHw+IA0KICBncm91cF9ieShuX3dvcmRzID0gZ2dwbG90Mjo6Y3V0X2ludGVydmFsKA0KICAgIHRva2VuaXplcnM6OmNvdW50X3NlbnRlbmNlcyhmdWxsX3RleHQpLCBsZW5ndGggPSAyMCksDQogICAgbWV0cmljLCB2YWx1ZSkgfD4gDQogIHN1bW1hcmlzZShgTnVtYmVyIG9mIGVzc2F5c2AgPSBuKCksDQogICAgICAgICAgICAuZ3JvdXBzID0gImRyb3AiKSB8PiANCiAgZ2dwbG90KGFlcyhuX3dvcmRzLCBgTnVtYmVyIG9mIGVzc2F5c2AsIGZpbGwgPSBhcy5mYWN0b3IodmFsdWUpKSkgKw0KICBnZW9tX2NvbCgpICsNCiAgc2NhbGVfeF9kaXNjcmV0ZShndWlkZSA9IGd1aWRlX2F4aXMobi5kb2RnZSA9IDIpKSArDQogIGZhY2V0X3dyYXAodmFycyhtZXRyaWMpKSArDQogIHNjYWxlX2ZpbGxfYnJld2VyKCJTY29yZSIsIHBhbGV0dGUgPSAiQnJCRyIpICsNCiAgbGFicyh4ID0gIk51bWJlciBvZiBzZW50ZW5jZXMgcGVyIGVzc2F5IiwNCiAgICAgICB5ID0gIk51bWJlciBvZiBlc3NheXMiLA0KICAgICAgIGZpbGwgPSAiU2NvcmUiKQ0KDQpgYGANCg0KV2hhdCB3b3JkcyBmcm9tIHRoZSBkaWFsb2d1ZSBoYXZlIHRoZSBoaWdoZXN0IGxvZyBvZGRzIG9mIGNvbWluZyBmcm9tIGVhY2ggbGV2ZWwgb2YgZWFjaCBvdXRjb21lPyAgRG8gdGhlIGluZGl2aWR1YWwgd29yZHMgaGF2ZSBwcmVkaWN0aXZlIHBvd2VyPw0KDQpgYGB7cn0NCiN8IGxhYmVsOiBsb2cgb2Rkcw0KDQpwbG90X2xvZ19vZGRzIDwtIGZ1bmN0aW9uKG91dGNvbWUgPSAiY29oZXNpb24iKXsNCg0KdHJhaW5fZXNzYXlzX3JhdyB8Pg0KICB0aWR5dGV4dDo6dW5uZXN0X3Rva2Vucyh3b3JkLCBmdWxsX3RleHQpIHw+IA0KICBjb3VudChsZXZlbCA9IGZhY3RvciguZGF0YVtbb3V0Y29tZV1dKSwgd29yZCwgc29ydCA9IFRSVUUpIHw+ICAgDQogIHRpZHlsbzo6YmluZF9sb2dfb2RkcyhsZXZlbCwgd29yZCwgbikgfD4gDQogIGZpbHRlcihuID4gMjApIHw+IA0KICBncm91cF9ieShsZXZlbCkgfD4gDQogIHNsaWNlX21heChsb2dfb2Rkc193ZWlnaHRlZCwgbiA9IDEwKSB8PiANCiAgbXV0YXRlKHdvcmQgPSByZW9yZGVyX3dpdGhpbih3b3JkLCBsb2dfb2Rkc193ZWlnaHRlZCwgbGV2ZWwpKSAlPiUNCiAgZ2dwbG90KGFlcyhsb2dfb2Rkc193ZWlnaHRlZCwgd29yZCwgZmlsbCA9IGxldmVsKSkgKw0KICBnZW9tX2NvbChzaG93LmxlZ2VuZCA9IEZBTFNFKSArDQogIGZhY2V0X3dyYXAodmFycyhsZXZlbCksIHNjYWxlcyA9ICJmcmVlIikgKw0KICBzY2FsZV9maWxsX2JyZXdlcigiU2NvcmUiLCBwYWxldHRlID0gIkJyQkciKSArDQogIHNjYWxlX3lfcmVvcmRlcmVkKCkgKw0KICBsYWJzKHkgPSBOVUxMLCB0aXRsZSA9IGdsdWU6OmdsdWUoIntvdXRjb21lfSBsb2cgb2RkcyB3b3JkcyIpKSAgDQogICAgDQp9DQoNCm1hcChvdXRjb21lcywgcGxvdF9sb2dfb2RkcykNCg0KYGBgDQoNClRvIHNvbWUgZXh0ZW50LCB0aGUgYW5zd2VyIG1heSBiZSB5ZXMuDQoNCkxldCdzIGFsc28gdGFrZSBhIGxvb2sgYXQgb3V0Y29tZSBwYWlyd2lzZSBjb3JyZWxhdGlvbnMuDQoNCmBgYHtyfQ0KI3wgbGFiZWw6IHByZWRpY3RvciBhbmQgb3V0Y29tZSBwYWlyd2lzZSBjb3JyZWxhdGlvbnMNCg0KdHJhaW5fZXNzYXlzX3JhdyB8PiANCiAgY29ycnI6OmNvcnJlbGF0ZSgNCiAgICBxdWlldCA9IFRSVUUNCiAgKSAlPiUNCiAgY29ycnI6OnJlYXJyYW5nZSgpICU+JQ0KICBjb3Jycjo6c2hhdmUoKSAlPiUNCiAgY29ycnI6OnJwbG90KHByaW50X2NvciA9IFRSVUUsDQogICAgICAgICAgICAgICBjb2xvcnMgPSBicmV3ZXJfcGFsKHBhbGV0dGUgPSAiQnJCRyIpKDUpKSArDQogIHNjYWxlX3hfZGlzY3JldGUoZ3VpZGUgPSBndWlkZV9heGlzKG4uZG9kZ2UgPSAzKSkNCg0KYGBgDQoNCiogICBWb2NhYnVsYXJ5IGFuZCBQaHJhc2VvbG9neSAoMC43NCkgdHJhY2sgdG9nZXRoZXIuDQoqICAgUGhyYXNlb2xvZ3kgYW5kIFN5bnRheCAoMC43MykgdHJhY2sgdG9nZXRoZXIuDQoqICAgUHJhc2VvbG9neSBhbmQgR3JhbW1hciAoMC43MikgdHJhY2sgdG9nZXRoZXIuDQoNCkF2b2lkaW5nIG92ZXJmaXR0aW5nIHRvIHRoZSB0cmFpbmluZyBkYXRhIGlzIGNyaXRpY2FsIHRvIGFjaGlldmluZyBhIHN0cm9uZyBzY29yZS4gV2UgYXJlIGdvaW5nIHRvIHVzZSByZXNhbXBsaW5nIHRvIGhhdmUgc29tZSBpbmRpY2F0aW9uIHRoYXQgb3VyIG1vZGVsIGdlbmVyYWxpemVzIHRvIG5ldyBlc3NheXMuIENhcmUgbXVzdCBiZSBleGVyY2lzZWQgdG8gYmUgc3VyZSB0aGF0IG1lbWJlcnMgb2YgdGhlIGhvbGQgb3V0IGZvbGRzIGFyZSBub3QgYWxzbyBmb3VuZCBpbiB0aGUgdHJhaW5pbmcgZm9sZHMuDQoNCkxhdGVudCBEaXJpY2hsZXQgYWxsb2NhdGlvbiAoTERBKSBpcyBhbiB1bnN1cGVydmlzZWQgZ2VuZXJhdGl2ZSBzdGF0aXN0aWNhbCBtb2RlbCB0aGF0IGV4cGxhaW5zIGEgc2V0IG9mIG9ic2VydmF0aW9ucyB0aHJvdWdoIHVub2JzZXJ2ZWQgZ3JvdXBzLCBhbmQgdGhlIGNvbnRlbnQgb2YgZWFjaCBncm91cCBtYXkgZXhwbGFpbiB3aHkgc29tZSBwYXJ0cyBvZiB0aGUgZGF0YSBhcmUgc2ltaWxhci4NCg0KSSdkIGxpa2UgdG8gZXhwbG9yZSB0aGUgdXNlIG9mIGBpbnZlcnNlIHByb2JhYmlsaXR5IHdlaWdodHNgIGJlY2F1c2UgdGhlcmUgYXJlIHNvIGZldyBlc3NheXMgd2l0aCBzY29yZXMgYXQgdGhlIGhpZ2hlc3QgYW5kIGxvd2VzdCBsZXZlbHMuIFdoZW4gc3VydmV5IHJlc3BvbmRlbnRzIGhhdmUgZGlmZmVyZW50IHByb2JhYmlsaXRpZXMgb2Ygc2VsZWN0aW9uLCAoaW52ZXJzZSkgcHJvYmFiaWxpdHkgd2VpZ2h0cyBoZWxwIHJlZHVjZSBiaWFzIGluIHRoZSByZXN1bHRzLg0KDQpJIGFtIG1ha2luZyB1cyBvZiBtZXRhcHJvZ3JhbW1pbmcgdGVjaG5pcXVlcyB0byBwYXNzIHRleHQgdmVjdG9yIGNvbHVtbiBuYW1lcyBpbnRvIHRoZSBmb3JtdWxhIGFuZCBjYXNlIHdlaWdodHMgZnVuY3Rpb25zIHRvIHJlLXVzZSB0aGVtIGZvciBlYWNoIG1ldHJpYy4NCg0KDQpgYGB7cn0NCiN8IGxhYmVsOiBwcmVwcm9jZXNzb3JzDQoNCg0KdG9rZW5zID0gdGV4dDJ2ZWM6OndvcmRfdG9rZW5pemVyKHRvbG93ZXIodHJhaW5fZXNzYXlzX3JhdyRmdWxsX3RleHQpKQ0KDQppdCA9IHRleHQydmVjOjppdG9rZW4odG9rZW5zLCBpZHMgPSB0cmFpbl9lc3NheXNfcmF3JHRleHRfaWQsIHByb2dyZXNzYmFyID0gRkFMU0UpDQoNCnYgPSB0ZXh0MnZlYzo6Y3JlYXRlX3ZvY2FidWxhcnkoaXQpDQoNCmR0bSA9IHRleHQydmVjOjpjcmVhdGVfZHRtKGl0LCB0ZXh0MnZlYzo6dm9jYWJfdmVjdG9yaXplcih2KSwgdHlwZSA9ICJSc3BhcnNlTWF0cml4IikNCg0KbGRhX21vZGVsIDwtIHRleHQydmVjOjpMREEkbmV3KG5fdG9waWNzID0gMzApDQoNCmNhc2Vfd2VpZ2h0X2J1aWxkZXIgPC0gZnVuY3Rpb24oZGF0YSwgb3V0Y29tZSkgew0KICBkYXRhICU+JQ0KICAgIGlubmVyX2pvaW4oZGF0YSAlPiUNCiAgICAgICAgICAgICAgICAgY291bnQoLmRhdGFbW291dGNvbWVdXSwNCiAgICAgICAgICAgICAgICAgICAgICAgbmFtZSA9ICJjYXNlX3d0cyIpLA0KICAgICAgICAgICAgICAgYnkgPSBnbHVlOjpnbHVlKCJ7IG91dGNvbWUgfSIpKSAlPiUNCiAgICBtdXRhdGUoY2FzZV93dHMgPSBpbXBvcnRhbmNlX3dlaWdodHMobWF4KGNhc2Vfd3RzKSAvIGNhc2Vfd3RzKSkNCn0NCg0KcmVjaXBlX2J1aWxkZXIgPC0gZnVuY3Rpb24ob3V0Y29tZSA9ICJjb2hlc2lvbiIpIHsNCiAgcmVjIDwtIHJlY2lwZSgNCiAgICBmb3JtdWxhKGdsdWU6OmdsdWUoInsgb3V0Y29tZSB9IH4gLiIpKSwNCiAgICBkYXRhID0gdHJhaW5fZXNzYXlzX3JhdyB8Pg0KICAgICAgc2VsZWN0KHsNCiAgICAgICAgew0KICAgICAgICAgIG91dGNvbWUNCiAgICAgICAgfQ0KICAgICAgfSwgZnVsbF90ZXh0KSB8Pg0KICAgICAgY2FzZV93ZWlnaHRfYnVpbGRlcihvdXRjb21lKQ0KICApIHw+DQogICAgc3RlcF90ZXh0ZmVhdHVyZShmdWxsX3RleHQsDQogICAgICAgICAgICAgICAgICAgICBrZWVwX29yaWdpbmFsX2NvbHMgPSBUUlVFKSB8Pg0KICAgIHN0ZXBfcmVuYW1lX2F0KHN0YXJ0c193aXRoKCJ0ZXh0ZmVhdHVyZV8iKSwNCiAgICAgICAgICAgICAgICAgICBmbiA9IH4gZ3N1YigidGV4dGZlYXR1cmVfZnVsbF90ZXh0XyIsICIiLCAuKSkgJT4lDQogICAgc3RlcF90b2tlbml6ZShmdWxsX3RleHQpICU+JQ0KICAgIHN0ZXBfbGRhKGZ1bGxfdGV4dCwNCiAgICAgICAgICAgICBsZGFfbW9kZWxzID0gbGRhX21vZGVsLA0KICAgICAgICAgICAgIGtlZXBfb3JpZ2luYWxfY29scyA9IFRSVUUpICU+JQ0KICAgIHN0ZXBfd29yZF9lbWJlZGRpbmdzKA0KICAgICAgZnVsbF90ZXh0LA0KICAgICAgYWdncmVnYXRpb24gPSAic3VtIiwNCiAgICAgIGVtYmVkZGluZ3MgPSB0ZXh0ZGF0YTo6ZW1iZWRkaW5nX2dsb3ZlMjdiKGRpbWVuc2lvbnMgPSAyMDApDQogICAgKSB8Pg0KICAgIHN0ZXBfenYoYWxsX251bWVyaWNfcHJlZGljdG9ycygpKSB8Pg0KICAgIHN0ZXBfbm9ybWFsaXplKGFsbF9udW1lcmljX3ByZWRpY3RvcnMoKSkNCiAgDQogIHJldHVybihyZWMpDQogIA0KfQ0KDQoNCm11bHRpY2xhc3NfcmVjaXBlX2J1aWxkZXIgPC0gZnVuY3Rpb24ob3V0Y29tZSA9ICJjb2hlc2lvbiIpIHsNCiAgcmVjIDwtIHJlY2lwZShmb3JtdWxhKGdsdWU6OmdsdWUoInsgb3V0Y29tZSB9IH4gLiIpKSwNCiAgICAgICAgICAgICAgICBkYXRhID0gY2xhc3NpZmljYXRpb25fdHJhaW5fZGYpIHw+DQogICAgc3RlcF90ZXh0ZmVhdHVyZShmdWxsX3RleHQsDQogICAgICAgICAgICAgICAgICAgICBrZWVwX29yaWdpbmFsX2NvbHMgPSBUUlVFKSB8Pg0KICAgIHN0ZXBfcmVuYW1lX2F0KHN0YXJ0c193aXRoKCJ0ZXh0ZmVhdHVyZV8iKSwNCiAgICAgICAgICAgICAgICAgICBmbiA9IH4gZ3N1YigidGV4dGZlYXR1cmVfZnVsbF90ZXh0XyIsICIiLCAuKSkgJT4lDQogICAgc3RlcF90b2tlbml6ZShmdWxsX3RleHQpICU+JQ0KICAgIHN0ZXBfbGRhKGZ1bGxfdGV4dCwNCiAgICAgICAgICAgICBsZGFfbW9kZWxzID0gbGRhX21vZGVsLA0KICAgICAgICAgICAgIGtlZXBfb3JpZ2luYWxfY29scyA9IFRSVUUpICU+JQ0KICAgIHN0ZXBfd29yZF9lbWJlZGRpbmdzKA0KICAgICAgZnVsbF90ZXh0LA0KICAgICAgYWdncmVnYXRpb24gPSAic3VtIiwNCiAgICAgIGVtYmVkZGluZ3MgPSB0ZXh0ZGF0YTo6ZW1iZWRkaW5nX2dsb3ZlMjdiKGRpbWVuc2lvbnMgPSAyMDApDQogICAgKSB8Pg0KICAgIHN0ZXBfenYoYWxsX251bWVyaWNfcHJlZGljdG9ycygpKSB8Pg0KICAgIHN0ZXBfbm9ybWFsaXplKGFsbF9udW1lcmljX3ByZWRpY3RvcnMoKSkNCiAgDQogIHJldHVybihyZWMpDQogIA0KfQ0KDQpwbG90X3ByZWRzIDwtIGZ1bmN0aW9uKGRhdCwgb3V0Y29tZSl7DQoNCmRhdCB8PiANCiAgZ2dwbG90KGFlcyh4ID0ge3tvdXRjb21lfX0sIHkgPSAucHJlZCkpICsNCiAgZ2VvbV9wb2ludChhbHBoYSA9IDAuMTUpICsNCiAgZ2VvbV9hYmxpbmUoY29sb3IgPSAicmVkIikgKw0KICBjb29yZF9vYnNfcHJlZCgpIA0KDQp9DQoNCmBgYA0KDQpBcyBtZW50aW9uZWQgYWJvdmUsIHRoZSBtb2RlbCBzcGVjaWZpY2F0aW9uIGlzIGB4Z2Jvb3N0YCBmb3IgcmVncmVzc2lvbiB0byBwcmVkaWN0IGEgY29udGludW91cyBvdXRjb21lIHRoYXQgcmVzZW1ibGVzIG9yZGluYWwgY2xhc3Nlcy4gDQoNCmBgYHtyfQ0KI3wgbGFiZWw6IG1vZGVsIHNwZWNpZmljYXRpb24NCg0KeGdiX3NwZWMgPC0NCiAgYm9vc3RfdHJlZSgNCiAgICBtdHJ5ID0gNTAsICAjIDc1TA0KICAgIHRyZWVzID0gMTAwMEwsDQogICAgdHJlZV9kZXB0aCA9IDksICMgNkwNCiAgICBsZWFybl9yYXRlID0gMC4wMSwgICMgb3JpZ2luYWxseSAwLjENCiAgICBtaW5fbiA9IDM5TCwgICMgMjBMDQogICAgbG9zc19yZWR1Y3Rpb24gPSAwDQogICkgfD4gDQogIHNldF9lbmdpbmUoJ3hnYm9vc3QnKSB8PiANCiAgc2V0X21vZGUoJ3JlZ3Jlc3Npb24nKQ0KDQpzdm1fc3BlYyA8LSBzdm1fbGluZWFyKCkgfD4gDQogIHNldF9lbmdpbmUoIkxpYmxpbmVhUiIpIHw+IA0KICBzZXRfbW9kZSgiY2xhc3NpZmljYXRpb24iKSAgDQogIA0KDQpgYGANCg0KVG8gc3BlZWQgdGhlIGNvbXB1dGF0aW9ucyBsZXQncyBlbmFibGUgYSBwYXJhbGxlbCBiYWNrZW5kLiAgDQoNCmBgYHtyfQ0KI3wgbGFiZWw6IHBhcmFsbGVsIGFuZCB0dW5pbmcgc2V0dXANCg0KYWxsX2NvcmVzIDwtIHBhcmFsbGVsbHk6OmF2YWlsYWJsZUNvcmVzKG9taXQgPSAxKQ0KYWxsX2NvcmVzDQojICANCmZ1dHVyZTo6cGxhbigibXVsdGlzZXNzaW9uIiwgd29ya2VycyA9IGFsbF9jb3JlcykgIyBvbiBXaW5kb3dzDQoNCmBgYA0KDQojIyBNb2RlbGluZyB7LnRhYnNldH0NCg0KIyMjIENvaGVzaW9uDQoNCldlIGZpdCBmb3IgYGNvaGVzaW9uYCBmaXJzdCB1c2luZyBhbiB4Z2Jvb3N0IHJlZ3Jlc3Npb24sIHVzaW5nIGNhc2Ugd2VpZ2h0cyB0byBhZGp1c3QgZm9yIHRoZSBmcmVxdWVuY3kgb2Ygb2NjdXJyZW5jZSBvZiBlYWNoIHZhbHVlIG9mIGBjb2hlc2lvbmAuICANCg0KYGBge3J9DQojfCBsYWJlbDogZml0IGNvaGVzaW9uIHJlc2FtcGxlcyByZWdyZXNzaW9uDQoNCm91dGNvbWUgPC0gb3V0Y29tZXNbMV0NCg0KcmVncmVzc2lvbl90cmFpbl9kZiA8LSB0cmFpbl9lc3NheXNfcmF3ICB8PiANCiAgICAgICAgICAgICAgICBzZWxlY3QoISFvdXRjb21lLCBmdWxsX3RleHQpIHw+IA0KICAgICAgICAgICAgICAgIGNhc2Vfd2VpZ2h0X2J1aWxkZXIob3V0Y29tZSkNCg0KcmVncmVzc2lvbl93ZiA8LSB3b3JrZmxvdyhyZWNpcGVfYnVpbGRlcihvdXRjb21lID0gb3V0Y29tZSksIHhnYl9zcGVjKSB8PiANCiAgICAgICBhZGRfY2FzZV93ZWlnaHRzKGNhc2Vfd3RzKQ0KDQpmb2xkcyA8LSB2Zm9sZF9jdihyZWdyZXNzaW9uX3RyYWluX2RmLCBzdHJhdGEgPSB7e291dGNvbWV9fSkNCg0Kc2V0LnNlZWQoNDIpICANCnJzIDwtIGZpdF9yZXNhbXBsZXMoDQogIHJlZ3Jlc3Npb25fd2YsDQogIGZvbGRzLA0KICBjb250cm9sID0gY29udHJvbF9yZXNhbXBsZXMoc2F2ZV9wcmVkID0gVFJVRSkpDQoNCmNvbGxlY3RfbWV0cmljcyhycykgfD4gYXJyYW5nZShtZWFuKQ0KDQpjb2xsZWN0X3ByZWRpY3Rpb25zKHJzKSB8PiANCiAgcGxvdF9wcmVkcyguZGF0YVtbb3V0Y29tZV1dKSArDQogIGxhYnMoeSA9ICJQcmVkaWN0ZWQiLA0KICAgICAgIHRpdGxlID0gcGFzdGUwKG91dGNvbWUsICIgcHJlZGljdGlvbnMgYWdhaW5zdCBlc3NheXMgaW4gaGVsZCBvdXQgZm9sZHMiKSwNCiAgICAgICBzdWJ0aXRsZSA9ICJUaGUgaGlnaGVzdCBhbmQgbG93ZXN0IGVzc2F5cyBhcmUgbm90IHByZWRpY3RlZCB3ZWxsIikNCg0KdHJhaW5fZXNzYXlzX3Jhd1sNCg0KY29sbGVjdF9wcmVkaWN0aW9ucyhycykgfD4gDQogIG11dGF0ZShyZXNpZHVhbCA9IC5kYXRhW1tvdXRjb21lXV0gLSAucHJlZCkgfD4gDQogIGFycmFuZ2UoZGVzYyhhYnMocmVzaWR1YWwpKSkgfD4gDQogIHNsaWNlX2hlYWQobiA9IDUpIHw+IA0KICBwdWxsKC5yb3cpDQoNCiwgXSB8PiANCiAgc2VsZWN0KGZ1bGxfdGV4dCkNCg0KcmVncmVzc2lvbl9maXQgPC0gcGFyc25pcDo6Zml0KHJlZ3Jlc3Npb25fd2YsIA0KICAgICAgICAgICAgICAgICAgICAgcmVncmVzc2lvbl90cmFpbl9kZikNCg0KYGBgDQoNCklkZW50aWZ5aW5nIGV4YW1wbGVzIHdpdGggZXNwZWNpYWxseSBwb29yIHBlcmZvcm1hbmNlIGNhbiBoZWxwIHVzIGZvbGxvdyB1cCBhbmQgaW52ZXN0aWdhdGUgd2h5IHRoZXNlIHNwZWNpZmljIHByZWRpY3Rpb25zIGFyZSBwb29yLiBDb25jZXB0dWFsbHksIGl0cyBlYXN5IGZvciBhIGJhc2VsaW5lIGtub3ctbm90aGluZyBtb2RlbCB0byBhc3NpZ24gYWxsIGVzc2F5cyB0byB0aGUgbWVkaWFuIHNjb3JlIG9mIDMuIFRoZSBwcmVkaWN0aXZlIHBvd2VyIGlzIGluIHRoZSBhYmlsaXR5IHRvIG1vZGVsIHRoZSBlc3NheXMgdGhhdCBhcmUgbm90IDMgaW50byBidWNrZXRzIGhpZ2hlciBhbmQgbG93ZXIgdGhhbiAzLg0KDQpCZWNhdXNlIHRoZSByYXRpbmdzIGFyZSBhIGZvcm0gb2Ygb3JkaW5hbCB2YWx1ZSwgb3IgZXZlbiBhIGxpa2VydCBzY2FsZSwgd2Ugd2lsbCBlbnNlbWJsZSBhIHNlY29uZCBjbGFzc2lmaWNhdGlvbiBtb2RlbCB0aGF0IGluY2x1ZGVzIHRoZSBvdXRwdXQgb2YgdGhlIHJlZ3Jlc3Npb24uDQoNCmBgYHtyfQ0KI3wgbGFiZWw6IGZpdCBjb2hlc2lvbiByZXNhbXBsZXMgY2xhc3NpZmljYXRpb24NCg0KY2xhc3NpZmljYXRpb25fdHJhaW5fZGYgPC0gdHJhaW5fZXNzYXlzX3JhdyAgfD4gDQogICAgICAgICAgICAgICAgc2VsZWN0KHt7b3V0Y29tZX19LCBmdWxsX3RleHQpIHw+IA0KICAgICAgICAgICAgICAgIGJpbmRfY29scygNCiAgICAgICAgICAgICAgICAgIHByZWRpY3QoDQogICAgICAgICAgICAgICAgICAgIHJlZ3Jlc3Npb25fZml0LA0KICAgICAgICAgICAgICAgICAgICByZWdyZXNzaW9uX3RyYWluX2RmDQogICAgICAgICAgICAgICAgICApDQogICAgICAgICAgICAgICAgKSB8PiANCiAgICAgICAgICAgICAgIHJlbmFtZShyZWdyZXNzaW9uX3ByZWQgPSAucHJlZCkgfD4gDQogICAgICAgICAgICAgICBtdXRhdGUoe3tvdXRjb21lfX0gOj0gZmFjdG9yKC5kYXRhW1tvdXRjb21lXV0pKQ0KDQpjbGFzc2lmaWNhdGlvbl93ZiA8LSB3b3JrZmxvdyhtdWx0aWNsYXNzX3JlY2lwZV9idWlsZGVyKG91dGNvbWUgPSBvdXRjb21lKSwgc3ZtX3NwZWMpIA0KDQpmb2xkcyA8LSB2Zm9sZF9jdihjbGFzc2lmaWNhdGlvbl90cmFpbl9kZiwgc3RyYXRhID0gISFvdXRjb21lKQ0KDQpzZXQuc2VlZCg0MikgIA0KcnMgPC0gZml0X3Jlc2FtcGxlcygNCiAgY2xhc3NpZmljYXRpb25fd2YsDQogIGZvbGRzLA0KICBtZXRyaWNzID0gbWV0cmljX3NldChrYXAsIGFjY3VyYWN5KSwNCiAgY29udHJvbCA9IGNvbnRyb2xfcmVzYW1wbGVzKHNhdmVfcHJlZCA9IFRSVUUpKQ0KDQpjb2xsZWN0X21ldHJpY3MocnMpIHw+IGFycmFuZ2UobWVhbikNCg0KY29sbGVjdF9wcmVkaWN0aW9ucyhycykgfD4gDQogIGdncGxvdChhZXMoeCA9IC5kYXRhW1tvdXRjb21lXV0sIHkgPSBhYnMoYXMubnVtZXJpYyguZGF0YVtbb3V0Y29tZV1dKSAtIGFzLm51bWVyaWMoLnByZWRfY2xhc3MpKS8yKSkgKw0KICBnZW9tX3Zpb2xpbigpICsNCiAgc2NhbGVfeV9jb250aW51b3VzKGJyZWFrcyA9IHNlcSgtNSw1LDAuNSkpICsNCiAgbGFicyh5ID0gIlJlc2lkdWFscyIsDQogICAgICAgdGl0bGUgPSAie3tvdXRjb21lfX0gUmVzaWR1YWwgZXJyb3JzIGZvciBlc3NheXMgaW4gaGVsZCBvdXQgZm9sZHMiLA0KICAgICAgIHN1YnRpdGxlID0gIlRoZSBoaWdoZXN0IGFuZCBsb3dlc3QgZXNzYXlzIGFyZSBzdGlsbCBub3QgcHJlZGljdGVkIHdlbGwiKQ0KDQp0cmFpbl9lc3NheXNfcmF3Ww0KDQpjb2xsZWN0X3ByZWRpY3Rpb25zKHJzKSB8PiANCiAgbXV0YXRlKHJlc2lkdWFsID0gYXMubnVtZXJpYyguZGF0YVtbb3V0Y29tZV1dKSAtIGFzLm51bWVyaWMoLnByZWRfY2xhc3MpKSB8PiANCiAgYXJyYW5nZShkZXNjKGFicyhyZXNpZHVhbCkpKSB8PiANCiAgc2xpY2VfaGVhZChuID0gNSkgfD4gDQogIHB1bGwoLnJvdykNCg0KLCBdIHw+IA0KICBzZWxlY3QoZnVsbF90ZXh0LCB7e291dGNvbWV9fSkNCg0KY29sbGVjdF9wcmVkaWN0aW9ucyhycykgfD4gDQogIHJtc2UodHJ1dGggPSBhcy5udW1lcmljKC5kYXRhW1tvdXRjb21lXV0pLzIsIGVzdGltYXRlID0gYXMubnVtZXJpYygucHJlZF9jbGFzcykvMikNCg0KYGBgDQoNClJlc3VsdHMgaGVyZSBhcmVuJ3QgZ3JlYXQsIGJ1dCB0aGV5IGFyZSBtb3JlIGFyZSBsZXNzIGNvbXBldGl0aXZlIHdpdGggdGhlIGxlYWRlcmJvYXJkIGZpZ3VyZXMuDQoNClRoZSBmaW5hbCBmaXR0aW5nIGVuc2VtYmxlcyBib3RoIHRoZSByZWdyZXNzaW9uIGFuZCBjbGFzc2lmaWNhdGlvbiBmaXRzLCBhbmQgbWFrZXMgYSBwcmVkaWN0aW9uIG9uIHRoZSBzdWJtaXNzaW9uIGVzc2F5cy4NCg0KYGBge3J9DQojfCBsYWJlbDogZml0IGNvaGVzaW9uIGZpbmFsDQoNCmNsYXNzaWZpY2F0aW9uX2ZpdCA8LSBwYXJzbmlwOjpmaXQoY2xhc3NpZmljYXRpb25fd2YsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzaWZpY2F0aW9uX3RyYWluX2RmKQ0KDQpleHRyYWN0X2ZpdF9lbmdpbmUocmVncmVzc2lvbl9maXQpIHw+IA0KICB2aXA6OnZpcChudW1fZmVhdHVyZXMgPSAyMCkNCg0Kc3VibWlzc2lvbiA8LSBwcmVkaWN0KA0KICBjbGFzc2lmaWNhdGlvbl9maXQsDQogIA0KICBzdWJtaXRfZXNzYXlzX3JhdyB8Pg0KICAgIGJpbmRfY29scyhwcmVkaWN0KHJlZ3Jlc3Npb25fZml0LCBzdWJtaXRfZXNzYXlzX3JhdykpIHw+DQogICAgcmVuYW1lKHJlZ3Jlc3Npb25fcHJlZCA9IC5wcmVkKQ0KKSB8Pg0KICB0cmFuc211dGUoe3tvdXRjb21lfX0gOj0gLnByZWRfY2xhc3MpDQoNCnN1Ym1pc3Npb24NCg0KYGBgDQoNCiMjIyBTeW50YXgNCg0KV2UgZml0IGZvciBgc3ludGF4YCBmaXJzdCB1c2luZyBhbiB4Z2Jvb3N0IHJlZ3Jlc3Npb24sIHVzaW5nIGNhc2Ugd2VpZ2h0cyB0byBhZGp1c3QgZm9yIHRoZSBmcmVxdWVuY3kgb2Ygb2NjdXJyZW5jZSBvZiBlYWNoIHZhbHVlIG9mIGBzeW50YXhgLiAgDQoNCmBgYHtyfQ0KI3wgbGFiZWw6IGZpdCBzeW50YXggcmVzYW1wbGVzIHJlZ3Jlc3Npb24NCg0Kb3V0Y29tZSA8LSBvdXRjb21lc1syXQ0KDQpyZWdyZXNzaW9uX3RyYWluX2RmIDwtIHRyYWluX2Vzc2F5c19yYXcgIHw+IA0KICAgICAgICAgICAgICAgIHNlbGVjdCghIW91dGNvbWUsIGZ1bGxfdGV4dCkgfD4gDQogICAgICAgICAgICAgICAgY2FzZV93ZWlnaHRfYnVpbGRlcihvdXRjb21lKQ0KDQpyZWdyZXNzaW9uX3dmIDwtIHdvcmtmbG93KHJlY2lwZV9idWlsZGVyKG91dGNvbWUgPSBvdXRjb21lKSwgeGdiX3NwZWMpIHw+IA0KICAgICAgIGFkZF9jYXNlX3dlaWdodHMoY2FzZV93dHMpDQoNCmZvbGRzIDwtIHZmb2xkX2N2KHJlZ3Jlc3Npb25fdHJhaW5fZGYsIHN0cmF0YSA9IHt7b3V0Y29tZX19KQ0KDQpzZXQuc2VlZCg0MikgIA0KcnMgPC0gZml0X3Jlc2FtcGxlcygNCiAgcmVncmVzc2lvbl93ZiwNCiAgZm9sZHMsDQogIGNvbnRyb2wgPSBjb250cm9sX3Jlc2FtcGxlcyhzYXZlX3ByZWQgPSBUUlVFKSkNCg0KY29sbGVjdF9tZXRyaWNzKHJzKSB8PiBhcnJhbmdlKG1lYW4pDQoNCmNvbGxlY3RfcHJlZGljdGlvbnMocnMpIHw+IA0KICBwbG90X3ByZWRzKC5kYXRhW1tvdXRjb21lXV0pICsNCiAgbGFicyh5ID0gIlByZWRpY3RlZCIsDQogICAgICAgdGl0bGUgPSBwYXN0ZTAob3V0Y29tZSwgIiBwcmVkaWN0aW9ucyBhZ2FpbnN0IGVzc2F5cyBpbiBoZWxkIG91dCBmb2xkcyIpLA0KICAgICAgIHN1YnRpdGxlID0gIlRoZSBoaWdoZXN0IGFuZCBsb3dlc3QgZXNzYXlzIGFyZSBub3QgcHJlZGljdGVkIHdlbGwiKQ0KDQoNCnRyYWluX2Vzc2F5c19yYXdbDQoNCmNvbGxlY3RfcHJlZGljdGlvbnMocnMpIHw+IA0KICBtdXRhdGUocmVzaWR1YWwgPSAuZGF0YVtbb3V0Y29tZV1dIC0gLnByZWQpIHw+IA0KICBhcnJhbmdlKGRlc2MoYWJzKHJlc2lkdWFsKSkpIHw+IA0KICBzbGljZV9oZWFkKG4gPSA1KSB8PiANCiAgcHVsbCgucm93KQ0KDQosIF0gfD4gDQogIHNlbGVjdChmdWxsX3RleHQpDQoNCnJlZ3Jlc3Npb25fZml0IDwtIHBhcnNuaXA6OmZpdChyZWdyZXNzaW9uX3dmLCANCiAgICAgICAgICAgICAgICAgICAgIHJlZ3Jlc3Npb25fdHJhaW5fZGYpDQoNCmBgYA0KDQpJZGVudGlmeWluZyBleGFtcGxlcyB3aXRoIGVzcGVjaWFsbHkgcG9vciBwZXJmb3JtYW5jZSBjYW4gaGVscCB1cyBmb2xsb3cgdXAgYW5kIGludmVzdGlnYXRlIHdoeSB0aGVzZSBzcGVjaWZpYyBwcmVkaWN0aW9ucyBhcmUgcG9vci4gQ29uY2VwdHVhbGx5LCBpdHMgZWFzeSBmb3IgYSBiYXNlbGluZSBrbm93LW5vdGhpbmcgbW9kZWwgdG8gYXNzaWduIGFsbCBlc3NheXMgdG8gdGhlIG1lZGlhbiBzY29yZSBvZiAzLiBUaGUgcHJlZGljdGl2ZSBwb3dlciBpcyBpbiB0aGUgYWJpbGl0eSB0byBtb2RlbCB0aGUgZXNzYXlzIHRoYXQgYXJlIG5vdCAzIGludG8gYnVja2V0cyBoaWdoZXIgYW5kIGxvd2VyIHRoYW4gMy4NCg0KQmVjYXVzZSB0aGUgcmF0aW5ncyBhcmUgYSBmb3JtIG9mIG9yZGluYWwgdmFsdWUsIG9yIGV2ZW4gYSBsaWtlcnQgc2NhbGUsIHdlIHdpbGwgZW5zZW1ibGUgYSBzZWNvbmQgY2xhc3NpZmljYXRpb24gbW9kZWwgdGhhdCBpbmNsdWRlcyB0aGUgb3V0cHV0IG9mIHRoZSByZWdyZXNzaW9uLg0KDQpgYGB7cn0NCiN8IGxhYmVsOiBmaXQgc3ludGF4IHJlc2FtcGxlcyBjbGFzc2lmaWNhdGlvbg0KDQpjbGFzc2lmaWNhdGlvbl90cmFpbl9kZiA8LSB0cmFpbl9lc3NheXNfcmF3ICB8PiANCiAgICAgICAgICAgICAgICBzZWxlY3Qoe3tvdXRjb21lfX0sIGZ1bGxfdGV4dCkgfD4gDQogICAgICAgICAgICAgICAgYmluZF9jb2xzKA0KICAgICAgICAgICAgICAgICAgcHJlZGljdCgNCiAgICAgICAgICAgICAgICAgICAgcmVncmVzc2lvbl9maXQsDQogICAgICAgICAgICAgICAgICAgIHJlZ3Jlc3Npb25fdHJhaW5fZGYNCiAgICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgICApIHw+IA0KICAgICAgICAgICAgICAgcmVuYW1lKHJlZ3Jlc3Npb25fcHJlZCA9IC5wcmVkKSB8PiANCiAgICAgICAgICAgICAgIG11dGF0ZSh7e291dGNvbWV9fSA6PSBmYWN0b3IoLmRhdGFbW291dGNvbWVdXSkpDQoNCmNsYXNzaWZpY2F0aW9uX3dmIDwtIHdvcmtmbG93KG11bHRpY2xhc3NfcmVjaXBlX2J1aWxkZXIob3V0Y29tZSA9IG91dGNvbWUpLCBzdm1fc3BlYykgDQoNCmZvbGRzIDwtIHZmb2xkX2N2KGNsYXNzaWZpY2F0aW9uX3RyYWluX2RmLCBzdHJhdGEgPSAhIW91dGNvbWUpDQoNCnNldC5zZWVkKDQyKSAgDQpycyA8LSBmaXRfcmVzYW1wbGVzKA0KICBjbGFzc2lmaWNhdGlvbl93ZiwNCiAgZm9sZHMsDQogIG1ldHJpY3MgPSBtZXRyaWNfc2V0KGthcCwgYWNjdXJhY3kpLA0KICBjb250cm9sID0gY29udHJvbF9yZXNhbXBsZXMoc2F2ZV9wcmVkID0gVFJVRSkpDQoNCmNvbGxlY3RfbWV0cmljcyhycykgfD4gYXJyYW5nZShtZWFuKQ0KDQpjb2xsZWN0X3ByZWRpY3Rpb25zKHJzKSB8PiANCiAgZ2dwbG90KGFlcyh4ID0gLmRhdGFbW291dGNvbWVdXSwgeSA9IGFicyhhcy5udW1lcmljKC5kYXRhW1tvdXRjb21lXV0pIC0gYXMubnVtZXJpYygucHJlZF9jbGFzcykpLzIpKSArDQogIGdlb21fdmlvbGluKCkgKw0KICBzY2FsZV95X2NvbnRpbnVvdXMoYnJlYWtzID0gc2VxKC01LDUsMC41KSkgKw0KICBsYWJzKHkgPSAiUmVzaWR1YWxzIiwNCiAgICAgICB0aXRsZSA9ICJ7e291dGNvbWV9fSBSZXNpZHVhbCBlcnJvcnMgZm9yIGVzc2F5cyBpbiBoZWxkIG91dCBmb2xkcyIsDQogICAgICAgc3VidGl0bGUgPSAiVGhlIGhpZ2hlc3QgYW5kIGxvd2VzdCBlc3NheXMgYXJlIHN0aWxsIG5vdCBwcmVkaWN0ZWQgd2VsbCIpDQoNCnRyYWluX2Vzc2F5c19yYXdbDQoNCmNvbGxlY3RfcHJlZGljdGlvbnMocnMpIHw+IA0KICBtdXRhdGUocmVzaWR1YWwgPSBhcy5udW1lcmljKC5kYXRhW1tvdXRjb21lXV0pIC0gYXMubnVtZXJpYygucHJlZF9jbGFzcykpIHw+IA0KICBhcnJhbmdlKGRlc2MoYWJzKHJlc2lkdWFsKSkpIHw+IA0KICBzbGljZV9oZWFkKG4gPSA1KSB8PiANCiAgcHVsbCgucm93KQ0KDQosIF0gfD4gDQogIHNlbGVjdChmdWxsX3RleHQsIHt7b3V0Y29tZX19KQ0KDQpjb2xsZWN0X3ByZWRpY3Rpb25zKHJzKSB8PiANCiAgcm1zZSh0cnV0aCA9IGFzLm51bWVyaWMoLmRhdGFbW291dGNvbWVdXSkvMiwgZXN0aW1hdGUgPSBhcy5udW1lcmljKC5wcmVkX2NsYXNzKS8yKQ0KDQoNCmBgYA0KDQpSZXN1bHRzIGhlcmUgYXJlbid0IGdyZWF0LCBidXQgdGhleSBhcmUgbW9yZSBhcmUgbGVzcyBjb21wZXRpdGl2ZSB3aXRoIHRoZSBsZWFkZXJib2FyZCBmaWd1cmVzLg0KDQpUaGUgZmluYWwgZml0dGluZyBlbnNlbWJsZXMgYm90aCB0aGUgcmVncmVzc2lvbiBhbmQgY2xhc3NpZmljYXRpb24gZml0cywgYW5kIG1ha2VzIGEgcHJlZGljdGlvbiBvbiB0aGUgc3VibWlzc2lvbiBlc3NheXMuDQoNCmBgYHtyfQ0KI3wgbGFiZWw6IGZpdCBzeW50YXggZmluYWwNCg0KY2xhc3NpZmljYXRpb25fZml0IDwtIHBhcnNuaXA6OmZpdChjbGFzc2lmaWNhdGlvbl93ZiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NpZmljYXRpb25fdHJhaW5fZGYpDQoNCmV4dHJhY3RfZml0X2VuZ2luZShyZWdyZXNzaW9uX2ZpdCkgfD4gDQogIHZpcDo6dmlwKG51bV9mZWF0dXJlcyA9IDIwKQ0KDQpzdWJtaXNzaW9uIDwtIHByZWRpY3QoDQogIGNsYXNzaWZpY2F0aW9uX2ZpdCwNCiAgDQogIHN1Ym1pdF9lc3NheXNfcmF3IHw+DQogICAgYmluZF9jb2xzKHByZWRpY3QocmVncmVzc2lvbl9maXQsIHN1Ym1pdF9lc3NheXNfcmF3KSkgfD4NCiAgICByZW5hbWUocmVncmVzc2lvbl9wcmVkID0gLnByZWQpDQopIHw+DQogIHRyYW5zbXV0ZSh7e291dGNvbWV9fSA6PSAucHJlZF9jbGFzcykgfD4NCiAgYmluZF9jb2xzKHN1Ym1pc3Npb24pDQoNCnN1Ym1pc3Npb24NCg0KYGBgDQoNCiMjIyBWb2NhYnVsYXJ5DQoNCldlIGZpdCBmb3IgYHZvY2FidWxhcnlgIGZpcnN0IHVzaW5nIGFuIHhnYm9vc3QgcmVncmVzc2lvbiwgdXNpbmcgY2FzZSB3ZWlnaHRzIHRvIGFkanVzdCBmb3IgdGhlIGZyZXF1ZW5jeSBvZiBvY2N1cnJlbmNlIG9mIGVhY2ggdmFsdWUgb2YgYHZvY2FidWxhcnlgLiAgDQoNCmBgYHtyfQ0KI3wgbGFiZWw6IGZpdCB2b2NhYnVsYXJ5IHJlc2FtcGxlcyByZWdyZXNzaW9uDQoNCm91dGNvbWUgPC0gb3V0Y29tZXNbM10NCg0KcmVncmVzc2lvbl90cmFpbl9kZiA8LSB0cmFpbl9lc3NheXNfcmF3ICB8PiANCiAgICAgICAgICAgICAgICBzZWxlY3QoISFvdXRjb21lLCBmdWxsX3RleHQpIHw+IA0KICAgICAgICAgICAgICAgIGNhc2Vfd2VpZ2h0X2J1aWxkZXIob3V0Y29tZSkNCg0KcmVncmVzc2lvbl93ZiA8LSB3b3JrZmxvdyhyZWNpcGVfYnVpbGRlcihvdXRjb21lID0gb3V0Y29tZSksIHhnYl9zcGVjKSB8PiANCiAgICAgICBhZGRfY2FzZV93ZWlnaHRzKGNhc2Vfd3RzKQ0KDQpmb2xkcyA8LSB2Zm9sZF9jdihyZWdyZXNzaW9uX3RyYWluX2RmLCBzdHJhdGEgPSB7e291dGNvbWV9fSkNCg0Kc2V0LnNlZWQoNDIpICANCnJzIDwtIGZpdF9yZXNhbXBsZXMoDQogIHJlZ3Jlc3Npb25fd2YsDQogIGZvbGRzLA0KICBjb250cm9sID0gY29udHJvbF9yZXNhbXBsZXMoc2F2ZV9wcmVkID0gVFJVRSkpDQoNCmNvbGxlY3RfbWV0cmljcyhycykgfD4gYXJyYW5nZShtZWFuKQ0KDQpjb2xsZWN0X3ByZWRpY3Rpb25zKHJzKSB8PiANCiAgcGxvdF9wcmVkcyguZGF0YVtbb3V0Y29tZV1dKSArDQogIGxhYnMoeSA9ICJQcmVkaWN0ZWQiLA0KICAgICAgIHRpdGxlID0gcGFzdGUwKG91dGNvbWUsICIgcHJlZGljdGlvbnMgYWdhaW5zdCBlc3NheXMgaW4gaGVsZCBvdXQgZm9sZHMiKSwNCiAgICAgICBzdWJ0aXRsZSA9ICJUaGUgaGlnaGVzdCBhbmQgbG93ZXN0IGVzc2F5cyBhcmUgbm90IHByZWRpY3RlZCB3ZWxsIikNCg0KDQp0cmFpbl9lc3NheXNfcmF3Ww0KDQpjb2xsZWN0X3ByZWRpY3Rpb25zKHJzKSB8PiANCiAgbXV0YXRlKHJlc2lkdWFsID0gLmRhdGFbW291dGNvbWVdXSAtIC5wcmVkKSB8PiANCiAgYXJyYW5nZShkZXNjKGFicyhyZXNpZHVhbCkpKSB8PiANCiAgc2xpY2VfaGVhZChuID0gNSkgfD4gDQogIHB1bGwoLnJvdykNCg0KLCBdIHw+IA0KICBzZWxlY3QoZnVsbF90ZXh0KQ0KDQpyZWdyZXNzaW9uX2ZpdCA8LSBwYXJzbmlwOjpmaXQocmVncmVzc2lvbl93ZiwgDQogICAgICAgICAgICAgICAgICAgICByZWdyZXNzaW9uX3RyYWluX2RmKQ0KDQpgYGANCg0KSWRlbnRpZnlpbmcgZXhhbXBsZXMgd2l0aCBlc3BlY2lhbGx5IHBvb3IgcGVyZm9ybWFuY2UgY2FuIGhlbHAgdXMgZm9sbG93IHVwIGFuZCBpbnZlc3RpZ2F0ZSB3aHkgdGhlc2Ugc3BlY2lmaWMgcHJlZGljdGlvbnMgYXJlIHBvb3IuIENvbmNlcHR1YWxseSwgaXRzIGVhc3kgZm9yIGEgYmFzZWxpbmUga25vdy1ub3RoaW5nIG1vZGVsIHRvIGFzc2lnbiBhbGwgZXNzYXlzIHRvIHRoZSBtZWRpYW4gc2NvcmUgb2YgMy4gVGhlIHByZWRpY3RpdmUgcG93ZXIgaXMgaW4gdGhlIGFiaWxpdHkgdG8gbW9kZWwgdGhlIGVzc2F5cyB0aGF0IGFyZSBub3QgMyBpbnRvIGJ1Y2tldHMgaGlnaGVyIGFuZCBsb3dlciB0aGFuIDMuDQoNCkJlY2F1c2UgdGhlIHJhdGluZ3MgYXJlIGEgZm9ybSBvZiBvcmRpbmFsIHZhbHVlLCBvciBldmVuIGEgbGlrZXJ0IHNjYWxlLCB3ZSB3aWxsIGVuc2VtYmxlIGEgc2Vjb25kIGNsYXNzaWZpY2F0aW9uIG1vZGVsIHRoYXQgaW5jbHVkZXMgdGhlIG91dHB1dCBvZiB0aGUgcmVncmVzc2lvbi4NCg0KYGBge3J9DQojfCBsYWJlbDogZml0IHZvY2FidWxhcnkgcmVzYW1wbGVzIGNsYXNzaWZpY2F0aW9uDQoNCmNsYXNzaWZpY2F0aW9uX3RyYWluX2RmIDwtIHRyYWluX2Vzc2F5c19yYXcgIHw+IA0KICAgICAgICAgICAgICAgIHNlbGVjdCh7e291dGNvbWV9fSwgZnVsbF90ZXh0KSB8PiANCiAgICAgICAgICAgICAgICBiaW5kX2NvbHMoDQogICAgICAgICAgICAgICAgICBwcmVkaWN0KA0KICAgICAgICAgICAgICAgICAgICByZWdyZXNzaW9uX2ZpdCwNCiAgICAgICAgICAgICAgICAgICAgcmVncmVzc2lvbl90cmFpbl9kZg0KICAgICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICAgICkgfD4gDQogICAgICAgICAgICAgICByZW5hbWUocmVncmVzc2lvbl9wcmVkID0gLnByZWQpIHw+IA0KICAgICAgICAgICAgICAgbXV0YXRlKHt7b3V0Y29tZX19IDo9IGZhY3RvciguZGF0YVtbb3V0Y29tZV1dKSkNCg0KY2xhc3NpZmljYXRpb25fd2YgPC0gd29ya2Zsb3cobXVsdGljbGFzc19yZWNpcGVfYnVpbGRlcihvdXRjb21lID0gb3V0Y29tZSksIHN2bV9zcGVjKSANCg0KZm9sZHMgPC0gdmZvbGRfY3YoY2xhc3NpZmljYXRpb25fdHJhaW5fZGYsIHN0cmF0YSA9ICEhb3V0Y29tZSkNCg0Kc2V0LnNlZWQoNDIpICANCnJzIDwtIGZpdF9yZXNhbXBsZXMoDQogIGNsYXNzaWZpY2F0aW9uX3dmLA0KICBmb2xkcywNCiAgbWV0cmljcyA9IG1ldHJpY19zZXQoa2FwLCBhY2N1cmFjeSksDQogIGNvbnRyb2wgPSBjb250cm9sX3Jlc2FtcGxlcyhzYXZlX3ByZWQgPSBUUlVFKSkNCg0KY29sbGVjdF9tZXRyaWNzKHJzKSB8PiBhcnJhbmdlKG1lYW4pDQoNCmNvbGxlY3RfcHJlZGljdGlvbnMocnMpIHw+IA0KICBnZ3Bsb3QoYWVzKHggPSAuZGF0YVtbb3V0Y29tZV1dLCB5ID0gYWJzKGFzLm51bWVyaWMoLmRhdGFbW291dGNvbWVdXSkgLSBhcy5udW1lcmljKC5wcmVkX2NsYXNzKSkvMikpICsNCiAgZ2VvbV92aW9saW4oKSArDQogIHNjYWxlX3lfY29udGludW91cyhicmVha3MgPSBzZXEoLTUsNSwwLjUpKSArDQogIGxhYnMoeSA9ICJSZXNpZHVhbHMiLA0KICAgICAgIHRpdGxlID0gInt7b3V0Y29tZX19IFJlc2lkdWFsIGVycm9ycyBmb3IgZXNzYXlzIGluIGhlbGQgb3V0IGZvbGRzIiwNCiAgICAgICBzdWJ0aXRsZSA9ICJUaGUgaGlnaGVzdCBhbmQgbG93ZXN0IGVzc2F5cyBhcmUgc3RpbGwgbm90IHByZWRpY3RlZCB3ZWxsIikNCg0KdHJhaW5fZXNzYXlzX3Jhd1sNCg0KY29sbGVjdF9wcmVkaWN0aW9ucyhycykgfD4gDQogIG11dGF0ZShyZXNpZHVhbCA9IGFzLm51bWVyaWMoLmRhdGFbW291dGNvbWVdXSkgLSBhcy5udW1lcmljKC5wcmVkX2NsYXNzKSkgfD4gDQogIGFycmFuZ2UoZGVzYyhhYnMocmVzaWR1YWwpKSkgfD4gDQogIHNsaWNlX2hlYWQobiA9IDUpIHw+IA0KICBwdWxsKC5yb3cpDQoNCiwgXSB8PiANCiAgc2VsZWN0KGZ1bGxfdGV4dCwge3tvdXRjb21lfX0pDQoNCmNvbGxlY3RfcHJlZGljdGlvbnMocnMpIHw+IA0KICBybXNlKHRydXRoID0gYXMubnVtZXJpYyguZGF0YVtbb3V0Y29tZV1dKS8yLCBlc3RpbWF0ZSA9IGFzLm51bWVyaWMoLnByZWRfY2xhc3MpLzIpDQoNCg0KYGBgDQoNClJlc3VsdHMgaGVyZSBhcmVuJ3QgZ3JlYXQsIGJ1dCB0aGV5IGFyZSBtb3JlIGFyZSBsZXNzIGNvbXBldGl0aXZlIHdpdGggdGhlIGxlYWRlcmJvYXJkIGZpZ3VyZXMuDQoNClRoZSBmaW5hbCBmaXR0aW5nIGVuc2VtYmxlcyBib3RoIHRoZSByZWdyZXNzaW9uIGFuZCBjbGFzc2lmaWNhdGlvbiBmaXRzLCBhbmQgbWFrZXMgYSBwcmVkaWN0aW9uIG9uIHRoZSBzdWJtaXNzaW9uIGVzc2F5cy4NCg0KYGBge3J9DQojfCBsYWJlbDogZml0IHZvY3VhYnVsYXJ5IGZpbmFsDQoNCmNsYXNzaWZpY2F0aW9uX2ZpdCA8LSBwYXJzbmlwOjpmaXQoY2xhc3NpZmljYXRpb25fd2YsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzaWZpY2F0aW9uX3RyYWluX2RmKQ0KDQpleHRyYWN0X2ZpdF9lbmdpbmUocmVncmVzc2lvbl9maXQpIHw+IA0KICB2aXA6OnZpcChudW1fZmVhdHVyZXMgPSAyMCkNCg0Kc3VibWlzc2lvbiA8LSBwcmVkaWN0KA0KICBjbGFzc2lmaWNhdGlvbl9maXQsDQogIA0KICBzdWJtaXRfZXNzYXlzX3JhdyB8Pg0KICAgIGJpbmRfY29scyhwcmVkaWN0KHJlZ3Jlc3Npb25fZml0LCBzdWJtaXRfZXNzYXlzX3JhdykpIHw+DQogICAgcmVuYW1lKHJlZ3Jlc3Npb25fcHJlZCA9IC5wcmVkKQ0KKSB8Pg0KICB0cmFuc211dGUoe3tvdXRjb21lfX0gOj0gLnByZWRfY2xhc3MpIHw+DQogIGJpbmRfY29scyhzdWJtaXNzaW9uKQ0KDQpzdWJtaXNzaW9uDQoNCmBgYA0KDQojIyMgUGhyYXNlb2xvZ3kNCg0KV2UgZml0IGZvciBgcGhyYXNlb2xvZ3lgIGZpcnN0IHVzaW5nIGFuIHhnYm9vc3QgcmVncmVzc2lvbiwgdXNpbmcgY2FzZSB3ZWlnaHRzIHRvIGFkanVzdCBmb3IgdGhlIGZyZXF1ZW5jeSBvZiBvY2N1cnJlbmNlIG9mIGVhY2ggdmFsdWUgb2YgYHBocmFzZW9sb2d5YC4gIA0KDQpgYGB7cn0NCiN8IGxhYmVsOiBmaXQgcGhyYXNlb2xvZ3kgcmVzYW1wbGVzIHJlZ3Jlc3Npb24NCg0Kb3V0Y29tZSA8LSBvdXRjb21lc1s0XQ0KDQpyZWdyZXNzaW9uX3RyYWluX2RmIDwtIHRyYWluX2Vzc2F5c19yYXcgIHw+IA0KICAgICAgICAgICAgICAgIHNlbGVjdCghIW91dGNvbWUsIGZ1bGxfdGV4dCkgfD4gDQogICAgICAgICAgICAgICAgY2FzZV93ZWlnaHRfYnVpbGRlcihvdXRjb21lKQ0KDQpyZWdyZXNzaW9uX3dmIDwtIHdvcmtmbG93KHJlY2lwZV9idWlsZGVyKG91dGNvbWUgPSBvdXRjb21lKSwgeGdiX3NwZWMpIHw+IA0KICAgICAgIGFkZF9jYXNlX3dlaWdodHMoY2FzZV93dHMpDQoNCmZvbGRzIDwtIHZmb2xkX2N2KHJlZ3Jlc3Npb25fdHJhaW5fZGYsIHN0cmF0YSA9IHt7b3V0Y29tZX19KQ0KDQpzZXQuc2VlZCg0MikgIA0KcnMgPC0gZml0X3Jlc2FtcGxlcygNCiAgcmVncmVzc2lvbl93ZiwNCiAgZm9sZHMsDQogIGNvbnRyb2wgPSBjb250cm9sX3Jlc2FtcGxlcyhzYXZlX3ByZWQgPSBUUlVFKSkNCg0KY29sbGVjdF9tZXRyaWNzKHJzKSB8PiBhcnJhbmdlKG1lYW4pDQoNCmNvbGxlY3RfcHJlZGljdGlvbnMocnMpIHw+IA0KICBwbG90X3ByZWRzKC5kYXRhW1tvdXRjb21lXV0pICsNCiAgbGFicyh5ID0gIlByZWRpY3RlZCIsDQogICAgICAgdGl0bGUgPSBwYXN0ZTAob3V0Y29tZSwgIiBwcmVkaWN0aW9ucyBhZ2FpbnN0IGVzc2F5cyBpbiBoZWxkIG91dCBmb2xkcyIpLA0KICAgICAgIHN1YnRpdGxlID0gIlRoZSBoaWdoZXN0IGFuZCBsb3dlc3QgZXNzYXlzIGFyZSBub3QgcHJlZGljdGVkIHdlbGwiKQ0KDQoNCnRyYWluX2Vzc2F5c19yYXdbDQoNCmNvbGxlY3RfcHJlZGljdGlvbnMocnMpIHw+IA0KICBtdXRhdGUocmVzaWR1YWwgPSAuZGF0YVtbb3V0Y29tZV1dIC0gLnByZWQpIHw+IA0KICBhcnJhbmdlKGRlc2MoYWJzKHJlc2lkdWFsKSkpIHw+IA0KICBzbGljZV9oZWFkKG4gPSA1KSB8PiANCiAgcHVsbCgucm93KQ0KDQosIF0gfD4gDQogIHNlbGVjdChmdWxsX3RleHQpDQoNCnJlZ3Jlc3Npb25fZml0IDwtIHBhcnNuaXA6OmZpdChyZWdyZXNzaW9uX3dmLCANCiAgICAgICAgICAgICAgICAgICAgIHJlZ3Jlc3Npb25fdHJhaW5fZGYpDQoNCmBgYA0KDQpJZGVudGlmeWluZyBleGFtcGxlcyB3aXRoIGVzcGVjaWFsbHkgcG9vciBwZXJmb3JtYW5jZSBjYW4gaGVscCB1cyBmb2xsb3cgdXAgYW5kIGludmVzdGlnYXRlIHdoeSB0aGVzZSBzcGVjaWZpYyBwcmVkaWN0aW9ucyBhcmUgcG9vci4gQ29uY2VwdHVhbGx5LCBpdHMgZWFzeSBmb3IgYSBiYXNlbGluZSBrbm93LW5vdGhpbmcgbW9kZWwgdG8gYXNzaWduIGFsbCBlc3NheXMgdG8gdGhlIG1lZGlhbiBzY29yZSBvZiAzLiBUaGUgcHJlZGljdGl2ZSBwb3dlciBpcyBpbiB0aGUgYWJpbGl0eSB0byBtb2RlbCB0aGUgZXNzYXlzIHRoYXQgYXJlIG5vdCAzIGludG8gYnVja2V0cyBoaWdoZXIgYW5kIGxvd2VyIHRoYW4gMy4NCg0KQmVjYXVzZSB0aGUgcmF0aW5ncyBhcmUgYSBmb3JtIG9mIG9yZGluYWwgdmFsdWUsIG9yIGV2ZW4gYSBsaWtlcnQgc2NhbGUsIHdlIHdpbGwgZW5zZW1ibGUgYSBzZWNvbmQgY2xhc3NpZmljYXRpb24gbW9kZWwgdGhhdCBpbmNsdWRlcyB0aGUgb3V0cHV0IG9mIHRoZSByZWdyZXNzaW9uLg0KDQpgYGB7cn0NCiN8IGxhYmVsOiBmaXQgcGhyYXNlb2xvZ3kgcmVzYW1wbGVzIGNsYXNzaWZpY2F0aW9uDQoNCmNsYXNzaWZpY2F0aW9uX3RyYWluX2RmIDwtIHRyYWluX2Vzc2F5c19yYXcgIHw+IA0KICAgICAgICAgICAgICAgIHNlbGVjdCh7e291dGNvbWV9fSwgZnVsbF90ZXh0KSB8PiANCiAgICAgICAgICAgICAgICBiaW5kX2NvbHMoDQogICAgICAgICAgICAgICAgICBwcmVkaWN0KA0KICAgICAgICAgICAgICAgICAgICByZWdyZXNzaW9uX2ZpdCwNCiAgICAgICAgICAgICAgICAgICAgcmVncmVzc2lvbl90cmFpbl9kZg0KICAgICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICAgICkgfD4gDQogICAgICAgICAgICAgICByZW5hbWUocmVncmVzc2lvbl9wcmVkID0gLnByZWQpIHw+IA0KICAgICAgICAgICAgICAgbXV0YXRlKHt7b3V0Y29tZX19IDo9IGZhY3RvciguZGF0YVtbb3V0Y29tZV1dKSkNCg0KY2xhc3NpZmljYXRpb25fd2YgPC0gd29ya2Zsb3cobXVsdGljbGFzc19yZWNpcGVfYnVpbGRlcihvdXRjb21lID0gb3V0Y29tZSksIHN2bV9zcGVjKSANCg0KZm9sZHMgPC0gdmZvbGRfY3YoY2xhc3NpZmljYXRpb25fdHJhaW5fZGYsIHN0cmF0YSA9ICEhb3V0Y29tZSkNCg0Kc2V0LnNlZWQoNDIpICANCnJzIDwtIGZpdF9yZXNhbXBsZXMoDQogIGNsYXNzaWZpY2F0aW9uX3dmLA0KICBmb2xkcywNCiAgbWV0cmljcyA9IG1ldHJpY19zZXQoa2FwLCBhY2N1cmFjeSksDQogIGNvbnRyb2wgPSBjb250cm9sX3Jlc2FtcGxlcyhzYXZlX3ByZWQgPSBUUlVFKSkNCg0KY29sbGVjdF9tZXRyaWNzKHJzKSB8PiBhcnJhbmdlKG1lYW4pDQoNCmNvbGxlY3RfcHJlZGljdGlvbnMocnMpIHw+IA0KICBnZ3Bsb3QoYWVzKHggPSAuZGF0YVtbb3V0Y29tZV1dLCB5ID0gYWJzKGFzLm51bWVyaWMoLmRhdGFbW291dGNvbWVdXSkgLSBhcy5udW1lcmljKC5wcmVkX2NsYXNzKSkvMikpICsNCiAgZ2VvbV92aW9saW4oKSArDQogIHNjYWxlX3lfY29udGludW91cyhicmVha3MgPSBzZXEoLTUsNSwwLjUpKSArDQogIGxhYnMoeSA9ICJSZXNpZHVhbHMiLA0KICAgICAgIHRpdGxlID0gInt7b3V0Y29tZX19IFJlc2lkdWFsIGVycm9ycyBmb3IgZXNzYXlzIGluIGhlbGQgb3V0IGZvbGRzIiwNCiAgICAgICBzdWJ0aXRsZSA9ICJUaGUgaGlnaGVzdCBhbmQgbG93ZXN0IGVzc2F5cyBhcmUgc3RpbGwgbm90IHByZWRpY3RlZCB3ZWxsIikNCg0KdHJhaW5fZXNzYXlzX3Jhd1sNCg0KY29sbGVjdF9wcmVkaWN0aW9ucyhycykgfD4gDQogIG11dGF0ZShyZXNpZHVhbCA9IGFzLm51bWVyaWMoLmRhdGFbW291dGNvbWVdXSkgLSBhcy5udW1lcmljKC5wcmVkX2NsYXNzKSkgfD4gDQogIGFycmFuZ2UoZGVzYyhhYnMocmVzaWR1YWwpKSkgfD4gDQogIHNsaWNlX2hlYWQobiA9IDUpIHw+IA0KICBwdWxsKC5yb3cpDQoNCiwgXSB8PiANCiAgc2VsZWN0KGZ1bGxfdGV4dCwge3tvdXRjb21lfX0pDQoNCmNvbGxlY3RfcHJlZGljdGlvbnMocnMpIHw+IA0KICBybXNlKHRydXRoID0gYXMubnVtZXJpYyguZGF0YVtbb3V0Y29tZV1dKS8yLCBlc3RpbWF0ZSA9IGFzLm51bWVyaWMoLnByZWRfY2xhc3MpLzIpDQoNCg0KYGBgDQoNClJlc3VsdHMgaGVyZSBhcmVuJ3QgZ3JlYXQsIGJ1dCB0aGV5IGFyZSBtb3JlIGFyZSBsZXNzIGNvbXBldGl0aXZlIHdpdGggdGhlIGxlYWRlcmJvYXJkIGZpZ3VyZXMuDQoNClRoZSBmaW5hbCBmaXR0aW5nIGVuc2VtYmxlcyBib3RoIHRoZSByZWdyZXNzaW9uIGFuZCBjbGFzc2lmaWNhdGlvbiBmaXRzLCBhbmQgbWFrZXMgYSBwcmVkaWN0aW9uIG9uIHRoZSBzdWJtaXNzaW9uIGVzc2F5cy4NCg0KYGBge3J9DQojfCBsYWJlbDogZml0IHBocmFzZW9sb2d5IGZpbmFsDQoNCmNsYXNzaWZpY2F0aW9uX2ZpdCA8LSBwYXJzbmlwOjpmaXQoY2xhc3NpZmljYXRpb25fd2YsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzaWZpY2F0aW9uX3RyYWluX2RmKQ0KDQpleHRyYWN0X2ZpdF9lbmdpbmUocmVncmVzc2lvbl9maXQpIHw+IA0KICB2aXA6OnZpcChudW1fZmVhdHVyZXMgPSAyMCkNCg0Kc3VibWlzc2lvbiA8LSBwcmVkaWN0KA0KICBjbGFzc2lmaWNhdGlvbl9maXQsDQogIA0KICBzdWJtaXRfZXNzYXlzX3JhdyB8Pg0KICAgIGJpbmRfY29scyhwcmVkaWN0KHJlZ3Jlc3Npb25fZml0LCBzdWJtaXRfZXNzYXlzX3JhdykpIHw+DQogICAgcmVuYW1lKHJlZ3Jlc3Npb25fcHJlZCA9IC5wcmVkKQ0KKSB8Pg0KICB0cmFuc211dGUoe3tvdXRjb21lfX0gOj0gLnByZWRfY2xhc3MpIHw+DQogIGJpbmRfY29scyhzdWJtaXNzaW9uKQ0KDQpzdWJtaXNzaW9uDQoNCmBgYA0KDQojIyMgR3JhbW1hcg0KDQpXZSBmaXQgZm9yIGBncmFtbWFyYCBmaXJzdCB1c2luZyBhbiB4Z2Jvb3N0IHJlZ3Jlc3Npb24sIHVzaW5nIGNhc2Ugd2VpZ2h0cyB0byBhZGp1c3QgZm9yIHRoZSBmcmVxdWVuY3kgb2Ygb2NjdXJyZW5jZSBvZiBlYWNoIHZhbHVlIG9mIGBncmFtbWFyYC4gIA0KDQpgYGB7cn0NCiN8IGxhYmVsOiBmaXQgZ3JhbW1hciByZXNhbXBsZXMgcmVncmVzc2lvbg0KDQpvdXRjb21lIDwtIG91dGNvbWVzWzVdDQoNCnJlZ3Jlc3Npb25fdHJhaW5fZGYgPC0gdHJhaW5fZXNzYXlzX3JhdyAgfD4gDQogICAgICAgICAgICAgICAgc2VsZWN0KCEhb3V0Y29tZSwgZnVsbF90ZXh0KSB8PiANCiAgICAgICAgICAgICAgICBjYXNlX3dlaWdodF9idWlsZGVyKG91dGNvbWUpDQoNCnJlZ3Jlc3Npb25fd2YgPC0gd29ya2Zsb3cocmVjaXBlX2J1aWxkZXIob3V0Y29tZSA9IG91dGNvbWUpLCB4Z2Jfc3BlYykgfD4gDQogICAgICAgYWRkX2Nhc2Vfd2VpZ2h0cyhjYXNlX3d0cykNCg0KZm9sZHMgPC0gdmZvbGRfY3YocmVncmVzc2lvbl90cmFpbl9kZiwgc3RyYXRhID0ge3tvdXRjb21lfX0pDQoNCnNldC5zZWVkKDQyKSAgDQpycyA8LSBmaXRfcmVzYW1wbGVzKA0KICByZWdyZXNzaW9uX3dmLA0KICBmb2xkcywNCiAgY29udHJvbCA9IGNvbnRyb2xfcmVzYW1wbGVzKHNhdmVfcHJlZCA9IFRSVUUpKQ0KDQpjb2xsZWN0X21ldHJpY3MocnMpIHw+IGFycmFuZ2UobWVhbikNCg0KY29sbGVjdF9wcmVkaWN0aW9ucyhycykgfD4gDQogIHBsb3RfcHJlZHMoLmRhdGFbW291dGNvbWVdXSkgKw0KICBsYWJzKHkgPSAiUHJlZGljdGVkIiwNCiAgICAgICB0aXRsZSA9IHBhc3RlMChvdXRjb21lLCAiIHByZWRpY3Rpb25zIGFnYWluc3QgZXNzYXlzIGluIGhlbGQgb3V0IGZvbGRzIiksDQogICAgICAgc3VidGl0bGUgPSAiVGhlIGhpZ2hlc3QgYW5kIGxvd2VzdCBlc3NheXMgYXJlIG5vdCBwcmVkaWN0ZWQgd2VsbCIpDQoNCg0KdHJhaW5fZXNzYXlzX3Jhd1sNCg0KY29sbGVjdF9wcmVkaWN0aW9ucyhycykgfD4gDQogIG11dGF0ZShyZXNpZHVhbCA9IC5kYXRhW1tvdXRjb21lXV0gLSAucHJlZCkgfD4gDQogIGFycmFuZ2UoZGVzYyhhYnMocmVzaWR1YWwpKSkgfD4gDQogIHNsaWNlX2hlYWQobiA9IDUpIHw+IA0KICBwdWxsKC5yb3cpDQoNCiwgXSB8PiANCiAgc2VsZWN0KGZ1bGxfdGV4dCkNCg0KcmVncmVzc2lvbl9maXQgPC0gcGFyc25pcDo6Zml0KHJlZ3Jlc3Npb25fd2YsIA0KICAgICAgICAgICAgICAgICAgICAgcmVncmVzc2lvbl90cmFpbl9kZikNCg0KYGBgDQoNCklkZW50aWZ5aW5nIGV4YW1wbGVzIHdpdGggZXNwZWNpYWxseSBwb29yIHBlcmZvcm1hbmNlIGNhbiBoZWxwIHVzIGZvbGxvdyB1cCBhbmQgaW52ZXN0aWdhdGUgd2h5IHRoZXNlIHNwZWNpZmljIHByZWRpY3Rpb25zIGFyZSBwb29yLiBDb25jZXB0dWFsbHksIGl0cyBlYXN5IGZvciBhIGJhc2VsaW5lIGtub3ctbm90aGluZyBtb2RlbCB0byBhc3NpZ24gYWxsIGVzc2F5cyB0byB0aGUgbWVkaWFuIHNjb3JlIG9mIDMuIFRoZSBwcmVkaWN0aXZlIHBvd2VyIGlzIGluIHRoZSBhYmlsaXR5IHRvIG1vZGVsIHRoZSBlc3NheXMgdGhhdCBhcmUgbm90IDMgaW50byBidWNrZXRzIGhpZ2hlciBhbmQgbG93ZXIgdGhhbiAzLg0KDQpCZWNhdXNlIHRoZSByYXRpbmdzIGFyZSBhIGZvcm0gb2Ygb3JkaW5hbCB2YWx1ZSwgb3IgZXZlbiBhIGxpa2VydCBzY2FsZSwgd2Ugd2lsbCBlbnNlbWJsZSBhIHNlY29uZCBjbGFzc2lmaWNhdGlvbiBtb2RlbCB0aGF0IGluY2x1ZGVzIHRoZSBvdXRwdXQgb2YgdGhlIHJlZ3Jlc3Npb24uDQoNCmBgYHtyfQ0KI3wgbGFiZWw6IGZpdCBncmFtbWFyIHJlc2FtcGxlcyBjbGFzc2lmaWNhdGlvbg0KDQpjbGFzc2lmaWNhdGlvbl90cmFpbl9kZiA8LSB0cmFpbl9lc3NheXNfcmF3ICB8PiANCiAgICAgICAgICAgICAgICBzZWxlY3Qoe3tvdXRjb21lfX0sIGZ1bGxfdGV4dCkgfD4gDQogICAgICAgICAgICAgICAgYmluZF9jb2xzKA0KICAgICAgICAgICAgICAgICAgcHJlZGljdCgNCiAgICAgICAgICAgICAgICAgICAgcmVncmVzc2lvbl9maXQsDQogICAgICAgICAgICAgICAgICAgIHJlZ3Jlc3Npb25fdHJhaW5fZGYNCiAgICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgICApIHw+IA0KICAgICAgICAgICAgICAgcmVuYW1lKHJlZ3Jlc3Npb25fcHJlZCA9IC5wcmVkKSB8PiANCiAgICAgICAgICAgICAgIG11dGF0ZSh7e291dGNvbWV9fSA6PSBmYWN0b3IoLmRhdGFbW291dGNvbWVdXSkpDQoNCmNsYXNzaWZpY2F0aW9uX3dmIDwtIHdvcmtmbG93KG11bHRpY2xhc3NfcmVjaXBlX2J1aWxkZXIob3V0Y29tZSA9IG91dGNvbWUpLCBzdm1fc3BlYykgDQoNCmZvbGRzIDwtIHZmb2xkX2N2KGNsYXNzaWZpY2F0aW9uX3RyYWluX2RmLCBzdHJhdGEgPSAhIW91dGNvbWUpDQoNCnNldC5zZWVkKDQyKSAgDQpycyA8LSBmaXRfcmVzYW1wbGVzKA0KICBjbGFzc2lmaWNhdGlvbl93ZiwNCiAgZm9sZHMsDQogIG1ldHJpY3MgPSBtZXRyaWNfc2V0KGthcCwgYWNjdXJhY3kpLA0KICBjb250cm9sID0gY29udHJvbF9yZXNhbXBsZXMoc2F2ZV9wcmVkID0gVFJVRSkpDQoNCmNvbGxlY3RfbWV0cmljcyhycykgfD4gYXJyYW5nZShtZWFuKQ0KDQpjb2xsZWN0X3ByZWRpY3Rpb25zKHJzKSB8PiANCiAgZ2dwbG90KGFlcyh4ID0gLmRhdGFbW291dGNvbWVdXSwgeSA9IGFicyhhcy5udW1lcmljKC5kYXRhW1tvdXRjb21lXV0pIC0gYXMubnVtZXJpYygucHJlZF9jbGFzcykpLzIpKSArDQogIGdlb21fdmlvbGluKCkgKw0KICBzY2FsZV95X2NvbnRpbnVvdXMoYnJlYWtzID0gc2VxKC01LDUsMC41KSkgKw0KICBsYWJzKHkgPSAiUmVzaWR1YWxzIiwNCiAgICAgICB0aXRsZSA9ICJ7e291dGNvbWV9fSBSZXNpZHVhbCBlcnJvcnMgZm9yIGVzc2F5cyBpbiBoZWxkIG91dCBmb2xkcyIsDQogICAgICAgc3VidGl0bGUgPSAiVGhlIGhpZ2hlc3QgYW5kIGxvd2VzdCBlc3NheXMgYXJlIHN0aWxsIG5vdCBwcmVkaWN0ZWQgd2VsbCIpDQoNCnRyYWluX2Vzc2F5c19yYXdbDQoNCmNvbGxlY3RfcHJlZGljdGlvbnMocnMpIHw+IA0KICBtdXRhdGUocmVzaWR1YWwgPSBhcy5udW1lcmljKC5kYXRhW1tvdXRjb21lXV0pIC0gYXMubnVtZXJpYygucHJlZF9jbGFzcykpIHw+IA0KICBhcnJhbmdlKGRlc2MoYWJzKHJlc2lkdWFsKSkpIHw+IA0KICBzbGljZV9oZWFkKG4gPSA1KSB8PiANCiAgcHVsbCgucm93KQ0KDQosIF0gfD4gDQogIHNlbGVjdChmdWxsX3RleHQsIHt7b3V0Y29tZX19KQ0KDQpjb2xsZWN0X3ByZWRpY3Rpb25zKHJzKSB8PiANCiAgcm1zZSh0cnV0aCA9IGFzLm51bWVyaWMoLmRhdGFbW291dGNvbWVdXSkvMiwgZXN0aW1hdGUgPSBhcy5udW1lcmljKC5wcmVkX2NsYXNzKS8yKQ0KDQpgYGANCg0KUmVzdWx0cyBoZXJlIGFyZW4ndCBncmVhdCwgYnV0IHRoZXkgYXJlIG1vcmUgYXJlIGxlc3MgY29tcGV0aXRpdmUgd2l0aCB0aGUgbGVhZGVyYm9hcmQgZmlndXJlcy4NCg0KVGhlIGZpbmFsIGZpdHRpbmcgZW5zZW1ibGVzIGJvdGggdGhlIHJlZ3Jlc3Npb24gYW5kIGNsYXNzaWZpY2F0aW9uIGZpdHMsIGFuZCBtYWtlcyBhIHByZWRpY3Rpb24gb24gdGhlIHN1Ym1pc3Npb24gZXNzYXlzLg0KDQpgYGB7cn0NCiN8IGxhYmVsOiBmaXQgZ3JhbW1hciBmaW5hbA0KDQpjbGFzc2lmaWNhdGlvbl9maXQgPC0gcGFyc25pcDo6Zml0KGNsYXNzaWZpY2F0aW9uX3dmLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc2lmaWNhdGlvbl90cmFpbl9kZikNCg0KZXh0cmFjdF9maXRfZW5naW5lKHJlZ3Jlc3Npb25fZml0KSB8PiANCiAgdmlwOjp2aXAobnVtX2ZlYXR1cmVzID0gMjApDQoNCnN1Ym1pc3Npb24gPC0gcHJlZGljdCgNCiAgY2xhc3NpZmljYXRpb25fZml0LA0KICANCiAgc3VibWl0X2Vzc2F5c19yYXcgfD4NCiAgICBiaW5kX2NvbHMocHJlZGljdChyZWdyZXNzaW9uX2ZpdCwgc3VibWl0X2Vzc2F5c19yYXcpKSB8Pg0KICAgIHJlbmFtZShyZWdyZXNzaW9uX3ByZWQgPSAucHJlZCkNCikgfD4NCiAgdHJhbnNtdXRlKHt7b3V0Y29tZX19IDo9IC5wcmVkX2NsYXNzKSB8Pg0KICBiaW5kX2NvbHMoc3VibWlzc2lvbikNCg0Kc3VibWlzc2lvbg0KDQpgYGANCg0KIyMjIENvbnZlbnRpb25zDQoNCldlIGZpdCBmb3IgYGNvbnZlbnRpb25zYCBmaXJzdCB1c2luZyBhbiB4Z2Jvb3N0IHJlZ3Jlc3Npb24sIHVzaW5nIGNhc2Ugd2VpZ2h0cyB0byBhZGp1c3QgZm9yIHRoZSBmcmVxdWVuY3kgb2Ygb2NjdXJyZW5jZSBvZiBlYWNoIHZhbHVlIG9mIGBjb252ZW50aW9uc2AuICANCg0KYGBge3J9DQojfCBsYWJlbDogZml0IGNvbnZlbnRpb25zIHJlc2FtcGxlcyByZWdyZXNzaW9uDQoNCm91dGNvbWUgPC0gb3V0Y29tZXNbNl0NCg0KcmVncmVzc2lvbl90cmFpbl9kZiA8LSB0cmFpbl9lc3NheXNfcmF3ICB8PiANCiAgICAgICAgICAgICAgICBzZWxlY3QoISFvdXRjb21lLCBmdWxsX3RleHQpIHw+IA0KICAgICAgICAgICAgICAgIGNhc2Vfd2VpZ2h0X2J1aWxkZXIob3V0Y29tZSkNCg0KcmVncmVzc2lvbl93ZiA8LSB3b3JrZmxvdyhyZWNpcGVfYnVpbGRlcihvdXRjb21lID0gb3V0Y29tZSksIHhnYl9zcGVjKSB8PiANCiAgICAgICBhZGRfY2FzZV93ZWlnaHRzKGNhc2Vfd3RzKQ0KDQpmb2xkcyA8LSB2Zm9sZF9jdihyZWdyZXNzaW9uX3RyYWluX2RmLCBzdHJhdGEgPSB7e291dGNvbWV9fSkNCg0Kc2V0LnNlZWQoNDIpICANCnJzIDwtIGZpdF9yZXNhbXBsZXMoDQogIHJlZ3Jlc3Npb25fd2YsDQogIGZvbGRzLA0KICBjb250cm9sID0gY29udHJvbF9yZXNhbXBsZXMoc2F2ZV9wcmVkID0gVFJVRSkpDQoNCmNvbGxlY3RfbWV0cmljcyhycykgfD4gYXJyYW5nZShtZWFuKQ0KDQpjb2xsZWN0X3ByZWRpY3Rpb25zKHJzKSB8PiANCiAgcGxvdF9wcmVkcyguZGF0YVtbb3V0Y29tZV1dKSArDQogIGxhYnMoeSA9ICJQcmVkaWN0ZWQiLA0KICAgICAgIHRpdGxlID0gcGFzdGUwKG91dGNvbWUsICIgcHJlZGljdGlvbnMgYWdhaW5zdCBlc3NheXMgaW4gaGVsZCBvdXQgZm9sZHMiKSwNCiAgICAgICBzdWJ0aXRsZSA9ICJUaGUgaGlnaGVzdCBhbmQgbG93ZXN0IGVzc2F5cyBhcmUgbm90IHByZWRpY3RlZCB3ZWxsIikNCg0KDQp0cmFpbl9lc3NheXNfcmF3Ww0KDQpjb2xsZWN0X3ByZWRpY3Rpb25zKHJzKSB8PiANCiAgbXV0YXRlKHJlc2lkdWFsID0gLmRhdGFbW291dGNvbWVdXSAtIC5wcmVkKSB8PiANCiAgYXJyYW5nZShkZXNjKGFicyhyZXNpZHVhbCkpKSB8PiANCiAgc2xpY2VfaGVhZChuID0gNSkgfD4gDQogIHB1bGwoLnJvdykNCg0KLCBdIHw+IA0KICBzZWxlY3QoZnVsbF90ZXh0KQ0KDQpyZWdyZXNzaW9uX2ZpdCA8LSBwYXJzbmlwOjpmaXQocmVncmVzc2lvbl93ZiwgDQogICAgICAgICAgICAgICAgICAgICByZWdyZXNzaW9uX3RyYWluX2RmKQ0KDQpgYGANCg0KSWRlbnRpZnlpbmcgZXhhbXBsZXMgd2l0aCBlc3BlY2lhbGx5IHBvb3IgcGVyZm9ybWFuY2UgY2FuIGhlbHAgdXMgZm9sbG93IHVwIGFuZCBpbnZlc3RpZ2F0ZSB3aHkgdGhlc2Ugc3BlY2lmaWMgcHJlZGljdGlvbnMgYXJlIHBvb3IuIENvbmNlcHR1YWxseSwgaXRzIGVhc3kgZm9yIGEgYmFzZWxpbmUga25vdy1ub3RoaW5nIG1vZGVsIHRvIGFzc2lnbiBhbGwgZXNzYXlzIHRvIHRoZSBtZWRpYW4gc2NvcmUgb2YgMy4gVGhlIHByZWRpY3RpdmUgcG93ZXIgaXMgaW4gdGhlIGFiaWxpdHkgdG8gbW9kZWwgdGhlIGVzc2F5cyB0aGF0IGFyZSBub3QgMyBpbnRvIGJ1Y2tldHMgaGlnaGVyIGFuZCBsb3dlciB0aGFuIDMuDQoNCkJlY2F1c2UgdGhlIHJhdGluZ3MgYXJlIGEgZm9ybSBvZiBvcmRpbmFsIHZhbHVlLCBvciBldmVuIGEgbGlrZXJ0IHNjYWxlLCB3ZSB3aWxsIGVuc2VtYmxlIGEgc2Vjb25kIGNsYXNzaWZpY2F0aW9uIG1vZGVsIHRoYXQgaW5jbHVkZXMgdGhlIG91dHB1dCBvZiB0aGUgcmVncmVzc2lvbi4NCg0KYGBge3J9DQojfCBsYWJlbDogZml0IGNvbnZlbnRpb25zIHJlc2FtcGxlcyBjbGFzc2lmaWNhdGlvbg0KDQpjbGFzc2lmaWNhdGlvbl90cmFpbl9kZiA8LSB0cmFpbl9lc3NheXNfcmF3ICB8PiANCiAgICAgICAgICAgICAgICBzZWxlY3Qoe3tvdXRjb21lfX0sIGZ1bGxfdGV4dCkgfD4gDQogICAgICAgICAgICAgICAgYmluZF9jb2xzKA0KICAgICAgICAgICAgICAgICAgcHJlZGljdCgNCiAgICAgICAgICAgICAgICAgICAgcmVncmVzc2lvbl9maXQsDQogICAgICAgICAgICAgICAgICAgIHJlZ3Jlc3Npb25fdHJhaW5fZGYNCiAgICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgICApIHw+IA0KICAgICAgICAgICAgICAgcmVuYW1lKHJlZ3Jlc3Npb25fcHJlZCA9IC5wcmVkKSB8PiANCiAgICAgICAgICAgICAgIG11dGF0ZSh7e291dGNvbWV9fSA6PSBmYWN0b3IoLmRhdGFbW291dGNvbWVdXSkpDQoNCmNsYXNzaWZpY2F0aW9uX3dmIDwtIHdvcmtmbG93KG11bHRpY2xhc3NfcmVjaXBlX2J1aWxkZXIob3V0Y29tZSA9IG91dGNvbWUpLCBzdm1fc3BlYykgDQoNCmZvbGRzIDwtIHZmb2xkX2N2KGNsYXNzaWZpY2F0aW9uX3RyYWluX2RmLCBzdHJhdGEgPSAhIW91dGNvbWUpDQoNCnNldC5zZWVkKDQyKSAgDQpycyA8LSBmaXRfcmVzYW1wbGVzKA0KICBjbGFzc2lmaWNhdGlvbl93ZiwNCiAgZm9sZHMsDQogIG1ldHJpY3MgPSBtZXRyaWNfc2V0KGthcCwgYWNjdXJhY3kpLA0KICBjb250cm9sID0gY29udHJvbF9yZXNhbXBsZXMoc2F2ZV9wcmVkID0gVFJVRSkpDQoNCmNvbGxlY3RfbWV0cmljcyhycykgfD4gYXJyYW5nZShtZWFuKQ0KDQpjb2xsZWN0X3ByZWRpY3Rpb25zKHJzKSB8PiANCiAgZ2dwbG90KGFlcyh4ID0gLmRhdGFbW291dGNvbWVdXSwgeSA9IGFicyhhcy5udW1lcmljKC5kYXRhW1tvdXRjb21lXV0pIC0gYXMubnVtZXJpYygucHJlZF9jbGFzcykpLzIpKSArDQogIGdlb21fdmlvbGluKCkgKw0KICBzY2FsZV95X2NvbnRpbnVvdXMoYnJlYWtzID0gc2VxKC01LDUsMC41KSkgKw0KICBsYWJzKHkgPSAiUmVzaWR1YWxzIiwNCiAgICAgICB0aXRsZSA9ICJ7e291dGNvbWV9fSBSZXNpZHVhbCBlcnJvcnMgZm9yIGVzc2F5cyBpbiBoZWxkIG91dCBmb2xkcyIsDQogICAgICAgc3VidGl0bGUgPSAiVGhlIGhpZ2hlc3QgYW5kIGxvd2VzdCBlc3NheXMgYXJlIHN0aWxsIG5vdCBwcmVkaWN0ZWQgd2VsbCIpDQoNCnRyYWluX2Vzc2F5c19yYXdbDQoNCmNvbGxlY3RfcHJlZGljdGlvbnMocnMpIHw+IA0KICBtdXRhdGUocmVzaWR1YWwgPSBhcy5udW1lcmljKC5kYXRhW1tvdXRjb21lXV0pIC0gYXMubnVtZXJpYygucHJlZF9jbGFzcykpIHw+IA0KICBhcnJhbmdlKGRlc2MoYWJzKHJlc2lkdWFsKSkpIHw+IA0KICBzbGljZV9oZWFkKG4gPSA1KSB8PiANCiAgcHVsbCgucm93KQ0KDQosIF0gfD4gDQogIHNlbGVjdChmdWxsX3RleHQsIHt7b3V0Y29tZX19KQ0KDQpjb2xsZWN0X3ByZWRpY3Rpb25zKHJzKSB8PiANCiAgcm1zZSh0cnV0aCA9IGFzLm51bWVyaWMoLmRhdGFbW291dGNvbWVdXSkvMiwgZXN0aW1hdGUgPSBhcy5udW1lcmljKC5wcmVkX2NsYXNzKS8yKQ0KDQoNCmBgYA0KDQpSZXN1bHRzIGhlcmUgYXJlbid0IGdyZWF0LCBidXQgdGhleSBhcmUgbW9yZSBhcmUgbGVzcyBjb21wZXRpdGl2ZSB3aXRoIHRoZSBsZWFkZXJib2FyZCBmaWd1cmVzLg0KDQpUaGUgZmluYWwgZml0dGluZyBlbnNlbWJsZXMgYm90aCB0aGUgcmVncmVzc2lvbiBhbmQgY2xhc3NpZmljYXRpb24gZml0cywgYW5kIG1ha2VzIGEgcHJlZGljdGlvbiBvbiB0aGUgc3VibWlzc2lvbiBlc3NheXMuDQoNCmBgYHtyfQ0KI3wgbGFiZWw6IGZpdCBjb252ZW50aW9ucyBmaW5hbA0KDQpjbGFzc2lmaWNhdGlvbl9maXQgPC0gcGFyc25pcDo6Zml0KGNsYXNzaWZpY2F0aW9uX3dmLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc2lmaWNhdGlvbl90cmFpbl9kZikNCg0KZXh0cmFjdF9maXRfZW5naW5lKHJlZ3Jlc3Npb25fZml0KSB8PiANCiAgdmlwOjp2aXAobnVtX2ZlYXR1cmVzID0gMjApDQoNCnN1Ym1pc3Npb24gPC0gcHJlZGljdCgNCiAgY2xhc3NpZmljYXRpb25fZml0LA0KICANCiAgc3VibWl0X2Vzc2F5c19yYXcgfD4NCiAgICBiaW5kX2NvbHMocHJlZGljdChyZWdyZXNzaW9uX2ZpdCwgc3VibWl0X2Vzc2F5c19yYXcpKSB8Pg0KICAgIHJlbmFtZShyZWdyZXNzaW9uX3ByZWQgPSAucHJlZCkNCikgfD4NCiAgdHJhbnNtdXRlKHt7b3V0Y29tZX19IDo9IC5wcmVkX2NsYXNzKSB8Pg0KICBiaW5kX2NvbHMoc3VibWlzc2lvbikNCg0Kc3VibWlzc2lvbg0KDQpgYGANCg0KIyMgey19DQoNCiMgVGhlIFN1Ym1pc3Npb24NCg0KS2FnZ2xlJ3Mgc3lzdGVtIHJ1bnMgdGhlIHdvcmtib29rIHR3aWNlLiBUaGUgZmlyc3QgdGltZSBpcyBvbiB0aGUgdGlueSB0aHJlZSBsaW5lIHB1YmxpYyB0ZXN0IGRhdGFzZXQgaGVyZS4gVGhlIHNlY29uZCB0aW1lIGlzIG9uIGEgbXVjaCBtdWNoIGxhcmdlciBoaWRkZW4gdGVzdCBkYXRhc2V0LiAgQXMgYSBjaGVjayB0byBzaW11bGF0ZSBob3cgdGhlIGhpZGRlbiBkYXRzZXQgbWlnaHQgZml0LCB3ZSBjb3VsZCByZS1maXQgb24gdGhlIHRyYWluIGRhdGFzZXQgdGV4dCBhY3Jvc3MgYWxsIG9mIHRoZSBmaXRzLg0KDQpgYGB7cn0NCiN8IGxhYmVsOiB3cml0ZSBzdWJtaXNzaW9uIG91dCBhcyBhIGNzdg0KDQpzdWJtaXNzaW9uDQoNCiMgd3JpdGVfY3N2KHN1Ym1pc3Npb24sIGhlcmU6OmhlcmUoImRhdGEiLCAic3VibWlzc2lvbi5jc3YiKSkNCmBgYA0KDQojIE91dGNvbWUNCg0KTm90IG9ubHkgd2FzIHRoaXMgZXhlcmNpc2UgYSBnb29kIHN0dWR5IG9mIExpa2VydCBldmFsdWF0aW9uIGRhdGEsIGJ1dCBhbHNvIG9mIE5MUCB0ZWNobmlxdWVzIGFuZCBvZiBzdGF0aXN0aWNhbCByZXNhbXBsaW5nIHRvIGFzc3VyZSB0aGF0IHRoZSBtb2RlbCBwZXJmb3JtcyBvbiB1bnNlZW4gZGF0YS4gIFRoZSByZXN1bHRpbmcgbW9kZWxzIGhlcmUgbGFjayB0aGUgcHJlZGljdGl2ZSBwb3dlciBuZWVkZWQgZm9yIHByb2R1Y3Rpb24gdXNlLiANCg0KDQoNCg0KDQoNCg0K</div>

<!-- Adjust MathJax settings so that all math formulae are shown using
TeX fonts only; see
https://docs.mathjax.org/en/latest/web/configuration.html. This will make
the presentation more consistent at the cost of the webpage sometimes
taking slightly longer to load. Note that this only works because the
footer is added to webpages before the MathJax javascript. -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    "HTML-CSS": { availableFonts: ["TeX"] }
  });
</script>





</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("EnglishLanguageLearning.Rmd");
  window.initializeCodeFolding("hide" === "show");
});
</script>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
